{
  "collection": {
    "_": {
      "postman_id": "ad14dfb9-75d7-4a97-85bf-8665f83ae3c1",
      "exporter_id": "24140936",
      "collection_link": "https://red-escape-704404.postman.co/workspace/Team-Workspace~a1f4d6b2-7a17-4360-8a8d-46313f959e2b/collection/24140936-ad14dfb9-75d7-4a97-85bf-8665f83ae3c1?action=share&source=collection_link&creator=24140936"
    },
    "item": [
      {
        "id": "21f421ae-c384-4d4d-aaaf-4be237f23c3a",
        "name": "CP 및 정기결제 요청 전송",
        "item": [
          {
            "id": "e0bfb868-2ce4-4493-b50a-a50f44ea557a",
            "name": "READY - BATCH",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/x-www-form-urlencoded; charset=UTF-8"
                }
              ],
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "test",
                "script": {
                  "id": "32cdab1f-be6b-4c1b-8dd3-1f575a1fca8c",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "// 파싱 및 개별 디코딩\r",
                    "const parsed = parseQueryString(result);\r",
                    "const startUrlDecoded = safeDecodeURIComponent(parsed.STARTURL);\r",
                    "console.log(\"STARTURL(디코딩):\", startUrlDecoded);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메시지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"정기결제 초기인증 표준페이지 시작 URL(STARTURL) 정상출력\", function () {\r",
                    "    pm.expect(startUrlDecoded).to.eql(\"https://checkout.teledit.com/creditcard_recurring/web\")\r",
                    "})\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"위 표준페이지 시작 URL 전송 파라미터(STARTPARAMS) 정상출력\", function () {\r",
                    "    pm.expect(parsed.STARTPARAMS).to.not.be.undefined;\r",
                    "    pm.expect(parsed.STARTPARAMS).to.not.be.empty;\r",
                    "    pm.expect(parsed.STARTPARAMS).to.not.be.null;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"결제금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "7a95466d-d586-44b9-9428-4d8f2d060327"
                }
              },
              {
                "listen": "prerequest",
                "script": {
                  "id": "15bd2b87-f08f-4bc0-9b52-912263341d35",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'PC',\r",
                    "    TXTYPE: 'AUTH',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    CANCELURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                    "    RETURNURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                    "    ISBILL: 'Y',\r",
                    "    ISNOTI: 'N'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "e2c2b40b-8f37-4c0c-9acd-3c92aa22cdd3"
                }
              }
            ]
          },
          {
            "id": "929d767c-c4a1-4d8b-b079-4ece841fcd32",
            "name": "READY - DANALCARD",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/x-www-form-urlencoded; charset=UTF-8"
                }
              ],
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "test",
                "script": {
                  "id": "4875a90c-2370-4e61-8547-5920ea40c4c6",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "// 파싱 및 개별 디코딩\r",
                    "const parsed = parseQueryString(result);\r",
                    "const startUrlDecoded = safeDecodeURIComponent(parsed.STARTURL);\r",
                    "console.log(\"STARTURL(디코딩):\", startUrlDecoded);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메시지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"정기결제 초기인증 표준페이지 시작 URL(STARTURL) 정상출력\", function () {\r",
                    "    pm.expect(startUrlDecoded).to.eql(\"https://checkout.teledit.com/creditcard_std/web\")\r",
                    "})\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"위 표준페이지 시작 URL 전송 파라미터(STARTPARAMS) 정상출력\", function () {\r",
                    "    pm.expect(parsed.STARTPARAMS).to.not.be.undefined;\r",
                    "    pm.expect(parsed.STARTPARAMS).to.not.be.empty;\r",
                    "    pm.expect(parsed.STARTPARAMS).to.not.be.null;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"결제금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "5eecdfd7-7628-4b21-b5d4-d47141f72d4e"
                }
              },
              {
                "listen": "prerequest",
                "script": {
                  "id": "4fb0de3f-f334-4d1f-9190-51a895294efa",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'PC',\r",
                    "    TXTYPE: 'AUTH',\r",
                    "    SERVICETYPE: 'DANALCARD',\r",
                    "    CANCELURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                    "    RETURNURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                    "    ISBILL: 'Y',\r",
                    "    ISNOTI: 'N'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "5ef45d98-3c31-496c-981d-e6e91204a858"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "14f95b9b-6da1-4514-a3b1-7d99909353a1",
        "name": "초기 인증 결제 요청",
        "item": [
          {
            "id": "c17da523-cc3d-40c4-985c-a9959cdcb103",
            "name": "ISSUEBILLKEY",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/x-www-form-urlencoded; charset=UTF-8"
                }
              ],
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "c9d60ecc-a7e4-4b09-9bf0-443b5a22675b",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get('TID'),\r",
                    "    TXTYPE: 'ISSUEBILLKEY',\r",
                    "    SERVICETYPE: 'BATCH'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "7ec3c558-e069-483a-99b2-67acd1031dc9"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "ac344ff2-2cdd-41b0-aaa6-dde480a8e2c2",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "// 파싱 및 개별 디코딩\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) : 1104 출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"1104\")\r",
                    "});\r",
                    "\r",
                    "// \"존재하지 않는 거래 입니다.\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) : 존재하지 않는 거래입니다. 출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%C1%B8%C0%E7%C7%CF%C1%F6+%BE%CA%B4%C2+%B0%C5%B7%A1+%C0%D4%B4%CF%B4%D9.\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "e4a5822a-1e92-4fa8-8fcc-970dbdb13212"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "35b56a19-8ec9-4b5b-84a4-110a0a089d81",
        "name": "삼성카드",
        "item": [
          {
            "id": "9f447388-273f-4753-ad5f-86b9b07ca20f",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/x-www-form-urlencoded; charset=UTF-8"
                }
              ],
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "ec7c6ff6-208b-49bd-8ec1-c2b916a7e67e",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC250730151749FFCAA0',\r",
                    "    USERNAME: '김하늘',\r",
                    "    USERPHONE: '01085402697',\r",
                    "    ORDERID: '01234567'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "dbd56ce0-091a-4d77-9f89-37e4fa2acece"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "b3b974d0-05e8-433e-8063-2cd32bd40e41",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0500\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.eql(\"01085402697\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                    "  // 현재 시간 선언\r",
                    "  const now = new Date();\r",
                    "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                    "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                    "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                    "  const t = parsed.TRANTIME;\r",
                    "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                    "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                    "\r",
                    "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                    "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.eql(\"01234567\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"512028******7294\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"삼성카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"%BB%EF%BC%BA%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.eql(\"%EA%B9%3F%3F%3F%3F%3F\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "3f15c594-cd90-4d1e-9225-f93aefcdae80"
                }
              }
            ]
          },
          {
            "id": "afc9facf-6afa-4bde-b565-07619cb3be9a",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "test",
                "script": {
                  "id": "0f577b66-8214-4318-9981-e23fd7e14fbe",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "df937504-4680-45db-a84a-b2f0b746a534"
                }
              },
              {
                "listen": "prerequest",
                "script": {
                  "id": "a063f845-2fdf-4e98-8e4a-9ac3485160c3",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "0bcbdf4a-fd06-4e41-ad3b-b1ebfc6accf0"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "cd7268c3-b452-4dae-9838-4e1ba8ccf617",
        "name": "현대카드",
        "item": [
          {
            "id": "04e1ac78-dd90-433f-94d2-45424bccd8bb",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "d5aaf8a2-6839-4669-b6f3-ad4ffc09a6fc",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC221222165535557F38'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "38d24ec6-87af-4c18-b38d-57beebd34ae4"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "4fff1fab-5c30-4117-8a47-ae8823f64c8c",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0400\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                    "  // 현재 시간 선언\r",
                    "  const now = new Date();\r",
                    "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                    "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                    "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                    "  const t = parsed.TRANTIME;\r",
                    "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                    "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                    "\r",
                    "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                    "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"403293******4003\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"현대카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"%C7%F6%B4%EB%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "})\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "e83acc36-3aa6-4063-9d1e-214a0faf9912"
                }
              }
            ]
          },
          {
            "id": "5ad2313f-c794-4b45-85be-0d1ef5b80246",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "2ac34e68-7938-4a4d-9f97-aa626a4efcb7",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "c9e8e07b-7e2f-4609-b44f-3f1f07a67de5"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "a7e1ad34-5324-4b2b-96a7-219802c63f84",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "aa785774-422e-4582-a575-c8509db3c77b"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "3b056e9e-60b3-430d-b786-02d2f0b8d827",
        "name": "신한카드",
        "item": [
          {
            "id": "68db683d-d27f-4621-904b-198c1f1e93f9",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "f5da1896-eb36-4955-a1d0-cf188991f1b4",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC2507311547242F2CD0'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "44ab325b-c25a-4157-887e-5b0ecb4ba2bb"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "e354cada-9e39-4a53-8aab-02f27489c6aa",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0100\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                    "  // 현재 시간 선언\r",
                    "  const now = new Date();\r",
                    "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                    "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                    "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                    "  const t = parsed.TRANTIME;\r",
                    "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                    "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                    "\r",
                    "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                    "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"451842******5446\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"신한카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"%BD%C5%C7%D1%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "a1fcdcf6-708a-4690-9b3a-17460be8f675"
                }
              }
            ]
          },
          {
            "id": "7b32f830-5477-463f-b11d-8317d04bc436",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "ce0d2df3-f23b-4eb7-ba30-64a4ed7de815",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "8e0f4e44-7fc6-4208-becc-8b69fa03a0ed"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "8907160c-1f89-4ce5-8f81-8e5a3ca65431",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "f6cfbe8b-1704-49a9-9a44-b05044fdce0b"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "190a5732-e30f-4736-a7eb-f5ad85dd6048",
        "name": "농협카드",
        "item": [
          {
            "id": "0a636491-3670-4ba0-96a0-10352d1dcf13",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "00b7a4c2-cc58-4923-a3cd-da83440b5e43",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC2512151528144A426D'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "a746c610-8560-422d-97bb-17ef30ab0fdc"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "193c4a9f-fce8-4fff-a12e-73dbc1a4d9ae",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0800\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                    "  // 현재 시간 선언\r",
                    "  const now = new Date();\r",
                    "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                    "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                    "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                    "  const t = parsed.TRANTIME;\r",
                    "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                    "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                    "\r",
                    "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                    "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"542586******3820\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "// \"NH농협카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"NH%B3%F3%C7%F9%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "8c543704-493f-411b-a3ca-e7a0abc24b1d"
                }
              }
            ]
          },
          {
            "id": "9b93bf3a-5b37-4ec7-bbd0-3528dc73a73e",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "64dede67-e91e-4813-93c6-17af739b19a3",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "05ddd56c-24dd-4323-a489-86d688405f8a"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "77a075e8-21bc-4434-bc91-336f89e869e5",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "de3922fe-4613-454f-8853-7437c07b941e"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "f7312279-cd6f-41a7-8453-89039b5fc2e9",
        "name": "국민카드",
        "item": [
          {
            "id": "1f575ba0-a62e-4c43-b4bd-2fefc1fc9929",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "c8bfb7ff-a7ae-4bc3-a286-2635c526fb53",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC250804165745DBD04E'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "0c74b3e1-c9d6-46bb-b6a1-8d3f1516999d"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "c2dbb9de-ca8f-4708-93c8-88077716e798",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0300\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                    "  // 현재 시간 선언\r",
                    "  const now = new Date();\r",
                    "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                    "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                    "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                    "  const t = parsed.TRANTIME;\r",
                    "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                    "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                    "\r",
                    "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                    "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"540926******6041\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"국민카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"KB%B1%B9%B9%CE%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "b445b34b-4df0-4fb9-9d2a-263f76ae5126"
                }
              }
            ]
          },
          {
            "id": "831747a3-4cd1-4bd1-9b85-4e234e3f5eef",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "1caf6c1d-bbdb-4c3b-b214-e41b5785b4da",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "7d3b5403-183f-40a8-93ec-4de629103347"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "e0769758-9e12-4bc3-8a50-7f398da87673",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "d11d179d-6d61-4600-a895-141e2ace49a9"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "142971fa-ced6-433b-bd23-0e7b35f1c757",
        "name": "우리BC카드",
        "item": [
          {
            "id": "a5c6c8fd-f09d-4977-bca5-8e2d92aa3e3b",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "db662385-9265-4bad-be51-93128400a98d",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC25080416595836B04B'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "c65c7325-6cdb-43b3-91a0-590079f9467e"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "3fdd1810-5b6d-436a-b299-91a43bde9bf8",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0202\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                    "  // 현재 시간 선언\r",
                    "  const now = new Date();\r",
                    "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                    "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                    "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                    "  const t = parsed.TRANTIME;\r",
                    "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                    "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                    "\r",
                    "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                    "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"538920******1226\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"삼성카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"%BF%EC%B8%AEBC%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "beba7939-88f3-41c3-8eec-dc21f6a80a9a"
                }
              }
            ]
          },
          {
            "id": "c80e879d-e817-4fe0-8eb5-15521158c878",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "8c6a4406-7045-4734-a4bf-ec09f0bab72d",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "6f636a7f-8552-4681-9c1b-75b4e5236d8d"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "f5efacdc-0ad8-4f85-85a0-8bdeae353a1a",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "f681bf6a-0c22-4da7-8d6d-0bafbb9af295"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "c8959305-fb97-4acb-a69a-2ca94f96e8b9",
        "name": "우리독자카드",
        "item": [
          {
            "id": "3cd336ba-4813-41cb-8843-3adfe31de3ea",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "e3ac81e7-6e72-4c9f-b10f-3a45ece5dfaf",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC251215145003CEDD72'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "8bb55a04-2c72-4009-9353-5488d7e3dedc"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "e57e12ee-68e7-45d5-a455-84403bc27e3d",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0907\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                    "  // 현재 시간 선언\r",
                    "  const now = new Date();\r",
                    "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                    "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                    "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                    "  const t = parsed.TRANTIME;\r",
                    "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                    "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                    "\r",
                    "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                    "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"624404******8380\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"롯데카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"%BF%EC%B8%AE%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "7f55f613-210e-47eb-801d-f640eff5730c"
                }
              }
            ]
          },
          {
            "id": "fc368cbd-3089-4f8e-8088-820d8713c2be",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "228dc6c9-0789-4730-b451-75aa06c1ebbd",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "b9aeed1d-14d2-4482-b4ac-e7e2e12823a2"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "39bc42a7-e5ea-4c5e-b900-f46393b961db",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "679c785f-6781-4137-b091-1202beb8f845"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "f616d340-324e-4335-89a9-1259d2b64cf8",
        "name": "Kbank카드",
        "item": [
          {
            "id": "820dcd5e-3bed-4c22-a8b6-abbe43602dfe",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "3d258805-0ea5-4219-b086-529ad507b087",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC25121515231344D775'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "da2343db-8fab-4a71-98f1-e91f3b513971"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "8a657cdb-3763-466b-9df4-735c7459df61",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0921\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                    "  // 현재 시간 선언\r",
                    "  const now = new Date();\r",
                    "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                    "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                    "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                    "  const t = parsed.TRANTIME;\r",
                    "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                    "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                    "\r",
                    "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                    "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"485462******0767\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"삼성카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"%C4%C9%C0%CC%B9%F0%C5%A9%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "39000c39-bd37-4c09-9ea0-9f33199781a7"
                }
              }
            ]
          },
          {
            "id": "3e708f87-09fa-4448-b435-8503899740dd",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "e3859cc9-7925-40a8-b2d0-7bef6f620389",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "3304641a-de1f-4ff4-84fa-90cec5bcee00"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "6acc0f63-8c3e-4ecc-9058-5560c35c041b",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "df809c94-33b9-4bbf-9ff9-ed96226b32ce"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "ae81212e-1b26-4b5d-9704-a7ad2dfd96c3",
        "name": "롯데카드",
        "item": [
          {
            "id": "eaa8cf59-275e-477d-ab0e-e67c0125c902",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "2711826d-bc74-48fe-9fd1-6eee9264fa9e",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC2512151453119224E3'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "b635826f-fcdd-480a-ab5c-b613dd493149"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "e559c504-7453-4b9f-85ce-c49e77b87e00",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0700\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                    "  // 현재 시간 선언\r",
                    "  const now = new Date();\r",
                    "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                    "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                    "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                    "  const t = parsed.TRANTIME;\r",
                    "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                    "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                    "\r",
                    "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                    "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"513792******3380\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"롯데카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"%B7%D4%B5%A5%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "bfdaa6d5-31b2-4342-a895-a5b49cdc15d3"
                }
              }
            ]
          },
          {
            "id": "79f64b53-158c-40ca-b177-d121aa732945",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "e10446e5-a207-4a44-9dd1-cefb1d9e1fdb",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "fe84e3d0-2e2d-4363-b4c0-410a12924abd"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "45d0cef6-77f9-4b31-9e47-4bb06965408d",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "eaa71ea6-5b5b-4e54-8bd8-33e0aacf727c"
                }
              }
            ]
          }
        ],
        "event": []
      }
    ],
    "event": [],
    "variable": [],
    "info": {
      "_postman_id": "ad14dfb9-75d7-4a97-85bf-8665f83ae3c1",
      "name": "Danal_CreditRebill_v1.0",
      "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    }
  },
  "environment": {
    "_": {
      "postman_variable_scope": "environment",
      "postman_exported_at": "2025-08-18T05:02:37.387Z",
      "postman_exported_using": "Postman/11.58.5"
    },
    "id": "6094ec42-451a-414a-8cd4-1d771ed4e797",
    "name": "Danal_CreditRebill_v1.0",
    "values": [
      {
        "type": "any",
        "value": "https://tx-creditcard.danalpay.com/credit/",
        "key": "tx-credit"
      },
      {
        "type": "any",
        "value": "8kvDIwvdID7NWcBMND4uDZl2yxKEnkHwva%2BGAozGxPLrmLZKYke4Uj9KsfG%2FCRsA0f5lN7EQlNrz%2BPG7iQ2v2M%2BYEJSaLIDiJCF8C7b69x3UHF2oXKOi5dx0iNSz5prQ",
        "key": "encryptedData"
      },
      {
        "type": "any",
        "value": "RETURNCODE=0000&RETURNMSG=%BC%BA%B0%F8&BALANCE=0&O_TID=202601070515313921083400&TID=202601070515328211093400&TRANTIME=051532&TRANDATE=20260107&AMOUNT=301&DEPOSIT_AMT=0",
        "key": "decryptedResponse"
      },
      {
        "type": "any",
        "value": "",
        "key": "startUrlDecoded"
      },
      {
        "type": "any",
        "value": "202601070515313921083400",
        "key": "TID"
      },
      {
        "type": "any",
        "value": "",
        "key": "TRANDATE"
      },
      {
        "type": "any",
        "value": "051532",
        "key": "TRANTIME"
      }
    ]
  },
  "globals": {
    "id": "76facf74-d4d8-4dd4-8685-844143cc1bb1",
    "values": []
  },
  "run": {
    "stats": {
      "iterations": {
        "total": 1,
        "pending": 0,
        "failed": 0
      },
      "items": {
        "total": 21,
        "pending": 0,
        "failed": 0
      },
      "scripts": {
        "total": 42,
        "pending": 0,
        "failed": 0
      },
      "prerequests": {
        "total": 21,
        "pending": 0,
        "failed": 0
      },
      "requests": {
        "total": 21,
        "pending": 0,
        "failed": 0
      },
      "tests": {
        "total": 21,
        "pending": 0,
        "failed": 0
      },
      "assertions": {
        "total": 250,
        "pending": 0,
        "failed": 0
      },
      "testScripts": {
        "total": 21,
        "pending": 0,
        "failed": 0
      },
      "prerequestScripts": {
        "total": 21,
        "pending": 0,
        "failed": 0
      }
    },
    "timings": {
      "responseAverage": 1289.8095238095239,
      "responseMin": 24,
      "responseMax": 2026,
      "responseSd": 516.9094623725217,
      "dnsAverage": 209.89890000224113,
      "dnsMin": 209.89890000224113,
      "dnsMax": 209.89890000224113,
      "dnsSd": 0,
      "firstByteAverage": 1276.7018904756933,
      "firstByteMin": 22.639499999582767,
      "firstByteMax": 2024.1397999972105,
      "firstByteSd": 541.3749392451945,
      "started": 1767730503166,
      "completed": 1767730533600
    },
    "executions": [
      {
        "cursor": {
          "position": 0,
          "iteration": 0,
          "length": 21,
          "cycles": 1,
          "empty": false,
          "eof": false,
          "bof": true,
          "cr": false,
          "ref": "be57c075-f2fb-475f-aa43-eeaf7920b99b",
          "httpRequestId": "9d267755-42f2-4a2b-a7ee-18afd70527bf"
        },
        "item": {
          "id": "e0bfb868-2ce4-4493-b50a-a50f44ea557a",
          "name": "READY - BATCH",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded; charset=UTF-8"
              }
            ],
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "32cdab1f-be6b-4c1b-8dd3-1f575a1fca8c",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "// 파싱 및 개별 디코딩\r",
                  "const parsed = parseQueryString(result);\r",
                  "const startUrlDecoded = safeDecodeURIComponent(parsed.STARTURL);\r",
                  "console.log(\"STARTURL(디코딩):\", startUrlDecoded);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메시지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"정기결제 초기인증 표준페이지 시작 URL(STARTURL) 정상출력\", function () {\r",
                  "    pm.expect(startUrlDecoded).to.eql(\"https://checkout.teledit.com/creditcard_recurring/web\")\r",
                  "})\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"위 표준페이지 시작 URL 전송 파라미터(STARTPARAMS) 정상출력\", function () {\r",
                  "    pm.expect(parsed.STARTPARAMS).to.not.be.undefined;\r",
                  "    pm.expect(parsed.STARTPARAMS).to.not.be.empty;\r",
                  "    pm.expect(parsed.STARTPARAMS).to.not.be.null;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"결제금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});"
                ],
                "_lastExecutionId": "7a95466d-d586-44b9-9428-4d8f2d060327"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "15bd2b87-f08f-4bc0-9b52-912263341d35",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'PC',\r",
                  "    TXTYPE: 'AUTH',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    CANCELURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                  "    RETURNURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                  "    ISBILL: 'Y',\r",
                  "    ISNOTI: 'N'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "e2c2b40b-8f37-4c0c-9acd-3c92aa22cdd3"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4PJAgyNbIM2hLz3kcfuDNAuCqSPVhBCpg6V8SYW3jJ%2FZIfE36F%2BlYYpMSgxO77gr%2BDwLH0n%2BtJG7ZAyj6rsqbDI3wCKhX4bzlTMTVKd8c%2BGAYmpCZ3i8%2BtXuuBm6g2NRznUDXGC09xQFVhQa4p6tQyOn5eKksesgLSgIMzKa6kDqC5%2BLzMcAl8IF7qCGgIqWAazfqDqnE0a5U%2BZ8p2HIn%2FENLsoKdJRXIlRiPnCOj5yDVfIQWasCSQLbccOu1NheelnZWQGZ5rGm%2FTC5F8i9Vs5%2BjHsIKtlMOIqeb%2BdxblE4thUJb9NDu3NPdadnhpnr9g%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "Content-Type",
              "value": "application/x-www-form-urlencoded; charset=UTF-8"
            },
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "c496d389-ecd4-4e06-abe1-e6ddcd2779d1",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "d96be8c5-9ea8-409f-90d4-28984a6933a6",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Set-Cookie",
              "value": "SCOUTER=z7u8h5edqo3mck; Expires=Sun, 24-Jan-2094 23:29:11 GMT; Path=/"
            },
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "781"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 20:15:04 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              80,
              100,
              37,
              50,
              66,
              75,
              48,
              72,
              110,
              79,
              120,
              87,
              84,
              105,
              75,
              82,
              70,
              102,
              111,
              72,
              107,
              98,
              104,
              52,
              52,
              88,
              117,
              70,
              111,
              37,
              50,
              70,
              49,
              89,
              70,
              101,
              52,
              51,
              115,
              114,
              82,
              81,
              52,
              79,
              74,
              79,
              120,
              104,
              76,
              115,
              57,
              53,
              86,
              65,
              114,
              97,
              53,
              115,
              37,
              50,
              70,
              86,
              83,
              76,
              107,
              122,
              50,
              101,
              99,
              73,
              53,
              113,
              81,
              80,
              49,
              74,
              68,
              55,
              70,
              105,
              68,
              56,
              48,
              56,
              115,
              55,
              72,
              105,
              80,
              100,
              52,
              55,
              88,
              107,
              74,
              49,
              78,
              110,
              116,
              73,
              71,
              72,
              71,
              55,
              122,
              115,
              99,
              119,
              57,
              120,
              106,
              37,
              50,
              66,
              101,
              122,
              122,
              72,
              110,
              117,
              82,
              84,
              100,
              86,
              101,
              109,
              50,
              106,
              67,
              83,
              89,
              109,
              72,
              37,
              50,
              70,
              113,
              106,
              87,
              89,
              76,
              73,
              82,
              97,
              83,
              50,
              74,
              113,
              118,
              117,
              48,
              83,
              115,
              48,
              78,
              120,
              70,
              105,
              115,
              99,
              114,
              114,
              49,
              79,
              108,
              87,
              71,
              86,
              81,
              49,
              122,
              116,
              107,
              72,
              89,
              85,
              102,
              37,
              50,
              66,
              77,
              69,
              79,
              55,
              104,
              84,
              89,
              106,
              66,
              110,
              56,
              122,
              53,
              85,
              105,
              71,
              52,
              83,
              88,
              119,
              68,
              104,
              97,
              65,
              56,
              81,
              107,
              122,
              107,
              103,
              51,
              80,
              73,
              103,
              77,
              52,
              119,
              65,
              55,
              57,
              119,
              86,
              74,
              114,
              117,
              120,
              70,
              112,
              100,
              104,
              121,
              79,
              117,
              55,
              88,
              48,
              69,
              105,
              121,
              112,
              81,
              118,
              115,
              103,
              71,
              55,
              54,
              78,
              111,
              99,
              65,
              85,
              118,
              88,
              54,
              57,
              54,
              51,
              113,
              78,
              48,
              87,
              87,
              87,
              86,
              116,
              48,
              104,
              82,
              50,
              101,
              100,
              107,
              80,
              89,
              37,
              50,
              70,
              121,
              74,
              119,
              97,
              108,
              57,
              78,
              73,
              48,
              53,
              89,
              121,
              110,
              48,
              71,
              74,
              80,
              105,
              118,
              107,
              87,
              86,
              82,
              37,
              50,
              70,
              37,
              50,
              66,
              54,
              87,
              105,
              119,
              105,
              83,
              78,
              106,
              74,
              85,
              69,
              89,
              114,
              78,
              104,
              71,
              77,
              87,
              87,
              77,
              73,
              113,
              55,
              37,
              50,
              66,
              97,
              51,
              77,
              71,
              84,
              52,
              69,
              77,
              52,
              98,
              107,
              90,
              76,
              118,
              72,
              78,
              71,
              88,
              100,
              71,
              105,
              113,
              115,
              81,
              87,
              107,
              101,
              84,
              77,
              90,
              66,
              101,
              82,
              37,
              50,
              66,
              87,
              87,
              77,
              72,
              73,
              114,
              118,
              73,
              77,
              119,
              79,
              107,
              107,
              57,
              109,
              107,
              77,
              57,
              121,
              50,
              115,
              88,
              81,
              71,
              88,
              52,
              84,
              50,
              103,
              65,
              114,
              103,
              102,
              88,
              50,
              80,
              117,
              110,
              71,
              76,
              90,
              37,
              50,
              70,
              115,
              73,
              113,
              65,
              55,
              86,
              48,
              56,
              118,
              88,
              54,
              85,
              89,
              66,
              87,
              56,
              83,
              121,
              97,
              78,
              110,
              66,
              53,
              37,
              50,
              70,
              103,
              48,
              57,
              54,
              111,
              54,
              85,
              100,
              69,
              108,
              106,
              104,
              85,
              54,
              122,
              80,
              90,
              66,
              97,
              120,
              102,
              111,
              88,
              37,
              50,
              70,
              84,
              119,
              69,
              55,
              98,
              102,
              118,
              120,
              97,
              121,
              118,
              72,
              78,
              107,
              87,
              82,
              110,
              90,
              53,
              102,
              101,
              74,
              122,
              116,
              73,
              117,
              75,
              50,
              68,
              65,
              66,
              78,
              73,
              120,
              85,
              66,
              107,
              54,
              104,
              113,
              84,
              97,
              77,
              75,
              103,
              73,
              89,
              76,
              109,
              82,
              70,
              107,
              69,
              89,
              55,
              118,
              78,
              70,
              111,
              81,
              76,
              37,
              50,
              66,
              108,
              121,
              87,
              81,
              106,
              70,
              37,
              50,
              70,
              51,
              104,
              113,
              87,
              98,
              76,
              56,
              51,
              80,
              51,
              66,
              121,
              102,
              50,
              50,
              75,
              98,
              107,
              89,
              114,
              104,
              119,
              111,
              122,
              99,
              48,
              54,
              108,
              85,
              89,
              113,
              100,
              51,
              66,
              107,
              53,
              120,
              88,
              78,
              52,
              109,
              37,
              50,
              66,
              37,
              50,
              70,
              69,
              51,
              75,
              69,
              55,
              114,
              74,
              115,
              57,
              119,
              80,
              121,
              77,
              87,
              72,
              70,
              48,
              82,
              109,
              98,
              54,
              108,
              90,
              83,
              75,
              106,
              69,
              98,
              49,
              84,
              50,
              49,
              78,
              70,
              71,
              106,
              100,
              85,
              109,
              88,
              76,
              66,
              65,
              66,
              120,
              105,
              115,
              66,
              78,
              55,
              116,
              85,
              86,
              37,
              50,
              66,
              114,
              97,
              99,
              74,
              112,
              85,
              90,
              51,
              112,
              51,
              79,
              50,
              99,
              111,
              110,
              99,
              113,
              55,
              74,
              67,
              67,
              86,
              122,
              72,
              86,
              75,
              56,
              81,
              121,
              65,
              82,
              68,
              114,
              100,
              105,
              115,
              66,
              49,
              37,
              50,
              70,
              83,
              54,
              72,
              50,
              48,
              117,
              98,
              119,
              56,
              118,
              80,
              104,
              85,
              85,
              98,
              106,
              48,
              66,
              68,
              103,
              70,
              101,
              72,
              50,
              98,
              97,
              73,
              90,
              67,
              102,
              72,
              73,
              103,
              83,
              111,
              120,
              80,
              49,
              103,
              37,
              50,
              70,
              119,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 291,
          "responseSize": 781
        },
        "id": "e0bfb868-2ce4-4493-b50a-a50f44ea557a",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메시지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "정기결제 초기인증 표준페이지 시작 URL(STARTURL) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "위 표준페이지 시작 URL 전송 파라미터(STARTPARAMS) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결제금액(AMOUNT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "2bce2f07-9123-4fed-9bdb-c028157600c9",
          "length": 21,
          "cycles": 1,
          "position": 1,
          "iteration": 0,
          "httpRequestId": "2e7019a4-a762-4ab8-8d88-6d51405954f4"
        },
        "item": {
          "id": "929d767c-c4a1-4d8b-b079-4ece841fcd32",
          "name": "READY - DANALCARD",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded; charset=UTF-8"
              }
            ],
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "4875a90c-2370-4e61-8547-5920ea40c4c6",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "// 파싱 및 개별 디코딩\r",
                  "const parsed = parseQueryString(result);\r",
                  "const startUrlDecoded = safeDecodeURIComponent(parsed.STARTURL);\r",
                  "console.log(\"STARTURL(디코딩):\", startUrlDecoded);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메시지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"정기결제 초기인증 표준페이지 시작 URL(STARTURL) 정상출력\", function () {\r",
                  "    pm.expect(startUrlDecoded).to.eql(\"https://checkout.teledit.com/creditcard_std/web\")\r",
                  "})\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"위 표준페이지 시작 URL 전송 파라미터(STARTPARAMS) 정상출력\", function () {\r",
                  "    pm.expect(parsed.STARTPARAMS).to.not.be.undefined;\r",
                  "    pm.expect(parsed.STARTPARAMS).to.not.be.empty;\r",
                  "    pm.expect(parsed.STARTPARAMS).to.not.be.null;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"결제금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});"
                ],
                "_lastExecutionId": "5eecdfd7-7628-4b21-b5d4-d47141f72d4e"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "4fb0de3f-f334-4d1f-9190-51a895294efa",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'PC',\r",
                  "    TXTYPE: 'AUTH',\r",
                  "    SERVICETYPE: 'DANALCARD',\r",
                  "    CANCELURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                  "    RETURNURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                  "    ISBILL: 'Y',\r",
                  "    ISNOTI: 'N'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "5ef45d98-3c31-496c-981d-e6e91204a858"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4PJAgyNbIM2hLz3kcfuDNAsCL18rdUmVCzFjEXB9wjgQ82IteFWZK11Um66aaXg9%2BmJBA%2BzStWEMjr0dSocIEm%2Bbu9cYhIHHrFuuMeAbp0%2FaOn9YPjFswBAcVkFCl4MZNYRXi9%2BMiA7xwR%2FFNE00HJ0pC21O5yf5imQNizmVqk2bD03K20FpT3Fs3h%2FUCOJ0UXofslr6lyNGsyvb6DemiNcWC4LE3zCDhJmfdiJa9ITHGb2ToWrxU2XD3B50so4Ru4EZtRrOIrbszRI9doqcDx5dZKeCsMBh%2Ff1PMU0qTPX5ctV%2BHYz%2F289vKWnUu4B9CA%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "Content-Type",
              "value": "application/x-www-form-urlencoded; charset=UTF-8"
            },
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "1f002def-7612-4de9-a36c-495698f301e1",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z7u8h5edqo3mck",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "d949161b-b11c-4671-8c6e-e39f129cabf4",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "773"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 20:15:04 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              80,
              100,
              37,
              50,
              66,
              75,
              48,
              72,
              110,
              79,
              120,
              87,
              84,
              105,
              75,
              82,
              70,
              102,
              111,
              72,
              107,
              98,
              104,
              52,
              52,
              88,
              117,
              70,
              111,
              37,
              50,
              70,
              49,
              89,
              70,
              101,
              52,
              51,
              115,
              114,
              82,
              81,
              52,
              79,
              74,
              79,
              120,
              104,
              76,
              115,
              57,
              53,
              86,
              65,
              114,
              97,
              53,
              115,
              37,
              50,
              70,
              86,
              83,
              76,
              107,
              122,
              50,
              101,
              99,
              73,
              53,
              113,
              81,
              80,
              49,
              74,
              68,
              55,
              70,
              105,
              68,
              56,
              48,
              56,
              115,
              55,
              72,
              105,
              80,
              100,
              52,
              97,
              105,
              70,
              118,
              66,
              106,
              114,
              51,
              113,
              89,
              111,
              122,
              100,
              72,
              81,
              53,
              88,
              122,
              103,
              106,
              53,
              80,
              89,
              79,
              50,
              49,
              57,
              82,
              107,
              70,
              89,
              100,
              102,
              37,
              50,
              70,
              74,
              102,
              74,
              89,
              54,
              116,
              122,
              122,
              121,
              51,
              84,
              122,
              105,
              75,
              106,
              85,
              81,
              103,
              116,
              78,
              74,
              118,
              116,
              116,
              65,
              50,
              85,
              85,
              114,
              37,
              50,
              66,
              108,
              122,
              118,
              121,
              109,
              102,
              49,
              66,
              101,
              97,
              74,
              121,
              119,
              70,
              87,
              68,
              83,
              118,
              98,
              98,
              57,
              56,
              82,
              84,
              103,
              80,
              70,
              109,
              79,
              50,
              72,
              37,
              50,
              66,
              97,
              99,
              70,
              109,
              108,
              102,
              100,
              74,
              112,
              98,
              89,
              90,
              78,
              111,
              72,
              74,
              100,
              100,
              78,
              74,
              118,
              89,
              89,
              112,
              106,
              113,
              75,
              115,
              56,
              111,
              80,
              115,
              116,
              70,
              120,
              102,
              107,
              87,
              67,
              71,
              57,
              73,
              57,
              88,
              79,
              85,
              109,
              37,
              50,
              66,
              89,
              82,
              77,
              75,
              105,
              81,
              70,
              70,
              78,
              51,
              87,
              71,
              111,
              104,
              66,
              110,
              100,
              72,
              82,
              113,
              97,
              77,
              55,
              49,
              67,
              37,
              50,
              66,
              54,
              122,
              101,
              103,
              105,
              76,
              55,
              105,
              115,
              86,
              66,
              117,
              71,
              102,
              71,
              75,
              90,
              71,
              79,
              90,
              90,
              100,
              115,
              113,
              54,
              81,
              65,
              51,
              107,
              113,
              66,
              98,
              50,
              57,
              98,
              104,
              88,
              103,
              68,
              80,
              106,
              99,
              70,
              86,
              110,
              73,
              89,
              107,
              48,
              37,
              50,
              66,
              117,
              99,
              79,
              54,
              100,
              76,
              120,
              78,
              70,
              68,
              97,
              88,
              68,
              98,
              111,
              99,
              111,
              54,
              79,
              117,
              54,
              78,
              103,
              77,
              77,
              113,
              121,
              82,
              68,
              56,
              79,
              50,
              87,
              76,
              74,
              118,
              48,
              97,
              53,
              37,
              50,
              70,
              112,
              104,
              37,
              50,
              66,
              70,
              103,
              109,
              52,
              102,
              113,
              52,
              73,
              53,
              72,
              37,
              50,
              70,
              117,
              79,
              50,
              70,
              87,
              104,
              90,
              98,
              88,
              108,
              81,
              49,
              78,
              112,
              84,
              82,
              57,
              105,
              101,
              57,
              90,
              78,
              85,
              112,
              72,
              52,
              50,
              82,
              90,
              108,
              80,
              119,
              109,
              107,
              122,
              85,
              56,
              72,
              70,
              106,
              37,
              50,
              70,
              50,
              84,
              51,
              53,
              116,
              83,
              70,
              68,
              89,
              99,
              69,
              68,
              122,
              83,
              77,
              70,
              57,
              70,
              67,
              103,
              86,
              52,
              52,
              73,
              112,
              82,
              105,
              107,
              68,
              69,
              72,
              113,
              52,
              79,
              87,
              116,
              112,
              97,
              90,
              82,
              81,
              99,
              70,
              99,
              122,
              72,
              114,
              109,
              102,
              115,
              81,
              82,
              83,
              54,
              52,
              65,
              99,
              108,
              37,
              50,
              70,
              76,
              48,
              70,
              111,
              65,
              78,
              98,
              116,
              99,
              89,
              104,
              84,
              49,
              68,
              78,
              85,
              54,
              118,
              37,
              50,
              66,
              82,
              76,
              113,
              112,
              84,
              110,
              122,
              86,
              105,
              109,
              105,
              48,
              82,
              82,
              107,
              70,
              106,
              108,
              69,
              71,
              52,
              76,
              107,
              101,
              65,
              108,
              83,
              55,
              86,
              100,
              74,
              84,
              72,
              86,
              115,
              49,
              69,
              109,
              68,
              76,
              69,
              79,
              80,
              121,
              90,
              66,
              87,
              68,
              49,
              115,
              119,
              114,
              68,
              86,
              113,
              77,
              120,
              55,
              68,
              53,
              65,
              78,
              70,
              87,
              116,
              71,
              108,
              86,
              68,
              65,
              105,
              49,
              101,
              68,
              87,
              84,
              121,
              54,
              97,
              55,
              102,
              70,
              112,
              80,
              98,
              90,
              83,
              84,
              103,
              120,
              100,
              106,
              97,
              86,
              107,
              104,
              104,
              100,
              73,
              50,
              98,
              48,
              78,
              78,
              115,
              80,
              70,
              67,
              72,
              52,
              78,
              80,
              81,
              120,
              100,
              113,
              85,
              83,
              70,
              115,
              67,
              54,
              75,
              57,
              89,
              75,
              80,
              101,
              72,
              107,
              109,
              107,
              81,
              104,
              108,
              104,
              82,
              97,
              110,
              79,
              79,
              115,
              57,
              68,
              57,
              117,
              49,
              90,
              98,
              80,
              116,
              113,
              115,
              111,
              73,
              56,
              106,
              89,
              84,
              77,
              113,
              84,
              57,
              53,
              82,
              78,
              114,
              56,
              121,
              112,
              102,
              71,
              53,
              112,
              55,
              82,
              76,
              106,
              108,
              103,
              116,
              69,
              119,
              50,
              101,
              70,
              74,
              100,
              37,
              50,
              70,
              56,
              113,
              119,
              89,
              75,
              37,
              50,
              70,
              103,
              122,
              70,
              114,
              69,
              103,
              98,
              75,
              99,
              103,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 36,
          "responseSize": 773
        },
        "id": "929d767c-c4a1-4d8b-b079-4ece841fcd32",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메시지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "정기결제 초기인증 표준페이지 시작 URL(STARTURL) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "위 표준페이지 시작 URL 전송 파라미터(STARTPARAMS) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결제금액(AMOUNT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "254d4dfd-1af4-4c0d-be1b-8804d4617e77",
          "length": 21,
          "cycles": 1,
          "position": 2,
          "iteration": 0,
          "httpRequestId": "e226bd33-9320-4519-80d2-a0a5be922afd"
        },
        "item": {
          "id": "c17da523-cc3d-40c4-985c-a9959cdcb103",
          "name": "ISSUEBILLKEY",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded; charset=UTF-8"
              }
            ],
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "c9d60ecc-a7e4-4b09-9bf0-443b5a22675b",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get('TID'),\r",
                  "    TXTYPE: 'ISSUEBILLKEY',\r",
                  "    SERVICETYPE: 'BATCH'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "7ec3c558-e069-483a-99b2-67acd1031dc9"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "ac344ff2-2cdd-41b0-aaa6-dde480a8e2c2",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "// 파싱 및 개별 디코딩\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) : 1104 출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"1104\")\r",
                  "});\r",
                  "\r",
                  "// \"존재하지 않는 거래 입니다.\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) : 존재하지 않는 거래입니다. 출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%C1%B8%C0%E7%C7%CF%C1%F6+%BE%CA%B4%C2+%B0%C5%B7%A1+%C0%D4%B4%CF%B4%D9.\")\r",
                  "});"
                ],
                "_lastExecutionId": "e4a5822a-1e92-4fa8-8fcc-970dbdb13212"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDXHvMUqO25iIdKkD6XH4VkTYfgoBPJqjGpr15Fqq4CCxlzQc11Pn06IJSodR9hnt4%2FgbXDCdFcZ2uADRjw%2Fvh8Q%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "Content-Type",
              "value": "application/x-www-form-urlencoded; charset=UTF-8"
            },
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "1d74ef24-4497-4667-936b-7a3ab973c7a1",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z7u8h5edqo3mck",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "e63b10ab-f47e-4ade-bbc8-a336148d8ba9",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "173"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 20:15:04 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              102,
              117,
              54,
              83,
              50,
              114,
              73,
              76,
              75,
              49,
              37,
              50,
              70,
              69,
              48,
              108,
              103,
              69,
              121,
              75,
              71,
              81,
              51,
              97,
              115,
              54,
              107,
              69,
              107,
              75,
              101,
              114,
              56,
              72,
              66,
              109,
              89,
              119,
              80,
              108,
              76,
              84,
              81,
              80,
              113,
              101,
              87,
              101,
              111,
              48,
              116,
              97,
              76,
              106,
              111,
              73,
              113,
              89,
              51,
              110,
              116,
              53,
              77,
              57,
              65,
              105,
              110,
              57,
              37,
              50,
              70,
              100,
              83,
              114,
              110,
              101,
              121,
              53,
              88,
              107,
              55,
              78,
              56,
              114,
              114,
              88,
              101,
              68,
              97,
              116,
              88,
              109,
              88,
              51,
              99,
              66,
              107,
              87,
              56,
              65,
              75,
              37,
              50,
              70,
              104,
              117,
              114,
              49,
              48,
              51,
              74,
              67,
              80,
              107,
              37,
              50,
              70,
              103,
              110,
              72,
              73,
              102,
              103,
              107,
              78,
              117,
              120,
              115,
              73,
              101,
              81,
              70,
              83,
              118,
              73,
              102,
              73,
              37,
              50,
              70,
              72,
              49,
              74,
              84,
              105,
              55,
              116,
              87,
              79,
              111,
              99,
              37,
              50,
              66,
              109,
              103,
              84,
              51,
              100,
              99,
              88,
              65,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 24,
          "responseSize": 173
        },
        "id": "c17da523-cc3d-40c4-985c-a9959cdcb103",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) : 1104 출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) : 존재하지 않는 거래입니다. 출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "453bb9cd-193e-4a7d-86c6-c24149c3f2a0",
          "length": 21,
          "cycles": 1,
          "position": 3,
          "iteration": 0,
          "httpRequestId": "91359b8c-18f3-4221-8fc6-57dec3bd4aed"
        },
        "item": {
          "id": "9f447388-273f-4753-ad5f-86b9b07ca20f",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded; charset=UTF-8"
              }
            ],
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "ec7c6ff6-208b-49bd-8ec1-c2b916a7e67e",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC250730151749FFCAA0',\r",
                  "    USERNAME: '김하늘',\r",
                  "    USERPHONE: '01085402697',\r",
                  "    ORDERID: '01234567'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "dbd56ce0-091a-4d77-9f89-37e4fa2acece"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "b3b974d0-05e8-433e-8063-2cd32bd40e41",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0500\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.eql(\"01085402697\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                  "  // 현재 시간 선언\r",
                  "  const now = new Date();\r",
                  "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                  "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                  "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                  "  const t = parsed.TRANTIME;\r",
                  "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                  "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                  "\r",
                  "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                  "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.eql(\"01234567\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"512028******7294\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"삼성카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%BB%EF%BC%BA%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.eql(\"%EA%B9%3F%3F%3F%3F%3F\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "3f15c594-cd90-4d1e-9225-f93aefcdae80"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzccrERjqayECmibASVLCFcu3mtMwnyeSqsDkh6Ok0RVNhbkzCgrGZvyWLuE0qblstQgkt2NYUzE21ScHAo%2BsYJOcT3xCtYEislZjbacyD1Wou68o56siY3%2FOkdyV%2FLh5ZjM%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "Content-Type",
              "value": "application/x-www-form-urlencoded; charset=UTF-8"
            },
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "41068fdb-3bca-485e-b7be-ea4719e2ae4e",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z7u8h5edqo3mck",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "780dc708-2aaf-4fa8-9cd5-11f4aaa5e98a",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "481"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 20:15:05 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              105,
              110,
              122,
              90,
              79,
              117,
              104,
              37,
              50,
              70,
              73,
              90,
              56,
              73,
              52,
              117,
              100,
              113,
              98,
              71,
              72,
              116,
              66,
              107,
              104,
              103,
              100,
              105,
              37,
              50,
              66,
              77,
              100,
              87,
              117,
              68,
              82,
              87,
              57,
              101,
              107,
              115,
              72,
              103,
              87,
              73,
              67,
              99,
              115,
              65,
              48,
              98,
              55,
              117,
              88,
              103,
              97,
              88,
              48,
              68,
              56,
              106,
              49,
              99,
              112,
              52,
              111,
              115,
              116,
              51,
              54,
              57,
              67,
              97,
              98,
              37,
              50,
              70,
              109,
              119,
              87,
              67,
              67,
              86,
              121,
              88,
              109,
              108,
              122,
              99,
              78,
              79,
              74,
              84,
              69,
              107,
              81,
              111,
              82,
              55,
              88,
              52,
              37,
              50,
              70,
              108,
              37,
              50,
              70,
              87,
              69,
              90,
              113,
              88,
              49,
              72,
              51,
              120,
              117,
              102,
              57,
              102,
              86,
              72,
              110,
              83,
              85,
              56,
              74,
              75,
              105,
              98,
              113,
              110,
              73,
              80,
              116,
              103,
              73,
              49,
              103,
              86,
              110,
              99,
              83,
              122,
              80,
              48,
              120,
              121,
              82,
              109,
              110,
              52,
              88,
              89,
              116,
              50,
              109,
              78,
              105,
              100,
              72,
              116,
              114,
              118,
              49,
              100,
              88,
              51,
              77,
              77,
              122,
              85,
              88,
              98,
              98,
              97,
              37,
              50,
              70,
              83,
              83,
              84,
              37,
              50,
              66,
              120,
              55,
              80,
              77,
              70,
              52,
              117,
              48,
              112,
              112,
              89,
              113,
              82,
              107,
              111,
              70,
              105,
              99,
              75,
              37,
              50,
              66,
              66,
              56,
              50,
              48,
              37,
              50,
              70,
              97,
              81,
              99,
              103,
              104,
              56,
              77,
              71,
              76,
              73,
              103,
              101,
              57,
              70,
              49,
              74,
              108,
              102,
              75,
              51,
              121,
              97,
              83,
              75,
              69,
              112,
              69,
              108,
              100,
              78,
              116,
              78,
              120,
              74,
              114,
              55,
              75,
              102,
              68,
              70,
              115,
              50,
              117,
              120,
              76,
              120,
              108,
              55,
              80,
              48,
              37,
              50,
              66,
              115,
              69,
              82,
              98,
              85,
              76,
              37,
              50,
              66,
              88,
              56,
              115,
              120,
              56,
              80,
              55,
              68,
              50,
              79,
              37,
              50,
              66,
              106,
              81,
              69,
              57,
              49,
              122,
              71,
              118,
              83,
              76,
              67,
              52,
              107,
              50,
              109,
              81,
              107,
              84,
              49,
              101,
              81,
              114,
              51,
              54,
              78,
              115,
              70,
              111,
              48,
              51,
              90,
              115,
              121,
              85,
              56,
              80,
              98,
              89,
              122,
              101,
              102,
              120,
              74,
              75,
              99,
              113,
              49,
              102,
              84,
              114,
              48,
              102,
              88,
              82,
              69,
              75,
              57,
              54,
              111,
              85,
              98,
              66,
              98,
              87,
              56,
              111,
              108,
              113,
              86,
              119,
              102,
              112,
              98,
              54,
              119,
              74,
              80,
              77,
              99,
              51,
              109,
              88,
              81,
              119,
              108,
              108,
              76,
              70,
              116,
              70,
              119,
              79,
              112,
              71,
              114,
              113,
              122,
              110,
              52,
              121,
              101,
              101,
              49,
              89,
              120,
              37,
              50,
              70,
              115,
              88,
              116,
              120,
              71,
              82,
              100,
              70,
              110,
              56,
              77
            ]
          },
          "cookie": [],
          "responseTime": 1485,
          "responseSize": 481
        },
        "id": "9f447388-273f-4753-ad5f-86b9b07ca20f",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) ±5초 이내 검증",
            "skipped": false
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "66111dad-888c-4275-bc8c-0a7d647f2474",
          "length": 21,
          "cycles": 1,
          "position": 4,
          "iteration": 0,
          "httpRequestId": "e42deba0-92b0-4264-a775-a413d60eb5b5"
        },
        "item": {
          "id": "afc9facf-6afa-4bde-b565-07619cb3be9a",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "0f577b66-8214-4318-9981-e23fd7e14fbe",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "df937504-4680-45db-a84a-b2f0b746a534"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "a063f845-2fdf-4e98-8e4a-9ac3485160c3",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "0bcbdf4a-fd06-4e41-ad3b-b1ebfc6accf0"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDfZZzhmjDeTPpwNhvVMB%2Bppf0uluNuS9ofpshWY7elGlXNY%2B1KNj1XO2GbJzwIGm%2FrebiWR0hJCrUFr9taELfRDIVv%2F%2BBv2Ce5oI121dCdvQ"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "d54f50d6-fefe-489e-b3da-e9aab155d8f0",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z7u8h5edqo3mck",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "80e5578f-a040-4292-8740-f9917823f568",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "249"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 20:15:07 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              112,
              69,
              99,
              109,
              104,
              55,
              106,
              76,
              56,
              116,
              118,
              81,
              56,
              121,
              77,
              75,
              108,
              105,
              102,
              109,
              112,
              122,
              78,
              116,
              118,
              55,
              65,
              113,
              111,
              78,
              74,
              75,
              79,
              106,
              106,
              106,
              68,
              53,
              111,
              106,
              89,
              51,
              79,
              87,
              114,
              65,
              115,
              86,
              69,
              120,
              53,
              56,
              110,
              55,
              109,
              110,
              80,
              110,
              122,
              117,
              70,
              65,
              65,
              66,
              69,
              107,
              82,
              109,
              54,
              76,
              108,
              88,
              117,
              69,
              117,
              101,
              80,
              85,
              100,
              98,
              109,
              50,
              104,
              49,
              98,
              101,
              119,
              56,
              37,
              50,
              66,
              113,
              56,
              104,
              54,
              115,
              85,
              79,
              113,
              69,
              54,
              71,
              52,
              122,
              77,
              69,
              72,
              110,
              50,
              103,
              100,
              83,
              53,
              74,
              55,
              106,
              55,
              104,
              77,
              103,
              71,
              110,
              114,
              111,
              87,
              84,
              98,
              79,
              120,
              54,
              111,
              65,
              77,
              113,
              76,
              122,
              75,
              98,
              100,
              76,
              56,
              120,
              88,
              121,
              79,
              73,
              80,
              98,
              105,
              79,
              76,
              80,
              116,
              48,
              66,
              114,
              116,
              79,
              118,
              83,
              84,
              89,
              102,
              98,
              76,
              73,
              71,
              68,
              65,
              77,
              77,
              81,
              73,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1461,
          "responseSize": 249
        },
        "id": "afc9facf-6afa-4bde-b565-07619cb3be9a",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "6a4b4fa0-5fef-4f4b-b016-c33c6009ca0a",
          "length": 21,
          "cycles": 1,
          "position": 5,
          "iteration": 0,
          "httpRequestId": "4de82687-7bc0-4589-838c-007420dbf7c5"
        },
        "item": {
          "id": "04e1ac78-dd90-433f-94d2-45424bccd8bb",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "d5aaf8a2-6839-4669-b6f3-ad4ffc09a6fc",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC221222165535557F38'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "38d24ec6-87af-4c18-b38d-57beebd34ae4"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "4fff1fab-5c30-4117-8a47-ae8823f64c8c",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0400\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                  "  // 현재 시간 선언\r",
                  "  const now = new Date();\r",
                  "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                  "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                  "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                  "  const t = parsed.TRANTIME;\r",
                  "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                  "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                  "\r",
                  "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                  "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"403293******4003\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"현대카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%C7%F6%B4%EB%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "})\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "e83acc36-3aa6-4063-9d1e-214a0faf9912"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzceacjSE9wkZ8OEcuyhqS4aTCOgYJsVDSvmkj%2FNDn1RD1w%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "bdae1563-5654-4b1f-8b63-efde5979b374",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z7u8h5edqo3mck",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "2bac38aa-af90-43be-99d3-fdef9f96a4c6",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "447"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 20:15:09 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              53,
              70,
              88,
              84,
              104,
              82,
              70,
              68,
              71,
              122,
              97,
              100,
              67,
              102,
              82,
              75,
              111,
              97,
              74,
              107,
              107,
              50,
              55,
              78,
              97,
              109,
              97,
              54,
              87,
              111,
              56,
              52,
              81,
              100,
              84,
              108,
              107,
              83,
              116,
              106,
              99,
              99,
              111,
              122,
              88,
              97,
              116,
              67,
              88,
              102,
              57,
              103,
              106,
              89,
              105,
              83,
              86,
              111,
              119,
              80,
              49,
              106,
              53,
              87,
              98,
              48,
              101,
              65,
              51,
              113,
              90,
              84,
              114,
              74,
              80,
              72,
              118,
              117,
              87,
              90,
              88,
              71,
              118,
              101,
              109,
              88,
              109,
              109,
              70,
              67,
              114,
              84,
              109,
              70,
              55,
              111,
              67,
              114,
              68,
              113,
              85,
              77,
              76,
              72,
              89,
              87,
              65,
              49,
              110,
              81,
              116,
              89,
              99,
              112,
              37,
              50,
              66,
              89,
              109,
              119,
              55,
              98,
              85,
              112,
              67,
              100,
              54,
              90,
              66,
              88,
              114,
              121,
              57,
              119,
              101,
              115,
              84,
              103,
              52,
              116,
              118,
              52,
              117,
              70,
              52,
              49,
              76,
              108,
              74,
              83,
              99,
              73,
              83,
              102,
              118,
              115,
              119,
              122,
              115,
              86,
              82,
              116,
              117,
              118,
              37,
              50,
              66,
              115,
              105,
              107,
              97,
              106,
              73,
              106,
              84,
              111,
              81,
              97,
              74,
              105,
              110,
              105,
              108,
              37,
              50,
              70,
              90,
              99,
              101,
              81,
              37,
              50,
              70,
              97,
              107,
              105,
              72,
              115,
              115,
              65,
              116,
              103,
              88,
              48,
              121,
              110,
              75,
              79,
              68,
              102,
              119,
              77,
              90,
              49,
              80,
              57,
              86,
              118,
              77,
              101,
              113,
              73,
              117,
              108,
              84,
              37,
              50,
              70,
              54,
              74,
              82,
              109,
              119,
              106,
              118,
              82,
              80,
              83,
              37,
              50,
              70,
              87,
              97,
              119,
              101,
              102,
              81,
              107,
              115,
              74,
              86,
              55,
              90,
              103,
              114,
              73,
              120,
              118,
              73,
              80,
              119,
              101,
              70,
              37,
              50,
              70,
              82,
              118,
              74,
              97,
              119,
              90,
              57,
              70,
              97,
              114,
              117,
              111,
              112,
              67,
              116,
              108,
              99,
              87,
              85,
              37,
              50,
              66,
              37,
              50,
              70,
              118,
              115,
              75,
              81,
              84,
              37,
              50,
              70,
              101,
              99,
              108,
              88,
              56,
              68,
              76,
              90,
              101,
              84,
              102,
              115,
              75,
              99,
              81,
              108,
              104,
              49,
              110,
              71,
              72,
              113,
              37,
              50,
              66,
              83,
              54,
              79,
              84,
              67,
              70,
              90,
              88,
              53,
              114,
              120,
              37,
              50,
              70,
              97,
              73,
              108,
              52,
              99,
              81,
              101,
              55,
              119,
              69,
              74,
              37,
              50,
              66,
              89,
              66,
              37,
              50,
              70,
              107,
              81,
              52,
              71,
              55,
              99,
              106,
              85,
              50,
              67,
              88,
              111,
              65,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1680,
          "responseSize": 447
        },
        "id": "04e1ac78-dd90-433f-94d2-45424bccd8bb",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) ±5초 이내 검증",
            "skipped": false
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "421ac2f6-5b9e-4b97-a689-e3bdd9760354",
          "length": 21,
          "cycles": 1,
          "position": 6,
          "iteration": 0,
          "httpRequestId": "3accbc15-05b8-49d1-ae76-831a9fbfcc3f"
        },
        "item": {
          "id": "5ad2313f-c794-4b45-85be-0d1ef5b80246",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "2ac34e68-7938-4a4d-9f97-aa626a4efcb7",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "c9e8e07b-7e2f-4609-b44f-3f1f07a67de5"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "a7e1ad34-5324-4b2b-96a7-219802c63f84",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "aa785774-422e-4582-a575-c8509db3c77b"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDe6QHfx%2FudB6pcuYFHr0E5cyv8FLRTepTooSxnTjs8ipFLra6GLFrkqW1uYIcu8xLejksnjymywu4TsgneWo7TalxfobsynqGLsvO94yt%2BhV"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "d08cc790-b330-4c71-ab37-40842bec250f",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z7u8h5edqo3mck",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "160fbf48-cb3d-4484-b532-3501e70646d8",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "257"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 20:15:10 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              112,
              69,
              99,
              109,
              104,
              55,
              106,
              76,
              56,
              116,
              118,
              81,
              56,
              121,
              77,
              75,
              108,
              105,
              102,
              109,
              112,
              51,
              99,
              114,
              82,
              98,
              82,
              84,
              83,
              109,
              89,
              72,
              118,
              110,
              51,
              119,
              101,
              109,
              112,
              57,
              115,
              37,
              50,
              70,
              80,
              106,
              103,
              118,
              97,
              78,
              89,
              119,
              88,
              86,
              88,
              114,
              57,
              98,
              107,
              75,
              117,
              77,
              53,
              68,
              116,
              117,
              110,
              88,
              68,
              55,
              50,
              37,
              50,
              66,
              102,
              115,
              120,
              55,
              79,
              106,
              50,
              79,
              74,
              83,
              97,
              65,
              97,
              105,
              100,
              66,
              79,
              50,
              79,
              85,
              89,
              66,
              86,
              76,
              83,
              71,
              75,
              103,
              66,
              73,
              71,
              73,
              53,
              69,
              115,
              79,
              83,
              82,
              87,
              55,
              122,
              69,
              102,
              115,
              74,
              37,
              50,
              70,
              53,
              115,
              119,
              48,
              100,
              89,
              76,
              106,
              112,
              120,
              48,
              73,
              97,
              77,
              85,
              48,
              83,
              88,
              66,
              122,
              121,
              85,
              109,
              73,
              37,
              50,
              66,
              65,
              89,
              76,
              100,
              71,
              72,
              116,
              78,
              98,
              113,
              107,
              89,
              85,
              68,
              54,
              104,
              116,
              88,
              112,
              81,
              70,
              70,
              112,
              111,
              37,
              50,
              66,
              77,
              70,
              71,
              52,
              77,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1316,
          "responseSize": 257
        },
        "id": "5ad2313f-c794-4b45-85be-0d1ef5b80246",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "b458efd6-757b-42b5-a5d6-9f9c8e63c18c",
          "length": 21,
          "cycles": 1,
          "position": 7,
          "iteration": 0,
          "httpRequestId": "8f84b1ab-bc2b-4d95-acda-98b157bef518"
        },
        "item": {
          "id": "68db683d-d27f-4621-904b-198c1f1e93f9",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "f5da1896-eb36-4955-a1d0-cf188991f1b4",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC2507311547242F2CD0'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "44ab325b-c25a-4157-887e-5b0ecb4ba2bb"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "e354cada-9e39-4a53-8aab-02f27489c6aa",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0100\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                  "  // 현재 시간 선언\r",
                  "  const now = new Date();\r",
                  "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                  "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                  "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                  "  const t = parsed.TRANTIME;\r",
                  "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                  "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                  "\r",
                  "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                  "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"451842******5446\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"신한카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%BD%C5%C7%D1%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "a1fcdcf6-708a-4690-9b3a-17460be8f675"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzcfXTTxRRh%2BjuC1%2BxTb3aJM2weIs3zf7UG56%2FZflpkMYeg%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "5e6ee0a6-3f42-4960-ba81-52cf46587105",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z7u8h5edqo3mck",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "2aafed09-22e3-4f12-bb84-bf7859a7197d",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "441"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 20:15:11 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              70,
              68,
              83,
              99,
              115,
              89,
              118,
              103,
              52,
              89,
              99,
              121,
              83,
              76,
              37,
              50,
              66,
              53,
              78,
              76,
              86,
              78,
              116,
              103,
              97,
              106,
              73,
              108,
              119,
              105,
              83,
              103,
              73,
              89,
              99,
              82,
              80,
              37,
              50,
              66,
              90,
              51,
              53,
              81,
              53,
              57,
              49,
              100,
              120,
              87,
              50,
              121,
              108,
              85,
              54,
              77,
              110,
              105,
              56,
              115,
              119,
              100,
              87,
              49,
              122,
              66,
              74,
              107,
              117,
              84,
              74,
              78,
              111,
              70,
              87,
              108,
              81,
              81,
              87,
              108,
              117,
              51,
              109,
              122,
              56,
              52,
              48,
              78,
              119,
              78,
              113,
              107,
              103,
              57,
              113,
              55,
              99,
              103,
              74,
              87,
              82,
              86,
              122,
              88,
              109,
              99,
              118,
              74,
              80,
              116,
              86,
              118,
              82,
              114,
              99,
              56,
              69,
              53,
              71,
              100,
              99,
              106,
              52,
              105,
              37,
              50,
              66,
              56,
              70,
              116,
              107,
              122,
              67,
              120,
              72,
              107,
              68,
              37,
              50,
              66,
              76,
              110,
              113,
              85,
              76,
              120,
              106,
              76,
              86,
              111,
              102,
              88,
              75,
              116,
              37,
              50,
              66,
              73,
              81,
              114,
              57,
              87,
              101,
              80,
              108,
              106,
              84,
              100,
              37,
              50,
              66,
              74,
              85,
              112,
              50,
              75,
              114,
              76,
              113,
              57,
              107,
              73,
              112,
              72,
              121,
              69,
              106,
              50,
              68,
              53,
              68,
              81,
              117,
              110,
              66,
              71,
              78,
              50,
              77,
              115,
              74,
              120,
              82,
              54,
              74,
              53,
              37,
              50,
              66,
              54,
              52,
              75,
              107,
              78,
              69,
              53,
              116,
              82,
              54,
              114,
              115,
              115,
              68,
              117,
              109,
              118,
              98,
              113,
              107,
              103,
              88,
              115,
              54,
              102,
              66,
              109,
              77,
              51,
              105,
              53,
              87,
              115,
              81,
              118,
              81,
              108,
              120,
              54,
              54,
              75,
              54,
              37,
              50,
              66,
              110,
              71,
              102,
              67,
              66,
              97,
              53,
              54,
              105,
              102,
              117,
              111,
              114,
              89,
              79,
              86,
              102,
              88,
              55,
              77,
              55,
              75,
              84,
              110,
              50,
              37,
              50,
              66,
              90,
              117,
              52,
              53,
              88,
              37,
              50,
              66,
              49,
              97,
              50,
              97,
              69,
              56,
              119,
              86,
              55,
              105,
              78,
              120,
              100,
              56,
              89,
              73,
              105,
              110,
              79,
              100,
              51,
              103,
              72,
              75,
              107,
              121,
              122,
              72,
              72,
              56,
              37,
              50,
              66,
              72,
              65,
              102,
              106,
              54,
              66,
              70,
              48,
              75,
              56,
              71,
              81,
              53,
              83,
              102,
              110,
              104,
              85,
              51,
              56,
              72,
              122,
              101,
              52,
              55,
              74,
              76,
              97,
              101,
              74,
              117,
              90,
              119,
              113,
              78,
              117,
              97,
              120,
              97,
              76,
              65,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1404,
          "responseSize": 441
        },
        "id": "68db683d-d27f-4621-904b-198c1f1e93f9",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) ±5초 이내 검증",
            "skipped": false
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "b2fc3cf3-2a35-4c2b-bec4-9e9442846975",
          "length": 21,
          "cycles": 1,
          "position": 8,
          "iteration": 0,
          "httpRequestId": "479b9d73-0527-4327-bec6-8459a3edbb04"
        },
        "item": {
          "id": "7b32f830-5477-463f-b11d-8317d04bc436",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "ce0d2df3-f23b-4eb7-ba30-64a4ed7de815",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "8e0f4e44-7fc6-4208-becc-8b69fa03a0ed"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "8907160c-1f89-4ce5-8f81-8e5a3ca65431",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "f6cfbe8b-1704-49a9-9a44-b05044fdce0b"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDUZfVaj2%2Ff6Yq68kIIFeThDaQIGq%2BdBYBQweSrR04Y8tZeNQlhVGEpep%2B1dRJqqqDEHYbJHKBOhOdSbO5jPm3LVyLwxFuxdruitaQnrskQuF"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "ac02b1e3-e28d-4440-bf31-6fae1a669725",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z7u8h5edqo3mck",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "ac3b5215-52c2-4475-bb58-a641e039112d",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "261"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 20:15:14 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              112,
              69,
              99,
              109,
              104,
              55,
              106,
              76,
              56,
              116,
              118,
              81,
              56,
              121,
              77,
              75,
              108,
              105,
              102,
              109,
              112,
              121,
              115,
              83,
              119,
              56,
              48,
              85,
              89,
              86,
              118,
              56,
              87,
              99,
              106,
              74,
              90,
              80,
              113,
              87,
              112,
              88,
              113,
              54,
              97,
              119,
              88,
              83,
              71,
              118,
              74,
              86,
              76,
              111,
              84,
              68,
              50,
              50,
              77,
              103,
              72,
              50,
              106,
              116,
              111,
              97,
              65,
              75,
              108,
              74,
              109,
              114,
              76,
              73,
              37,
              50,
              66,
              114,
              76,
              117,
              73,
              83,
              66,
              108,
              103,
              97,
              115,
              66,
              106,
              85,
              68,
              69,
              117,
              37,
              50,
              66,
              111,
              114,
              73,
              73,
              51,
              78,
              81,
              50,
              90,
              85,
              51,
              78,
              120,
              122,
              37,
              50,
              70,
              70,
              56,
              66,
              71,
              113,
              116,
              70,
              109,
              50,
              116,
              86,
              107,
              99,
              121,
              69,
              99,
              102,
              78,
              104,
              76,
              85,
              112,
              51,
              71,
              37,
              50,
              66,
              109,
              100,
              103,
              48,
              122,
              113,
              109,
              67,
              108,
              100,
              79,
              84,
              102,
              53,
              121,
              88,
              53,
              37,
              50,
              66,
              37,
              50,
              70,
              71,
              115,
              52,
              83,
              65,
              98,
              112,
              76,
              55,
              109,
              66,
              88,
              73,
              73,
              107,
              103,
              87,
              37,
              50,
              66,
              114,
              56,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1361,
          "responseSize": 261
        },
        "id": "7b32f830-5477-463f-b11d-8317d04bc436",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "f78f70c0-c2a6-406f-a4f9-2a701d2040bb",
          "length": 21,
          "cycles": 1,
          "position": 9,
          "iteration": 0,
          "httpRequestId": "42f3b21c-de9c-4eff-9476-545b7bf019bc"
        },
        "item": {
          "id": "0a636491-3670-4ba0-96a0-10352d1dcf13",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "00b7a4c2-cc58-4923-a3cd-da83440b5e43",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC2512151528144A426D'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "a746c610-8560-422d-97bb-17ef30ab0fdc"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "193c4a9f-fce8-4fff-a12e-73dbc1a4d9ae",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0800\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                  "  // 현재 시간 선언\r",
                  "  const now = new Date();\r",
                  "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                  "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                  "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                  "  const t = parsed.TRANTIME;\r",
                  "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                  "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                  "\r",
                  "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                  "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"542586******3820\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "// \"NH농협카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"NH%B3%F3%C7%F9%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "8c543704-493f-411b-a3ca-e7a0abc24b1d"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzcfqMk1YAIjfTKOzEfoXN7bENBxmDICbQksXQP2fAKPCnw%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "de770aba-a7cf-406a-b52a-d9c35ce70655",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z7u8h5edqo3mck",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "1d316511-c1d7-42e0-a7a7-184f12a4099a",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "451"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 20:15:16 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              99,
              76,
              50,
              56,
              105,
              65,
              113,
              66,
              53,
              66,
              111,
              70,
              106,
              117,
              107,
              121,
              103,
              65,
              54,
              55,
              109,
              85,
              67,
              50,
              70,
              48,
              53,
              68,
              66,
              80,
              70,
              70,
              68,
              122,
              82,
              81,
              118,
              69,
              37,
              50,
              70,
              84,
              113,
              106,
              57,
              73,
              107,
              54,
              74,
              120,
              66,
              98,
              83,
              108,
              48,
              101,
              122,
              119,
              101,
              37,
              50,
              66,
              48,
              49,
              117,
              98,
              49,
              107,
              37,
              50,
              70,
              104,
              67,
              100,
              86,
              103,
              82,
              65,
              103,
              69,
              37,
              50,
              66,
              50,
              115,
              56,
              37,
              50,
              70,
              111,
              37,
              50,
              70,
              68,
              66,
              111,
              100,
              103,
              73,
              69,
              97,
              74,
              121,
              101,
              108,
              87,
              87,
              84,
              52,
              37,
              50,
              66,
              116,
              113,
              114,
              72,
              80,
              97,
              37,
              50,
              66,
              75,
              52,
              48,
              73,
              72,
              98,
              108,
              79,
              67,
              85,
              81,
              90,
              115,
              77,
              78,
              74,
              37,
              50,
              70,
              55,
              75,
              85,
              55,
              121,
              68,
              79,
              106,
              100,
              116,
              89,
              114,
              66,
              118,
              122,
              73,
              98,
              79,
              82,
              85,
              106,
              113,
              106,
              77,
              67,
              97,
              115,
              111,
              37,
              50,
              66,
              117,
              68,
              122,
              70,
              121,
              113,
              55,
              55,
              85,
              75,
              102,
              100,
              56,
              86,
              108,
              99,
              105,
              107,
              54,
              53,
              48,
              53,
              50,
              98,
              115,
              121,
              98,
              82,
              121,
              88,
              68,
              83,
              86,
              110,
              56,
              88,
              51,
              72,
              102,
              111,
              108,
              67,
              52,
              105,
              69,
              80,
              115,
              111,
              85,
              116,
              112,
              70,
              107,
              74,
              106,
              115,
              49,
              108,
              115,
              76,
              110,
              37,
              50,
              70,
              103,
              112,
              57,
              71,
              79,
              49,
              52,
              108,
              115,
              37,
              50,
              66,
              107,
              90,
              121,
              118,
              81,
              70,
              73,
              37,
              50,
              66,
              115,
              72,
              74,
              104,
              106,
              68,
              115,
              110,
              72,
              104,
              37,
              50,
              70,
              87,
              81,
              113,
              69,
              120,
              114,
              113,
              99,
              102,
              75,
              70,
              100,
              99,
              122,
              110,
              88,
              89,
              66,
              121,
              87,
              98,
              78,
              54,
              120,
              112,
              100,
              102,
              90,
              104,
              37,
              50,
              66,
              74,
              66,
              98,
              111,
              106,
              114,
              65,
              57,
              120,
              56,
              51,
              118,
              83,
              119,
              73,
              120,
              103,
              86,
              57,
              69,
              53,
              83,
              80,
              56,
              89,
              76,
              65,
              71,
              121,
              48,
              65,
              117,
              107,
              89,
              48,
              104,
              85,
              73,
              86,
              75,
              87,
              66,
              115,
              75,
              82,
              104,
              75,
              107,
              79,
              90,
              101,
              71,
              37,
              50,
              66,
              67,
              82,
              75,
              110,
              110,
              114,
              54,
              78,
              73,
              98,
              68,
              53,
              65,
              106,
              68,
              56,
              103,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 2026,
          "responseSize": 451
        },
        "id": "0a636491-3670-4ba0-96a0-10352d1dcf13",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) ±5초 이내 검증",
            "skipped": false
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "6087ce7f-6918-40f9-a036-479cf524dc73",
          "length": 21,
          "cycles": 1,
          "position": 10,
          "iteration": 0,
          "httpRequestId": "e5d42314-18f2-49ea-9f6e-eff2a3995794"
        },
        "item": {
          "id": "9b93bf3a-5b37-4ec7-bbd0-3528dc73a73e",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "64dede67-e91e-4813-93c6-17af739b19a3",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "05ddd56c-24dd-4323-a489-86d688405f8a"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "77a075e8-21bc-4434-bc91-336f89e869e5",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "de3922fe-4613-454f-8853-7437c07b941e"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDVUEhoBVjOPwvlOAeJUT%2BTPt%2F8FTlQtfNB7RPB9AdlFITwmNeZ7n8un21TMZaXAVKqNTFCFn6IqlfZhdXgLx2y6EqTzO0HwwjUerOmAFWDjN"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "bb6cf442-21ef-47e6-aed2-355ed4be05cc",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z7u8h5edqo3mck",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "a34038c5-1473-4267-a11d-ccc4ce7dbc83",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "249"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 20:15:18 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              112,
              69,
              99,
              109,
              104,
              55,
              106,
              76,
              56,
              116,
              118,
              81,
              56,
              121,
              77,
              75,
              108,
              105,
              102,
              109,
              112,
              122,
              71,
              83,
              85,
              97,
              57,
              111,
              83,
              103,
              69,
              52,
              82,
              65,
              97,
              53,
              53,
              49,
              75,
              112,
              99,
              106,
              82,
              90,
              70,
              112,
              57,
              121,
              105,
              54,
              120,
              106,
              112,
              72,
              78,
              50,
              74,
              113,
              72,
              90,
              107,
              100,
              66,
              77,
              82,
              84,
              119,
              48,
              115,
              69,
              56,
              50,
              86,
              73,
              117,
              79,
              66,
              118,
              73,
              112,
              79,
              102,
              50,
              117,
              101,
              83,
              74,
              115,
              53,
              116,
              112,
              116,
              74,
              65,
              76,
              87,
              78,
              115,
              72,
              77,
              106,
              118,
              84,
              108,
              51,
              105,
              110,
              122,
              51,
              71,
              112,
              57,
              69,
              51,
              70,
              54,
              104,
              115,
              79,
              100,
              85,
              71,
              53,
              100,
              97,
              54,
              69,
              83,
              112,
              65,
              120,
              109,
              68,
              48,
              86,
              68,
              50,
              74,
              88,
              114,
              104,
              51,
              118,
              49,
              37,
              50,
              70,
              75,
              85,
              80,
              52,
              84,
              51,
              68,
              49,
              49,
              101,
              114,
              114,
              71,
              49,
              50,
              57,
              50,
              88,
              66,
              65,
              102,
              49,
              100,
              112,
              85,
              115,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1522,
          "responseSize": 249
        },
        "id": "9b93bf3a-5b37-4ec7-bbd0-3528dc73a73e",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "5ccb40da-1f0a-4aa1-a083-0c05c523f8b2",
          "length": 21,
          "cycles": 1,
          "position": 11,
          "iteration": 0,
          "httpRequestId": "5e500492-f95c-4a32-a676-6d57fe634f80"
        },
        "item": {
          "id": "1f575ba0-a62e-4c43-b4bd-2fefc1fc9929",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "c8bfb7ff-a7ae-4bc3-a286-2635c526fb53",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC250804165745DBD04E'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "0c74b3e1-c9d6-46bb-b6a1-8d3f1516999d"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "c2dbb9de-ca8f-4708-93c8-88077716e798",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0300\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                  "  // 현재 시간 선언\r",
                  "  const now = new Date();\r",
                  "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                  "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                  "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                  "  const t = parsed.TRANTIME;\r",
                  "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                  "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                  "\r",
                  "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                  "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"540926******6041\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"국민카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"KB%B1%B9%B9%CE%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "b445b34b-4df0-4fb9-9d2a-263f76ae5126"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzccTXfPyWymzriWFq4iqdmp99Wj2bHxTvGvcdoWGjKzABQ%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "5e3ad09d-8031-4919-af9c-a046b08c37d9",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z7u8h5edqo3mck",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "4a59fb7b-707f-4a1f-9430-1538fbbd7e9c",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "447"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 20:15:19 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              109,
              37,
              50,
              66,
              54,
              71,
              66,
              89,
              57,
              107,
              74,
              81,
              114,
              116,
              99,
              83,
              88,
              121,
              89,
              70,
              120,
              69,
              57,
              101,
              122,
              67,
              73,
              71,
              78,
              109,
              49,
              55,
              108,
              119,
              119,
              48,
              48,
              122,
              78,
              50,
              77,
              79,
              110,
              112,
              53,
              50,
              56,
              68,
              121,
              50,
              51,
              68,
              119,
              87,
              101,
              108,
              109,
              116,
              83,
              114,
              90,
              85,
              87,
              37,
              50,
              70,
              85,
              56,
              106,
              37,
              50,
              66,
              37,
              50,
              66,
              116,
              66,
              70,
              82,
              109,
              51,
              111,
              50,
              72,
              87,
              77,
              89,
              50,
              50,
              70,
              106,
              73,
              118,
              85,
              114,
              112,
              118,
              77,
              114,
              102,
              76,
              107,
              87,
              78,
              49,
              56,
              104,
              77,
              100,
              52,
              75,
              78,
              108,
              71,
              84,
              107,
              67,
              85,
              114,
              117,
              37,
              50,
              70,
              120,
              65,
              103,
              105,
              85,
              112,
              83,
              114,
              53,
              72,
              37,
              50,
              66,
              54,
              106,
              111,
              99,
              51,
              70,
              100,
              57,
              100,
              85,
              115,
              54,
              84,
              103,
              50,
              120,
              82,
              75,
              53,
              97,
              73,
              57,
              82,
              53,
              68,
              69,
              103,
              106,
              73,
              74,
              107,
              101,
              88,
              85,
              86,
              116,
              99,
              86,
              68,
              54,
              88,
              81,
              105,
              110,
              89,
              112,
              97,
              51,
              102,
              74,
              73,
              84,
              51,
              77,
              89,
              83,
              119,
              97,
              51,
              107,
              37,
              50,
              66,
              86,
              51,
              37,
              50,
              70,
              68,
              72,
              110,
              117,
              86,
              67,
              88,
              113,
              109,
              37,
              50,
              66,
              106,
              122,
              106,
              100,
              71,
              37,
              50,
              66,
              110,
              114,
              114,
              56,
              73,
              106,
              50,
              56,
              100,
              81,
              88,
              78,
              85,
              98,
              98,
              80,
              103,
              117,
              82,
              53,
              90,
              72,
              52,
              48,
              69,
              102,
              79,
              118,
              108,
              53,
              113,
              112,
              75,
              121,
              89,
              100,
              89,
              79,
              37,
              50,
              66,
              57,
              117,
              117,
              99,
              108,
              77,
              66,
              117,
              68,
              89,
              107,
              101,
              76,
              53,
              57,
              122,
              65,
              114,
              105,
              83,
              50,
              79,
              109,
              109,
              50,
              70,
              109,
              120,
              113,
              74,
              57,
              81,
              48,
              88,
              99,
              81,
              86,
              81,
              113,
              107,
              104,
              104,
              68,
              56,
              113,
              97,
              101,
              89,
              53,
              114,
              118,
              80,
              56,
              37,
              50,
              66,
              75,
              106,
              73,
              71,
              49,
              50,
              117,
              67,
              90,
              105,
              75,
              85,
              37,
              50,
              66,
              71,
              70,
              102,
              71,
              86,
              55,
              51,
              107,
              50,
              107,
              105,
              76,
              71,
              88,
              74,
              74,
              89,
              112,
              67,
              121,
              113,
              112,
              37,
              50,
              66,
              81,
              54,
              77,
              80,
              100,
              65,
              105,
              105,
              119,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1351,
          "responseSize": 447
        },
        "id": "1f575ba0-a62e-4c43-b4bd-2fefc1fc9929",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) ±5초 이내 검증",
            "skipped": false
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "보증금 금액(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "f8ce36b9-83db-47db-b952-f1253c90f8d4",
          "length": 21,
          "cycles": 1,
          "position": 12,
          "iteration": 0,
          "httpRequestId": "6cc2abde-acf9-4043-8988-bde9b70cd695"
        },
        "item": {
          "id": "831747a3-4cd1-4bd1-9b85-4e234e3f5eef",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "1caf6c1d-bbdb-4c3b-b214-e41b5785b4da",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "7d3b5403-183f-40a8-93ec-4de629103347"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "e0769758-9e12-4bc3-8a50-7f398da87673",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "d11d179d-6d61-4600-a895-141e2ace49a9"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDWMl%2Fd2Msc3zRStKjqcC3hh3U5X9aE6q7cLcvjXSV1Oo4JYDuyrZUMssSUYSpx28CGmxhAEs8NRfemdcWfTbr2Nnq6a6N4HbhlA9U3tS12%2BA"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "4fd2749b-9fb2-46f1-adc6-426d9510ed0c",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z7u8h5edqo3mck",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "89a567ea-1d6e-486a-84d6-41d9a7fe0335",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "253"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 20:15:21 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              112,
              69,
              99,
              109,
              104,
              55,
              106,
              76,
              56,
              116,
              118,
              81,
              56,
              121,
              77,
              75,
              108,
              105,
              102,
              109,
              112,
              50,
              49,
              120,
              110,
              53,
              101,
              82,
              122,
              70,
              76,
              103,
              116,
              98,
              69,
              106,
              85,
              77,
              75,
              114,
              54,
              88,
              97,
              48,
              97,
              75,
              87,
              114,
              110,
              100,
              82,
              49,
              79,
              52,
              116,
              115,
              69,
              101,
              73,
              109,
              48,
              66,
              102,
              48,
              87,
              103,
              115,
              78,
              82,
              53,
              114,
              100,
              113,
              117,
              70,
              70,
              57,
              86,
              114,
              117,
              75,
              53,
              65,
              108,
              108,
              37,
              50,
              66,
              114,
              120,
              37,
              50,
              66,
              86,
              116,
              52,
              53,
              65,
              80,
              98,
              75,
              104,
              86,
              73,
              111,
              37,
              50,
              66,
              48,
              119,
              49,
              98,
              101,
              111,
              121,
              54,
              101,
              74,
              72,
              119,
              53,
              115,
              52,
              66,
              86,
              56,
              76,
              87,
              88,
              56,
              78,
              69,
              111,
              99,
              51,
              122,
              71,
              69,
              87,
              55,
              90,
              65,
              71,
              121,
              84,
              79,
              73,
              106,
              87,
              65,
              69,
              117,
              50,
              70,
              89,
              110,
              121,
              84,
              88,
              52,
              105,
              72,
              50,
              82,
              87,
              119,
              52,
              54,
              85,
              79,
              122,
              114,
              55,
              120,
              76,
              114,
              65,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1646,
          "responseSize": 253
        },
        "id": "831747a3-4cd1-4bd1-9b85-4e234e3f5eef",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "186f54fa-5228-43d6-be83-8b03142eea05",
          "length": 21,
          "cycles": 1,
          "position": 13,
          "iteration": 0,
          "httpRequestId": "c14e36ba-959c-4da4-b91c-0a1afe796301"
        },
        "item": {
          "id": "a5c6c8fd-f09d-4977-bca5-8e2d92aa3e3b",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "db662385-9265-4bad-be51-93128400a98d",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC25080416595836B04B'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "c65c7325-6cdb-43b3-91a0-590079f9467e"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "3fdd1810-5b6d-436a-b299-91a43bde9bf8",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0202\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                  "  // 현재 시간 선언\r",
                  "  const now = new Date();\r",
                  "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                  "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                  "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                  "  const t = parsed.TRANTIME;\r",
                  "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                  "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                  "\r",
                  "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                  "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"538920******1226\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"삼성카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%BF%EC%B8%AEBC%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "beba7939-88f3-41c3-8eec-dc21f6a80a9a"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzccVRR%2FtepSx6ESumfhyCleVEPVKGpunFtzDUwUlJoNVsg%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "dcdc492f-0c48-4513-8233-ca842fb87cdb",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z7u8h5edqo3mck",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "a89637a4-d07e-4c10-9f82-a6bf03401f46",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "443"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 20:15:23 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              78,
              114,
              70,
              88,
              55,
              77,
              67,
              119,
              78,
              65,
              115,
              52,
              121,
              105,
              104,
              76,
              107,
              51,
              90,
              57,
              118,
              50,
              49,
              37,
              50,
              66,
              121,
              98,
              68,
              99,
              88,
              122,
              119,
              120,
              80,
              105,
              55,
              104,
              74,
              83,
              84,
              49,
              51,
              117,
              72,
              118,
              86,
              120,
              111,
              49,
              116,
              103,
              37,
              50,
              70,
              51,
              70,
              111,
              120,
              111,
              48,
              53,
              114,
              65,
              114,
              66,
              76,
              50,
              120,
              116,
              118,
              88,
              81,
              85,
              69,
              118,
              104,
              76,
              49,
              100,
              119,
              52,
              68,
              99,
              76,
              53,
              50,
              68,
              118,
              37,
              50,
              66,
              82,
              71,
              84,
              57,
              65,
              88,
              98,
              108,
              86,
              109,
              106,
              72,
              109,
              89,
              105,
              88,
              57,
              108,
              53,
              83,
              120,
              70,
              102,
              54,
              56,
              83,
              114,
              51,
              121,
              82,
              79,
              119,
              75,
              74,
              113,
              71,
              107,
              75,
              101,
              81,
              53,
              52,
              83,
              112,
              52,
              73,
              56,
              106,
              71,
              37,
              50,
              70,
              82,
              48,
              118,
              84,
              115,
              121,
              121,
              87,
              113,
              121,
              76,
              67,
              72,
              102,
              77,
              52,
              118,
              85,
              72,
              121,
              109,
              117,
              79,
              112,
              99,
              87,
              105,
              116,
              37,
              50,
              66,
              65,
              49,
              57,
              112,
              68,
              98,
              118,
              87,
              111,
              104,
              115,
              77,
              110,
              108,
              49,
              78,
              81,
              55,
              50,
              69,
              75,
              85,
              48,
              74,
              78,
              101,
              103,
              117,
              99,
              66,
              118,
              57,
              37,
              50,
              70,
              83,
              50,
              105,
              120,
              68,
              117,
              68,
              86,
              85,
              117,
              103,
              110,
              101,
              73,
              108,
              101,
              77,
              73,
              110,
              107,
              97,
              122,
              89,
              37,
              50,
              70,
              86,
              37,
              50,
              70,
              67,
              54,
              80,
              99,
              49,
              84,
              104,
              102,
              37,
              50,
              70,
              50,
              97,
              109,
              101,
              121,
              37,
              50,
              66,
              75,
              74,
              121,
              112,
              88,
              111,
              51,
              52,
              87,
              82,
              100,
              82,
              75,
              53,
              37,
              50,
              66,
              118,
              65,
              52,
              65,
              72,
              74,
              71,
              71,
              104,
              111,
              81,
              98,
              79,
              108,
              106,
              51,
              84,
              55,
              88,
              111,
              66,
              100,
              114,
              113,
              49,
              55,
              114,
              99,
              99,
              66,
              67,
              37,
              50,
              70,
              84,
              85,
              76,
              48,
              49,
              110,
              82,
              53,
              88,
              83,
              86,
              52,
              112,
              85,
              112,
              71,
              105,
              53,
              85,
              78,
              66,
              106,
              86,
              57,
              98,
              82,
              51,
              108,
              102,
              66,
              101,
              121,
              113,
              53,
              49,
              90,
              66,
              48,
              89,
              66,
              88,
              99,
              88,
              73,
              80,
              89,
              66,
              111,
              75,
              110,
              66,
              73,
              99,
              75,
              121,
              103,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1872,
          "responseSize": 443
        },
        "id": "a5c6c8fd-f09d-4977-bca5-8e2d92aa3e3b",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) ±5초 이내 검증",
            "skipped": false
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "보증금 금액(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "6a1d05f1-3259-45d7-87e3-6ebe0faf02c8",
          "length": 21,
          "cycles": 1,
          "position": 14,
          "iteration": 0,
          "httpRequestId": "171fe0c8-91e0-4182-aa62-5d88b81c69e8"
        },
        "item": {
          "id": "c80e879d-e817-4fe0-8eb5-15521158c878",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "8c6a4406-7045-4734-a4bf-ec09f0bab72d",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "6f636a7f-8552-4681-9c1b-75b4e5236d8d"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "f5efacdc-0ad8-4f85-85a0-8bdeae353a1a",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "f681bf6a-0c22-4da7-8d6d-0bafbb9af295"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDfwI0lZtAmMbeKxaKeLrLQV%2BbFPf91bEliOQw7NGwZQUdd0P%2BwfOvK5NbQ0Ty%2BZr98o9ycP7wUMaC8azu5JKbrmLmGav79MNf58plaKlWtP5"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "76d9eaaf-16e2-4925-b9cc-bd1379dd418b",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z7u8h5edqo3mck",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "58a6ef93-ff9d-40ee-96ff-f77ade27e769",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "249"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 20:15:24 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              112,
              69,
              99,
              109,
              104,
              55,
              106,
              76,
              56,
              116,
              118,
              81,
              56,
              121,
              77,
              75,
              108,
              105,
              102,
              109,
              112,
              122,
              90,
              50,
              76,
              101,
              100,
              77,
              104,
              97,
              84,
              122,
              118,
              53,
              120,
              49,
              103,
              104,
              81,
              88,
              106,
              100,
              48,
              80,
              84,
              120,
              52,
              55,
              82,
              102,
              71,
              71,
              102,
              65,
              87,
              113,
              57,
              70,
              37,
              50,
              66,
              122,
              97,
              112,
              55,
              108,
              115,
              81,
              78,
              119,
              75,
              71,
              122,
              67,
              56,
              105,
              107,
              118,
              103,
              122,
              79,
              77,
              77,
              121,
              80,
              83,
              89,
              72,
              83,
              107,
              110,
              119,
              86,
              53,
              76,
              78,
              106,
              55,
              86,
              89,
              116,
              112,
              106,
              81,
              121,
              90,
              53,
              121,
              72,
              100,
              122,
              78,
              82,
              67,
              85,
              69,
              101,
              87,
              83,
              69,
              70,
              79,
              113,
              74,
              52,
              121,
              121,
              99,
              81,
              120,
              85,
              69,
              74,
              82,
              116,
              90,
              99,
              78,
              105,
              119,
              106,
              76,
              52,
              89,
              76,
              74,
              111,
              98,
              52,
              57,
              54,
              87,
              81,
              84,
              98,
              105,
              53,
              108,
              87,
              103,
              86,
              114,
              65,
              75,
              110,
              114,
              70,
              75,
              99,
              49,
              66,
              51,
              48,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1368,
          "responseSize": 249
        },
        "id": "c80e879d-e817-4fe0-8eb5-15521158c878",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "49b94e54-6369-43f0-b143-91f062ec0e23",
          "length": 21,
          "cycles": 1,
          "position": 15,
          "iteration": 0,
          "httpRequestId": "e7b48001-f768-4949-96b7-66978f56d83f"
        },
        "item": {
          "id": "3cd336ba-4813-41cb-8843-3adfe31de3ea",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "e3ac81e7-6e72-4c9f-b10f-3a45ece5dfaf",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC251215145003CEDD72'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "8bb55a04-2c72-4009-9353-5488d7e3dedc"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "e57e12ee-68e7-45d5-a455-84403bc27e3d",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0907\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                  "  // 현재 시간 선언\r",
                  "  const now = new Date();\r",
                  "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                  "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                  "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                  "  const t = parsed.TRANTIME;\r",
                  "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                  "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                  "\r",
                  "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                  "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"624404******8380\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"롯데카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%BF%EC%B8%AE%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "7f55f613-210e-47eb-801d-f640eff5730c"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzcextrJriQhf%2FIUYtULhB8bH62Qdp0SGru%2BMd63vyNOLHA%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "bf4102c1-4ef4-4e6c-9dbd-bd76dba58c15",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z7u8h5edqo3mck",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "6ee08778-3d5d-4c6c-8ac3-46aa5a69cf7f",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "445"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 20:15:26 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              67,
              69,
              86,
              56,
              88,
              48,
              116,
              51,
              118,
              77,
              102,
              108,
              57,
              65,
              84,
              99,
              48,
              69,
              103,
              77,
              86,
              103,
              115,
              37,
              50,
              66,
              83,
              101,
              50,
              37,
              50,
              66,
              77,
              83,
              68,
              103,
              54,
              37,
              50,
              70,
              71,
              37,
              50,
              70,
              104,
              97,
              117,
              48,
              73,
              72,
              67,
              81,
              56,
              86,
              97,
              55,
              79,
              112,
              69,
              50,
              102,
              72,
              121,
              79,
              37,
              50,
              70,
              108,
              50,
              105,
              112,
              108,
              78,
              90,
              87,
              85,
              69,
              97,
              37,
              50,
              66,
              101,
              113,
              48,
              57,
              52,
              89,
              103,
              71,
              107,
              104,
              90,
              70,
              69,
              79,
              37,
              50,
              70,
              113,
              90,
              108,
              50,
              103,
              78,
              51,
              122,
              74,
              87,
              87,
              80,
              106,
              53,
              101,
              90,
              113,
              81,
              120,
              99,
              98,
              53,
              83,
              102,
              68,
              103,
              48,
              55,
              122,
              116,
              87,
              67,
              66,
              109,
              56,
              77,
              101,
              83,
              121,
              107,
              70,
              54,
              98,
              109,
              75,
              98,
              103,
              99,
              85,
              75,
              109,
              103,
              80,
              55,
              68,
              106,
              79,
              55,
              51,
              115,
              111,
              48,
              101,
              48,
              81,
              37,
              50,
              70,
              107,
              105,
              74,
              103,
              70,
              102,
              51,
              37,
              50,
              66,
              82,
              52,
              118,
              107,
              77,
              49,
              99,
              112,
              88,
              55,
              85,
              87,
              103,
              57,
              53,
              121,
              76,
              82,
              71,
              52,
              65,
              80,
              65,
              75,
              52,
              71,
              50,
              76,
              56,
              109,
              90,
              76,
              105,
              57,
              108,
              88,
              109,
              102,
              111,
              54,
              86,
              117,
              117,
              52,
              111,
              114,
              80,
              117,
              98,
              102,
              67,
              69,
              66,
              81,
              105,
              74,
              80,
              66,
              73,
              115,
              37,
              50,
              70,
              66,
              107,
              117,
              78,
              90,
              80,
              72,
              86,
              113,
              84,
              90,
              84,
              107,
              113,
              55,
              101,
              83,
              112,
              69,
              70,
              56,
              53,
              70,
              66,
              76,
              122,
              114,
              99,
              116,
              72,
              88,
              66,
              88,
              72,
              73,
              107,
              53,
              66,
              121,
              83,
              122,
              52,
              108,
              111,
              84,
              79,
              69,
              54,
              116,
              103,
              49,
              37,
              50,
              66,
              68,
              87,
              111,
              65,
              105,
              122,
              65,
              118,
              75,
              110,
              121,
              85,
              112,
              76,
              67,
              55,
              105,
              115,
              117,
              54,
              88,
              104,
              37,
              50,
              66,
              105,
              107,
              98,
              53,
              82,
              52,
              112,
              71,
              72,
              70,
              103,
              86,
              52,
              51,
              51,
              56,
              114,
              85,
              117,
              121,
              83,
              110,
              97,
              116,
              78,
              37,
              50,
              70,
              101,
              49,
              118,
              72,
              116,
              118,
              87,
              103,
              68,
              107,
              114,
              73,
              69,
              84,
              83,
              48,
              53,
              117,
              80,
              111,
              104,
              119,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1314,
          "responseSize": 445
        },
        "id": "3cd336ba-4813-41cb-8843-3adfe31de3ea",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) ±5초 이내 검증",
            "skipped": false
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "보증금 금액(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "1bd93a39-e764-4952-b39f-600d42f30a85",
          "length": 21,
          "cycles": 1,
          "position": 16,
          "iteration": 0,
          "httpRequestId": "3d934a75-6b13-483d-92ab-fda45e81669e"
        },
        "item": {
          "id": "fc368cbd-3089-4f8e-8088-820d8713c2be",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "228dc6c9-0789-4730-b451-75aa06c1ebbd",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "b9aeed1d-14d2-4482-b4ac-e7e2e12823a2"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "39bc42a7-e5ea-4c5e-b900-f46393b961db",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "679c785f-6781-4137-b091-1202beb8f845"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDcDd8bFqoz0aXzucJ8Q2QC0tqknmO3xyvSZmOFWOcy%2FFP3xUqGsPDsAyLAOkRA9h8kGTyIEwpEDsESJkhRyzFpJbSAWJt%2FcAuCQxgvdF%2Fr7O"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "71520d00-141e-40e5-b62a-e21130cf1e80",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z7u8h5edqo3mck",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "2a17213e-c407-4c55-b088-10025c28d182",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "259"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 20:15:27 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              112,
              69,
              99,
              109,
              104,
              55,
              106,
              76,
              56,
              116,
              118,
              81,
              56,
              121,
              77,
              75,
              108,
              105,
              102,
              109,
              112,
              55,
              65,
              73,
              100,
              82,
              70,
              85,
              50,
              90,
              50,
              113,
              98,
              56,
              88,
              107,
              80,
              110,
              99,
              51,
              122,
              76,
              105,
              87,
              108,
              65,
              75,
              57,
              114,
              90,
              97,
              81,
              119,
              117,
              121,
              72,
              81,
              120,
              75,
              69,
              50,
              56,
              119,
              121,
              102,
              78,
              102,
              113,
              80,
              101,
              68,
              86,
              57,
              117,
              68,
              84,
              53,
              49,
              81,
              98,
              66,
              119,
              112,
              37,
              50,
              66,
              104,
              109,
              56,
              101,
              76,
              76,
              70,
              57,
              119,
              76,
              69,
              103,
              114,
              87,
              118,
              89,
              85,
              37,
              50,
              66,
              111,
              101,
              87,
              114,
              87,
              102,
              55,
              106,
              89,
              104,
              71,
              85,
              68,
              49,
              115,
              118,
              117,
              82,
              74,
              37,
              50,
              66,
              66,
              103,
              117,
              67,
              37,
              50,
              70,
              107,
              48,
              74,
              37,
              50,
              66,
              86,
              119,
              70,
              48,
              55,
              68,
              86,
              55,
              80,
              114,
              85,
              100,
              103,
              75,
              100,
              56,
              54,
              37,
              50,
              66,
              84,
              83,
              101,
              88,
              57,
              112,
              68,
              122,
              102,
              80,
              48,
              71,
              113,
              49,
              110,
              106,
              121,
              82,
              121,
              71,
              81,
              81,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1324,
          "responseSize": 259
        },
        "id": "fc368cbd-3089-4f8e-8088-820d8713c2be",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "824205d5-bc02-4c84-bee8-d9fabd6a3ea5",
          "length": 21,
          "cycles": 1,
          "position": 17,
          "iteration": 0,
          "httpRequestId": "cec82627-e879-4933-ab52-c9828d938239"
        },
        "item": {
          "id": "820dcd5e-3bed-4c22-a8b6-abbe43602dfe",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "3d258805-0ea5-4219-b086-529ad507b087",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC25121515231344D775'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "da2343db-8fab-4a71-98f1-e91f3b513971"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "8a657cdb-3763-466b-9df4-735c7459df61",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0921\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                  "  // 현재 시간 선언\r",
                  "  const now = new Date();\r",
                  "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                  "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                  "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                  "  const t = parsed.TRANTIME;\r",
                  "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                  "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                  "\r",
                  "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                  "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"485462******0767\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"삼성카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%C4%C9%C0%CC%B9%F0%C5%A9%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "39000c39-bd37-4c09-9ea0-9f33199781a7"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzccQmxP3XnXAnB6A1V7j6yFer%2BQE%2Ba1pl7pMnq93f1iTpw%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "df32955f-1b7f-4e10-89d9-189055bba3c9",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z7u8h5edqo3mck",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "49b9c921-fdbe-4f65-b054-1a19fc61e879",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "435"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 20:15:29 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              105,
              110,
              68,
              107,
              89,
              110,
              57,
              105,
              111,
              74,
              115,
              68,
              56,
              111,
              102,
              101,
              113,
              105,
              120,
              97,
              90,
              104,
              97,
              102,
              103,
              86,
              122,
              82,
              84,
              70,
              80,
              37,
              50,
              70,
              103,
              67,
              67,
              70,
              120,
              86,
              83,
              37,
              50,
              70,
              109,
              71,
              97,
              106,
              102,
              81,
              98,
              85,
              50,
              84,
              101,
              55,
              57,
              76,
              106,
              54,
              116,
              48,
              87,
              118,
              57,
              90,
              112,
              103,
              109,
              53,
              115,
              86,
              109,
              57,
              122,
              108,
              68,
              117,
              74,
              122,
              85,
              68,
              57,
              56,
              52,
              54,
              112,
              76,
              119,
              111,
              97,
              98,
              67,
              72,
              79,
              107,
              53,
              87,
              113,
              90,
              80,
              105,
              115,
              75,
              86,
              84,
              80,
              109,
              105,
              82,
              107,
              71,
              89,
              104,
              84,
              66,
              77,
              105,
              37,
              50,
              70,
              69,
              37,
              50,
              70,
              106,
              104,
              102,
              104,
              120,
              108,
              79,
              114,
              118,
              74,
              52,
              108,
              75,
              71,
              107,
              48,
              81,
              122,
              84,
              49,
              55,
              53,
              48,
              88,
              111,
              105,
              112,
              78,
              53,
              48,
              76,
              107,
              69,
              90,
              66,
              121,
              82,
              83,
              108,
              101,
              118,
              77,
              120,
              68,
              71,
              89,
              107,
              113,
              53,
              120,
              85,
              54,
              75,
              50,
              110,
              109,
              106,
              49,
              120,
              105,
              112,
              118,
              112,
              74,
              80,
              37,
              50,
              66,
              117,
              121,
              80,
              77,
              88,
              68,
              76,
              52,
              49,
              79,
              97,
              81,
              73,
              74,
              102,
              48,
              98,
              76,
              121,
              115,
              116,
              68,
              72,
              116,
              82,
              50,
              82,
              37,
              50,
              66,
              68,
              106,
              116,
              122,
              105,
              78,
              75,
              80,
              119,
              52,
              109,
              107,
              76,
              107,
              68,
              100,
              101,
              107,
              66,
              66,
              102,
              74,
              76,
              110,
              48,
              90,
              116,
              117,
              82,
              84,
              106,
              89,
              112,
              73,
              85,
              49,
              97,
              55,
              104,
              104,
              52,
              103,
              80,
              98,
              74,
              106,
              70,
              49,
              69,
              49,
              78,
              53,
              106,
              113,
              99,
              116,
              117,
              85,
              67,
              77,
              54,
              68,
              83,
              69,
              72,
              110,
              106,
              119,
              37,
              50,
              66,
              68,
              84,
              56,
              68,
              103,
              118,
              102,
              122,
              113,
              104,
              51,
              106,
              110,
              104,
              79,
              114,
              73,
              113,
              53,
              111,
              75,
              122,
              77,
              73,
              119,
              110,
              72,
              104,
              103,
              104,
              69,
              101,
              68,
              109,
              97,
              116,
              49,
              69,
              54,
              119,
              98,
              73,
              99,
              100,
              98,
              76,
              97,
              68,
              103,
              79,
              90,
              74,
              49,
              56,
              81,
              87,
              119,
              37,
              50,
              66,
              109,
              55,
              101,
              119,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1629,
          "responseSize": 435
        },
        "id": "820dcd5e-3bed-4c22-a8b6-abbe43602dfe",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) ±5초 이내 검증",
            "skipped": false
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "보증금 금액(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "2fc9c0f5-a850-4619-877b-a98e300ad779",
          "length": 21,
          "cycles": 1,
          "position": 18,
          "iteration": 0,
          "httpRequestId": "645d6b35-2287-49e4-a33a-4d929bff97c7"
        },
        "item": {
          "id": "3e708f87-09fa-4448-b435-8503899740dd",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "e3859cc9-7925-40a8-b2d0-7bef6f620389",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "3304641a-de1f-4ff4-84fa-90cec5bcee00"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "6acc0f63-8c3e-4ecc-9058-5560c35c041b",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "df809c94-33b9-4bbf-9ff9-ed96226b32ce"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDQeQ7d9JeCRPgiQkPLFqqPbHiywRcBE6Wo%2FVc%2BIqcGn7W%2FugdD9bwa4nOf5hjdvPNdvI5NAnYtUfWw6UPGKjQFKRn2ZlrspzHbGhePlQNrdx"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "1034920a-fed3-4d74-9e62-62b6c4f9fafb",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z7u8h5edqo3mck",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "0db64a0d-0c53-4f12-b706-9c1a17202919",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "259"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 20:15:31 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              112,
              69,
              99,
              109,
              104,
              55,
              106,
              76,
              56,
              116,
              118,
              81,
              56,
              121,
              77,
              75,
              108,
              105,
              102,
              109,
              112,
              37,
              50,
              70,
              115,
              102,
              66,
              66,
              117,
              87,
              100,
              89,
              74,
              99,
              85,
              78,
              83,
              37,
              50,
              66,
              50,
              107,
              68,
              111,
              66,
              122,
              98,
              76,
              104,
              112,
              113,
              78,
              70,
              110,
              82,
              113,
              107,
              117,
              88,
              114,
              109,
              71,
              37,
              50,
              70,
              105,
              120,
              51,
              86,
              48,
              121,
              81,
              52,
              101,
              100,
              37,
              50,
              70,
              86,
              116,
              105,
              49,
              83,
              56,
              122,
              117,
              76,
              115,
              114,
              79,
              77,
              82,
              65,
              97,
              115,
              103,
              67,
              85,
              51,
              71,
              65,
              54,
              110,
              122,
              85,
              53,
              105,
              56,
              110,
              55,
              71,
              37,
              50,
              66,
              51,
              76,
              106,
              79,
              37,
              50,
              70,
              107,
              97,
              118,
              99,
              50,
              89,
              86,
              89,
              82,
              102,
              99,
              105,
              119,
              49,
              97,
              103,
              49,
              85,
              76,
              101,
              76,
              112,
              71,
              88,
              51,
              88,
              74,
              103,
              85,
              68,
              80,
              84,
              104,
              97,
              117,
              121,
              80,
              66,
              122,
              74,
              110,
              66,
              114,
              111,
              87,
              105,
              120,
              109,
              104,
              53,
              97,
              68,
              84,
              54,
              75,
              55,
              115,
              122,
              107,
              50,
              118,
              56,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1398,
          "responseSize": 259
        },
        "id": "3e708f87-09fa-4448-b435-8503899740dd",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "5e5c7af3-11f6-4f97-a45d-09c1411bbcbc",
          "length": 21,
          "cycles": 1,
          "position": 19,
          "iteration": 0,
          "httpRequestId": "5fd01611-24b0-49e1-8a2d-7979e1713359"
        },
        "item": {
          "id": "eaa8cf59-275e-477d-ab0e-e67c0125c902",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "2711826d-bc74-48fe-9fd1-6eee9264fa9e",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC2512151453119224E3'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "b635826f-fcdd-480a-ab5c-b613dd493149"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "e559c504-7453-4b9f-85ce-c49e77b87e00",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0700\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                  "  // 현재 시간 선언\r",
                  "  const now = new Date();\r",
                  "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                  "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                  "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                  "  const t = parsed.TRANTIME;\r",
                  "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                  "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                  "\r",
                  "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                  "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"513792******3380\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"롯데카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%B7%D4%B5%A5%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "bfdaa6d5-31b2-4342-a895-a5b49cdc15d3"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzcfDPdPuA9czR8Lb0T%2Ba0ODlNEPIdgayTwp7V1JVXixp1g%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "254ffd0e-5a1a-4c81-b75f-5bae3d10509b",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z7u8h5edqo3mck",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "cf809644-16d1-4812-99d7-6b1da34583fa",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "439"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 20:15:32 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              116,
              115,
              67,
              83,
              76,
              81,
              114,
              72,
              89,
              56,
              55,
              101,
              99,
              98,
              52,
              66,
              83,
              55,
              77,
              57,
              87,
              79,
              55,
              51,
              68,
              55,
              111,
              100,
              37,
              50,
              66,
              74,
              83,
              119,
              107,
              70,
              110,
              106,
              115,
              76,
              82,
              115,
              110,
              73,
              89,
              122,
              110,
              70,
              118,
              66,
              111,
              103,
              48,
              109,
              66,
              70,
              86,
              99,
              66,
              114,
              119,
              89,
              103,
              37,
              50,
              66,
              118,
              66,
              77,
              71,
              53,
              74,
              119,
              52,
              118,
              78,
              53,
              116,
              83,
              74,
              106,
              37,
              50,
              70,
              104,
              113,
              108,
              84,
              103,
              52,
              67,
              77,
              85,
              111,
              52,
              120,
              76,
              108,
              73,
              110,
              81,
              108,
              66,
              121,
              66,
              116,
              86,
              79,
              105,
              48,
              49,
              110,
              73,
              115,
              103,
              88,
              52,
              74,
              120,
              105,
              116,
              80,
              120,
              90,
              68,
              78,
              116,
              118,
              110,
              86,
              103,
              50,
              106,
              97,
              119,
              120,
              54,
              116,
              88,
              101,
              78,
              86,
              84,
              116,
              48,
              53,
              111,
              78,
              108,
              105,
              72,
              101,
              114,
              112,
              100,
              103,
              73,
              83,
              120,
              78,
              118,
              67,
              122,
              79,
              86,
              55,
              117,
              90,
              107,
              51,
              86,
              53,
              102,
              71,
              37,
              50,
              66,
              90,
              87,
              108,
              79,
              120,
              101,
              74,
              102,
              75,
              120,
              84,
              105,
              103,
              90,
              78,
              67,
              72,
              76,
              112,
              112,
              48,
              66,
              51,
              69,
              57,
              98,
              57,
              75,
              114,
              119,
              49,
              115,
              37,
              50,
              66,
              107,
              56,
              53,
              109,
              53,
              109,
              80,
              86,
              97,
              71,
              74,
              80,
              51,
              54,
              111,
              51,
              49,
              107,
              82,
              66,
              112,
              114,
              85,
              65,
              74,
              103,
              90,
              113,
              80,
              66,
              85,
              37,
              50,
              66,
              67,
              87,
              75,
              83,
              112,
              67,
              67,
              85,
              67,
              85,
              108,
              66,
              80,
              57,
              104,
              109,
              51,
              118,
              53,
              86,
              87,
              84,
              68,
              56,
              78,
              75,
              73,
              83,
              37,
              50,
              66,
              106,
              74,
              81,
              89,
              56,
              102,
              50,
              98,
              114,
              52,
              103,
              79,
              112,
              85,
              86,
              101,
              98,
              89,
              74,
              107,
              119,
              76,
              81,
              87,
              37,
              50,
              70,
              48,
              115,
              117,
              76,
              102,
              69,
              113,
              80,
              101,
              80,
              90,
              106,
              55,
              37,
              50,
              70,
              105,
              121,
              67,
              73,
              79,
              68,
              51,
              103,
              68,
              76,
              56,
              115,
              118,
              78,
              88,
              72,
              107,
              37,
              50,
              66,
              119,
              56,
              71,
              56,
              82,
              66,
              79,
              49,
              51,
              120,
              107,
              104,
              49,
              50,
              99,
              102,
              112,
              90,
              68,
              65,
              67,
              119,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1271,
          "responseSize": 439
        },
        "id": "eaa8cf59-275e-477d-ab0e-e67c0125c902",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) ±5초 이내 검증",
            "skipped": false
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "보증금 금액(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "f122be8f-9e83-4a1e-9154-7137e956ece8",
          "length": 21,
          "cycles": 1,
          "position": 20,
          "iteration": 0,
          "httpRequestId": "47df30f5-2b33-4432-8705-df801a39015e"
        },
        "item": {
          "id": "79f64b53-158c-40ca-b177-d121aa732945",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "e10446e5-a207-4a44-9dd1-cefb1d9e1fdb",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "fe84e3d0-2e2d-4363-b4c0-410a12924abd"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "45d0cef6-77f9-4b31-9e47-4bb06965408d",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "eaa71ea6-5b5b-4e54-8bd8-33e0aacf727c"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDZl2yxKEnkHwva%2BGAozGxPLrmLZKYke4Uj9KsfG%2FCRsA0f5lN7EQlNrz%2BPG7iQ2v2M%2BYEJSaLIDiJCF8C7b69x3UHF2oXKOi5dx0iNSz5prQ"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "f61517f5-6e4c-4d62-acfe-9a2efb0241d1",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z7u8h5edqo3mck",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "bfbc517f-94e8-432e-9c28-3b823cf1f5d1",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "257"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 20:15:34 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              112,
              69,
              99,
              109,
              104,
              55,
              106,
              76,
              56,
              116,
              118,
              81,
              56,
              121,
              77,
              75,
              108,
              105,
              102,
              109,
              112,
              54,
              112,
              37,
              50,
              70,
              49,
              86,
              75,
              68,
              56,
              98,
              112,
              88,
              105,
              66,
              89,
              117,
              97,
              121,
              53,
              54,
              84,
              116,
              102,
              52,
              110,
              119,
              78,
              104,
              121,
              87,
              122,
              78,
              105,
              118,
              78,
              76,
              103,
              117,
              75,
              107,
              99,
              75,
              48,
              65,
              72,
              99,
              109,
              113,
              85,
              56,
              52,
              83,
              117,
              113,
              55,
              118,
              70,
              108,
              37,
              50,
              66,
              37,
              50,
              66,
              78,
              112,
              89,
              80,
              110,
              100,
              71,
              50,
              49,
              79,
              74,
              73,
              111,
              81,
              81,
              67,
              77,
              85,
              102,
              55,
              84,
              79,
              86,
              113,
              48,
              112,
              78,
              74,
              121,
              48,
              75,
              106,
              87,
              77,
              49,
              77,
              122,
              89,
              104,
              67,
              52,
              79,
              65,
              122,
              69,
              78,
              48,
              54,
              112,
              53,
              121,
              88,
              121,
              68,
              80,
              37,
              50,
              66,
              121,
              112,
              83,
              89,
              86,
              99,
              54,
              109,
              80,
              108,
              81,
              100,
              67,
              118,
              114,
              122,
              76,
              50,
              56,
              102,
              48,
              51,
              88,
              89,
              49,
              113,
              111,
              97,
              87,
              111,
              111,
              55,
              88,
              37,
              50,
              66,
              65,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1307,
          "responseSize": 257
        },
        "id": "79f64b53-158c-40ca-b177-d121aa732945",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      }
    ],
    "transfers": {
      "responseTotal": 8049
    },
    "failures": [],
    "error": null
  }
}