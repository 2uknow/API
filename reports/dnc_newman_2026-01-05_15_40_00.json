{
  "collection": {
    "_": {
      "postman_id": "ad14dfb9-75d7-4a97-85bf-8665f83ae3c1",
      "exporter_id": "24140936",
      "collection_link": "https://red-escape-704404.postman.co/workspace/Team-Workspace~a1f4d6b2-7a17-4360-8a8d-46313f959e2b/collection/24140936-ad14dfb9-75d7-4a97-85bf-8665f83ae3c1?action=share&source=collection_link&creator=24140936"
    },
    "item": [
      {
        "id": "1ccbba6e-dd67-4043-a684-faad3bd1a1f8",
        "name": "CP 및 정기결제 요청 전송",
        "item": [
          {
            "id": "b7a82803-a64a-42ba-9c44-724d7c8e6c62",
            "name": "READY - BATCH",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/x-www-form-urlencoded; charset=UTF-8"
                }
              ],
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "test",
                "script": {
                  "id": "29b02b99-cf82-43ee-a11d-9dafdfc3e5c5",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "// 파싱 및 개별 디코딩\r",
                    "const parsed = parseQueryString(result);\r",
                    "const startUrlDecoded = safeDecodeURIComponent(parsed.STARTURL);\r",
                    "console.log(\"STARTURL(디코딩):\", startUrlDecoded);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메시지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"정기결제 초기인증 표준페이지 시작 URL(STARTURL) 정상출력\", function () {\r",
                    "    pm.expect(startUrlDecoded).to.eql(\"https://checkout.teledit.com/creditcard_recurring/web\")\r",
                    "})\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"위 표준페이지 시작 URL 전송 파라미터(STARTPARAMS) 정상출력\", function () {\r",
                    "    pm.expect(parsed.STARTPARAMS).to.not.be.undefined;\r",
                    "    pm.expect(parsed.STARTPARAMS).to.not.be.empty;\r",
                    "    pm.expect(parsed.STARTPARAMS).to.not.be.null;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"결제금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "cfda8089-1c81-44b9-a8f9-74eb64bc5fa1"
                }
              },
              {
                "listen": "prerequest",
                "script": {
                  "id": "098d3f7b-645a-4efd-89c7-bfbc4d5be4b6",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'PC',\r",
                    "    TXTYPE: 'AUTH',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    CANCELURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                    "    RETURNURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                    "    ISBILL: 'Y',\r",
                    "    ISNOTI: 'N'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "47f0aa84-4f06-43e8-a48f-4ece4360cbf6"
                }
              }
            ]
          },
          {
            "id": "caae695b-1927-455e-8484-8892c10ffdf1",
            "name": "READY - DANALCARD",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/x-www-form-urlencoded; charset=UTF-8"
                }
              ],
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "test",
                "script": {
                  "id": "bccd478e-9f60-4637-a2d7-51d2267adf54",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "// 파싱 및 개별 디코딩\r",
                    "const parsed = parseQueryString(result);\r",
                    "const startUrlDecoded = safeDecodeURIComponent(parsed.STARTURL);\r",
                    "console.log(\"STARTURL(디코딩):\", startUrlDecoded);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메시지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"정기결제 초기인증 표준페이지 시작 URL(STARTURL) 정상출력\", function () {\r",
                    "    pm.expect(startUrlDecoded).to.eql(\"https://checkout.teledit.com/creditcard_std/web\")\r",
                    "})\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"위 표준페이지 시작 URL 전송 파라미터(STARTPARAMS) 정상출력\", function () {\r",
                    "    pm.expect(parsed.STARTPARAMS).to.not.be.undefined;\r",
                    "    pm.expect(parsed.STARTPARAMS).to.not.be.empty;\r",
                    "    pm.expect(parsed.STARTPARAMS).to.not.be.null;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"결제금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "0a40d5b0-2f34-40b9-a6ef-db1dcd90d5af"
                }
              },
              {
                "listen": "prerequest",
                "script": {
                  "id": "7cfca397-3e41-41cb-8af2-e5635276cd8a",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'PC',\r",
                    "    TXTYPE: 'AUTH',\r",
                    "    SERVICETYPE: 'DANALCARD',\r",
                    "    CANCELURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                    "    RETURNURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                    "    ISBILL: 'Y',\r",
                    "    ISNOTI: 'N'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "dff1e2b2-82df-4b94-8673-c3de8aad6a3b"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "27611609-7f53-44b7-9e8a-9a70a3bdf0d8",
        "name": "초기 인증 결제 요청",
        "item": [
          {
            "id": "0393c66c-4fe1-40ce-a77f-d93fae382863",
            "name": "ISSUEBILLKEY",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/x-www-form-urlencoded; charset=UTF-8"
                }
              ],
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "6a34e800-b494-465d-a38e-4e2d4c1ee0be",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get('TID'),\r",
                    "    TXTYPE: 'ISSUEBILLKEY',\r",
                    "    SERVICETYPE: 'BATCH'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "d06fb2f6-66c7-430b-ab57-2151b12ad114"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "e093323a-4683-4152-a917-ba776aa9f503",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "// 파싱 및 개별 디코딩\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) : 1104 출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"1104\")\r",
                    "});\r",
                    "\r",
                    "// \"존재하지 않는 거래 입니다.\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) : 존재하지 않는 거래입니다. 출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%C1%B8%C0%E7%C7%CF%C1%F6+%BE%CA%B4%C2+%B0%C5%B7%A1+%C0%D4%B4%CF%B4%D9.\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "c44495ec-611f-47da-b5b9-0bc5b2e09cee"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "962cbc48-81c3-4e1c-80b7-3c511272d828",
        "name": "삼성카드",
        "item": [
          {
            "id": "514b70da-2ad4-4e09-92c6-21e51f932efe",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/x-www-form-urlencoded; charset=UTF-8"
                }
              ],
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "d58f9431-ee09-411e-80b5-33dc848238b5",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC250730151749FFCAA0',\r",
                    "    USERNAME: '김하늘',\r",
                    "    USERPHONE: '01085402697',\r",
                    "    ORDERID: '01234567'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "ac1b84c1-8813-45ce-9598-1c1d836d1268"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "d8237e0f-8e74-4201-bb3f-a107e8b7bd95",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0500\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.eql(\"01085402697\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "// 현재 시간 구하기 (HHmmss)\r",
                    "function getFormattedTime() {\r",
                    "  const now = new Date();\r",
                    "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                    "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                    "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                    "\r",
                    "  return `${hours}${minutes}${seconds}`;\r",
                    "}\r",
                    "\r",
                    "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.eql(\"01234567\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"512028******7294\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"삼성카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"%BB%EF%BC%BA%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.eql(\"%EA%B9%3F%3F%3F%3F%3F\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "5e82bbba-ddfb-4037-a12f-05102d40356a"
                }
              }
            ]
          },
          {
            "id": "0a7f8ff2-fc90-404a-9ff6-297168eae8fa",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "test",
                "script": {
                  "id": "39a163b8-224c-4d3c-859a-955ad389b147",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "fb736d41-184e-4d53-990e-82044ac3243c"
                }
              },
              {
                "listen": "prerequest",
                "script": {
                  "id": "2d38274c-dea0-43a0-b849-5462e14139e0",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "efa50524-9dea-4f06-99cd-738b5f3a73f2"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "81f258f2-9417-41b0-ac24-45718681ad45",
        "name": "현대카드",
        "item": [
          {
            "id": "a20b5e03-219e-415e-9aa4-bf8682640b2e",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "2e383411-91b1-45c9-b9e3-e8508432547b",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC221222165535557F38'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "3afa0fbb-bda1-4891-b5e8-c23100666286"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "85631852-0f9e-4412-993d-57ecbaaba499",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0400\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "// 현재 시간 구하기 (HHmmss)\r",
                    "function getFormattedTime() {\r",
                    "  const now = new Date();\r",
                    "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                    "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                    "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                    "\r",
                    "  return `${hours}${minutes}${seconds}`;\r",
                    "}\r",
                    "\r",
                    "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                    "console.log(formattedTime)\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"403293******4003\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"현대카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"%C7%F6%B4%EB%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "})\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "ba5e99d9-da45-4723-bf7b-0ef1c84c5559"
                }
              }
            ]
          },
          {
            "id": "e105dfbc-79c2-456f-97d0-d86cd6abdd62",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "ec82cca0-d47f-4899-a7c6-ff80b993369a",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "2e6ae83d-543b-4d32-880d-b6b2e4cb7903"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "5a8e6684-862a-4a5f-bff3-1f67753b428f",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "8430450f-aa4b-4a28-a8b3-0c750b23f7ee"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "cd93c181-a078-4bd0-aebd-8738a6af0905",
        "name": "신한카드",
        "item": [
          {
            "id": "10d3b6ff-bdb0-499d-8224-aefc3d5c5065",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "df78177d-543e-46d9-ae76-57fe3cb6a21b",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC2507311547242F2CD0'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "16569aed-9f4a-40bc-9491-58b66335abc6"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "aa0809a5-c61d-4021-a49c-909551d0a05d",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0100\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "// 현재 시간 구하기 (HHmmss)\r",
                    "function getFormattedTime() {\r",
                    "  const now = new Date();\r",
                    "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                    "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                    "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                    "\r",
                    "  return `${hours}${minutes}${seconds}`;\r",
                    "}\r",
                    "\r",
                    "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                    "console.log(formattedTime)\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"451842******5446\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"신한카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"%BD%C5%C7%D1%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "3e57e026-9f9b-4e47-a0bb-5f09978beb01"
                }
              }
            ]
          },
          {
            "id": "7863f025-3e51-4579-9fda-25914af910c8",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "49a1087f-623c-4811-969f-7bebe836b2ac",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "74fc8e83-42eb-40a5-972f-c9138ec37028"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "9aa982c1-3ddf-4e2c-9c03-28215bef7b8d",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "d9c4274a-c7e9-42be-8e17-778057616d86"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "2f7be9b5-4781-46d5-b25f-7edd0a2e0f00",
        "name": "농협카드",
        "item": [
          {
            "id": "501b8808-3f20-4dfc-b522-8d19dc2521d0",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "be8ca9a1-595c-4a82-9d3b-4a25356dae85",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC2512151528144A426D'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "2f819185-36b3-497c-abde-d10eb911d87d"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "49461602-26db-4f04-9dbb-e0e60a986d53",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0800\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "// 현재 시간 구하기 (HHmmss)\r",
                    "function getFormattedTime() {\r",
                    "  const now = new Date();\r",
                    "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                    "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                    "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                    "\r",
                    "  return `${hours}${minutes}${seconds}`;\r",
                    "}\r",
                    "\r",
                    "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"542586******3820\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "// \"NH농협카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"NH%B3%F3%C7%F9%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "76267ec6-da69-4149-8e13-b4a0169fb274"
                }
              }
            ]
          },
          {
            "id": "3696f654-f975-46e4-bd1b-70cdf25ab376",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "18da0f0c-d8f0-44ec-a464-cba23af6bbaa",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "ebe0f58f-83cf-4561-91db-bcadc5bcb520"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "90fb2fca-0ad3-4e39-b781-4c9abbfcba6f",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "a1a24a83-f818-447b-88f7-096f1722156e"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "7368c4d3-7c23-4f94-aab6-7bf53e4142f0",
        "name": "국민카드",
        "item": [
          {
            "id": "c2ce4a00-4f3a-4f53-92d8-fb97ebad2513",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "7483840e-1a60-4707-9704-605304851b80",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC250804165745DBD04E'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "9ee855ff-bac6-4183-853a-4d2120ff7b91"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "72572743-cf45-4989-9cfd-29a368220174",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0300\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "// 현재 시간 구하기 (HHmmss)\r",
                    "function getFormattedTime() {\r",
                    "  const now = new Date();\r",
                    "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                    "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                    "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                    "\r",
                    "  return `${hours}${minutes}${seconds}`;\r",
                    "}\r",
                    "\r",
                    "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                    "console.log(formattedTime)\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"540926******6041'\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"삼성카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"KB%B1%B9%B9%CE%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "aac11d75-783d-4462-b3ea-6b4f0bd3354a"
                }
              }
            ]
          },
          {
            "id": "757d0b67-7e27-49f0-ac27-f1d2fab57268",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "f85b519c-193e-4a8c-9583-d367d1057d4b",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "fe7c1fd1-bcab-4de9-9e51-2ddafdecc3bd"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "bc677fc4-15ac-4f2d-85f6-3ea65a1a06c6",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "5a2acc92-8f3b-4b26-8d14-74287aee4ff9"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "c0f8c673-0c7a-4880-85e8-c9e33bdc8863",
        "name": "우리BC카드",
        "item": [
          {
            "id": "cc3ff19d-a6e3-400e-ae19-fc6aa4d07ec8",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "8941c2c4-a343-489a-8a22-d6a3caaadfe6",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC25080416595836B04B'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "d6277e02-11c4-4acd-bc4b-576c7685bb73"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "a1ca991b-a2c0-4833-9871-fdbc7051457f",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0202\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "// 현재 시간 구하기 (HHmmss)\r",
                    "function getFormattedTime() {\r",
                    "  const now = new Date();\r",
                    "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                    "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                    "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                    "\r",
                    "  return `${hours}${minutes}${seconds}`;\r",
                    "}\r",
                    "\r",
                    "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                    "console.log(formattedTime)\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"538920******1226\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"삼성카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"%BF%EC%B8%AEBC%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "9563fba1-f000-421a-8413-ea13985c51b3"
                }
              }
            ]
          },
          {
            "id": "e2958a3c-4236-463e-9f7f-4ac585e23d48",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "81f8ece3-52bd-40d5-bb8a-a66727350c97",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "d00b4ea3-cf61-4daa-bcff-1ea0e2b28cfd"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "6cd7b12e-001d-45fa-84d2-cef22e5a7c9c",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "e3f2b336-96dd-4697-a767-b232357186c6"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "4ccfc9d9-bd3a-4cdc-940e-faa694296de0",
        "name": "우리독자카드",
        "item": [
          {
            "id": "eab75afe-1450-4560-962f-db53beb0490a",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "a64b14a6-e4a7-4f56-832f-5ca543444978",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC251215145003CEDD72'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "c2e89710-1b13-4bea-a14c-96b57fd3bf10"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "50151dfa-ba33-4f4a-a6fe-72f4f52eaa50",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0907\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "// 현재 시간 구하기 (HHmmss)\r",
                    "function getFormattedTime() {\r",
                    "  const now = new Date();\r",
                    "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                    "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                    "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                    "\r",
                    "  return `${hours}${minutes}${seconds}`;\r",
                    "}\r",
                    "\r",
                    "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                    "console.log(formattedTime)\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"624404******8380\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"롯데카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"%BF%EC%B8%AE%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "8ef36597-53ae-4e45-89ce-0181e7831d9f"
                }
              }
            ]
          },
          {
            "id": "8f7421ca-fbdb-42ce-915b-6c6fdd0248d9",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "caaa6572-d13d-4134-80ef-6f426475d3b7",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "8921d367-27b8-4941-9d61-20a9fb75b187"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "78f2bbdb-56c0-4db7-9a5a-df2c685db715",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "157c78bf-b5a0-4073-bece-08920c394240"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "ad0a9298-d44a-4479-bf5e-5dac0027ae42",
        "name": "Kbank카드",
        "item": [
          {
            "id": "dde2888e-464d-4e49-ada8-60888ef09d04",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "e052b64b-b4a5-4d85-a951-e6c4e80c1924",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC25121515231344D775'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "80b49abe-0dfc-4676-9d00-d406132cfc45"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "1f688978-8824-464e-8dff-d1d70660d749",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0921\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "// 현재 시간 구하기 (HHmmss)\r",
                    "function getFormattedTime() {\r",
                    "  const now = new Date();\r",
                    "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                    "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                    "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                    "\r",
                    "  return `${hours}${minutes}${seconds}`;\r",
                    "}\r",
                    "\r",
                    "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                    "console.log(formattedTime)\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"485462******0767\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"삼성카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"%C4%C9%C0%CC%B9%F0%C5%A9%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "bc1dcdf1-d158-4b31-abbe-292908859d4c"
                }
              }
            ]
          },
          {
            "id": "106a437c-f7ce-4ece-a364-c1bec03bcac1",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "73d773ec-5180-4a1a-bacb-ff72e3e1fdcb",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "33ef4cf7-c38b-49e6-b6f6-6303417ec3c4"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "1492572d-b99e-4f16-b7cd-c101ea82a513",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "58dfe7ef-f2b4-4a21-b139-004c0bcdf74d"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "21e235ee-21ba-40d8-934b-f24937e236f0",
        "name": "롯데카드",
        "item": [
          {
            "id": "b7ea07af-1788-4a8b-9e7b-0841bf94216b",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "f2b88dfe-6719-4c2f-a0c5-2cadf1a5a43b",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC2512151453119224E3'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "2d80be22-42f1-4fae-82bc-0eec1d6ba42d"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "3a5b6d47-c985-49d2-9505-bcfbbf38ec8d",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0700\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "// 현재 시간 구하기 (HHmmss)\r",
                    "function getFormattedTime() {\r",
                    "  const now = new Date();\r",
                    "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                    "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                    "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                    "\r",
                    "  return `${hours}${minutes}${seconds}`;\r",
                    "}\r",
                    "\r",
                    "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                    "console.log(formattedTime)\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"513792******3380\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"롯데카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"%B7%D4%B5%A5%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "f3baaf42-2b93-4d13-99ea-a7538cf726a6"
                }
              }
            ]
          },
          {
            "id": "1b301c59-8b53-45a5-808d-505918f9849b",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "161c6bb1-35e9-4e52-bc4e-d14338e93168",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "89a075c5-d227-4cbb-a03d-7ed58e3a79ef"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "fd716c69-3d36-4d5b-ae72-a4d9f60d1d9e",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "310b70c0-a5ac-4446-8a65-d217e9107467"
                }
              }
            ]
          }
        ],
        "event": []
      }
    ],
    "event": [],
    "variable": [],
    "info": {
      "_postman_id": "ad14dfb9-75d7-4a97-85bf-8665f83ae3c1",
      "name": "Danal_CreditRebill_v1.0",
      "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    }
  },
  "environment": {
    "_": {
      "postman_variable_scope": "environment",
      "postman_exported_at": "2025-08-18T05:02:37.387Z",
      "postman_exported_using": "Postman/11.58.5"
    },
    "id": "6094ec42-451a-414a-8cd4-1d771ed4e797",
    "name": "Danal_CreditRebill_v1.0",
    "values": [
      {
        "type": "any",
        "value": "https://tx-creditcard.danalpay.com/credit/",
        "key": "tx-credit"
      },
      {
        "type": "any",
        "value": "8kvDIwvdID7NWcBMND4uDSJd0%2FMFObXIHYDD7oOtGSt1MzeMEvUhJeOaNufr6U21DudarBu%2FV9fmDI37C1G1GfJojZ9Is25%2FE%2FLSRRsjkg%2BScdegZyJ2kwIzBUkYYfXT",
        "key": "encryptedData"
      },
      {
        "type": "any",
        "value": "RETURNCODE=0000&RETURNMSG=%BC%BA%B0%F8&BALANCE=0&O_TID=202601051540309094264400&TID=202601051540323334334400&TRANTIME=154032&TRANDATE=20260105&AMOUNT=301&DEPOSIT_AMT=0",
        "key": "decryptedResponse"
      },
      {
        "type": "any",
        "value": "",
        "key": "startUrlDecoded"
      },
      {
        "type": "any",
        "value": "202601051540309094264400",
        "key": "TID"
      },
      {
        "type": "any",
        "value": "",
        "key": "TRANDATE"
      },
      {
        "type": "any",
        "value": "154032",
        "key": "TRANTIME"
      }
    ]
  },
  "globals": {
    "id": "46b47914-ef3e-4c86-9fb3-72ad451cdbdd",
    "values": []
  },
  "run": {
    "stats": {
      "iterations": {
        "total": 1,
        "pending": 0,
        "failed": 0
      },
      "items": {
        "total": 21,
        "pending": 0,
        "failed": 0
      },
      "scripts": {
        "total": 42,
        "pending": 0,
        "failed": 0
      },
      "prerequests": {
        "total": 21,
        "pending": 0,
        "failed": 0
      },
      "requests": {
        "total": 21,
        "pending": 0,
        "failed": 0
      },
      "tests": {
        "total": 21,
        "pending": 0,
        "failed": 0
      },
      "assertions": {
        "total": 250,
        "pending": 0,
        "failed": 5
      },
      "testScripts": {
        "total": 21,
        "pending": 0,
        "failed": 0
      },
      "prerequestScripts": {
        "total": 21,
        "pending": 0,
        "failed": 0
      }
    },
    "timings": {
      "responseAverage": 1311.1904761904761,
      "responseMin": 20,
      "responseMax": 2009,
      "responseSd": 526.0387111454658,
      "dnsAverage": 211.84679999947548,
      "dnsMin": 211.84679999947548,
      "dnsMax": 211.84679999947548,
      "dnsSd": 0,
      "firstByteAverage": 1298.2628857143932,
      "firstByteMin": 18.96780000254512,
      "firstByteMax": 2007.6011999994516,
      "firstByteSd": 550.5919634051492,
      "started": 1767595202334,
      "completed": 1767595233324
    },
    "executions": [
      {
        "cursor": {
          "position": 0,
          "iteration": 0,
          "length": 21,
          "cycles": 1,
          "empty": false,
          "eof": false,
          "bof": true,
          "cr": false,
          "ref": "4fa0fc79-b95c-467d-9c14-31d979d2c558",
          "httpRequestId": "10b2428b-33cd-4c92-a4c0-c9d0b6f0a264"
        },
        "item": {
          "id": "b7a82803-a64a-42ba-9c44-724d7c8e6c62",
          "name": "READY - BATCH",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded; charset=UTF-8"
              }
            ],
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "29b02b99-cf82-43ee-a11d-9dafdfc3e5c5",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "// 파싱 및 개별 디코딩\r",
                  "const parsed = parseQueryString(result);\r",
                  "const startUrlDecoded = safeDecodeURIComponent(parsed.STARTURL);\r",
                  "console.log(\"STARTURL(디코딩):\", startUrlDecoded);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메시지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"정기결제 초기인증 표준페이지 시작 URL(STARTURL) 정상출력\", function () {\r",
                  "    pm.expect(startUrlDecoded).to.eql(\"https://checkout.teledit.com/creditcard_recurring/web\")\r",
                  "})\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"위 표준페이지 시작 URL 전송 파라미터(STARTPARAMS) 정상출력\", function () {\r",
                  "    pm.expect(parsed.STARTPARAMS).to.not.be.undefined;\r",
                  "    pm.expect(parsed.STARTPARAMS).to.not.be.empty;\r",
                  "    pm.expect(parsed.STARTPARAMS).to.not.be.null;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"결제금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});"
                ],
                "_lastExecutionId": "cfda8089-1c81-44b9-a8f9-74eb64bc5fa1"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "098d3f7b-645a-4efd-89c7-bfbc4d5be4b6",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'PC',\r",
                  "    TXTYPE: 'AUTH',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    CANCELURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                  "    RETURNURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                  "    ISBILL: 'Y',\r",
                  "    ISNOTI: 'N'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "47f0aa84-4f06-43e8-a48f-4ece4360cbf6"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4PJAgyNbIM2hLz3kcfuDNAuCqSPVhBCpg6V8SYW3jJ%2FZIfE36F%2BlYYpMSgxO77gr%2BDwLH0n%2BtJG7ZAyj6rsqbDI3wCKhX4bzlTMTVKd8c%2BGAYmpCZ3i8%2BtXuuBm6g2NRznUDXGC09xQFVhQa4p6tQyOn5eKksesgLSgIMzKa6kDqC5%2BLzMcAl8IF7qCGgIqWAazfqDqnE0a5U%2BZ8p2HIn%2FENLsoKdJRXIlRiPnCOj5yDVfIQWasCSQLbccOu1NheelnZWQGZ5rGm%2FTC5F8i9Vs5%2BjHsIKtlMOIqeb%2BdxblE4thUJb9NDu3NPdadnhpnr9g%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "Content-Type",
              "value": "application/x-www-form-urlencoded; charset=UTF-8"
            },
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "9de15a73-e866-4581-812d-7790143649d1",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "f23fd4ca-0c0b-4946-8d61-267613fc5952",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Set-Cookie",
              "value": "SCOUTER=z6luj7bfqfoo3a; Expires=Sat, 23-Jan-2094 09:54:10 GMT; Path=/"
            },
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "807"
            },
            {
              "key": "Date",
              "value": "Mon, 05 Jan 2026 06:40:02 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              80,
              100,
              37,
              50,
              66,
              75,
              48,
              72,
              110,
              79,
              120,
              87,
              84,
              105,
              75,
              82,
              70,
              102,
              111,
              72,
              107,
              98,
              104,
              52,
              52,
              88,
              117,
              70,
              111,
              37,
              50,
              70,
              49,
              89,
              70,
              101,
              52,
              51,
              115,
              114,
              82,
              81,
              52,
              79,
              74,
              79,
              120,
              104,
              76,
              115,
              57,
              53,
              86,
              65,
              114,
              97,
              53,
              115,
              37,
              50,
              70,
              86,
              83,
              76,
              107,
              122,
              50,
              101,
              99,
              73,
              53,
              113,
              81,
              80,
              49,
              74,
              68,
              55,
              70,
              105,
              68,
              56,
              48,
              56,
              115,
              55,
              72,
              105,
              80,
              100,
              52,
              55,
              88,
              107,
              74,
              49,
              78,
              110,
              116,
              73,
              71,
              72,
              71,
              55,
              122,
              115,
              99,
              119,
              57,
              120,
              106,
              37,
              50,
              66,
              81,
              113,
              79,
              81,
              107,
              37,
              50,
              70,
              67,
              85,
              120,
              67,
              97,
              121,
              75,
              117,
              67,
              78,
              83,
              97,
              122,
              118,
              82,
              108,
              109,
              73,
              102,
              89,
              52,
              122,
              81,
              117,
              112,
              78,
              88,
              102,
              114,
              70,
              105,
              121,
              119,
              122,
              75,
              68,
              102,
              80,
              114,
              101,
              104,
              79,
              71,
              50,
              50,
              79,
              105,
              37,
              50,
              66,
              114,
              109,
              98,
              69,
              79,
              119,
              54,
              114,
              83,
              67,
              78,
              48,
              83,
              86,
              73,
              86,
              69,
              82,
              84,
              116,
              68,
              80,
              85,
              71,
              108,
              81,
              118,
              90,
              74,
              75,
              67,
              70,
              120,
              65,
              101,
              37,
              50,
              66,
              71,
              76,
              83,
              57,
              88,
              106,
              52,
              88,
              106,
              90,
              111,
              67,
              122,
              115,
              49,
              109,
              112,
              65,
              112,
              113,
              65,
              51,
              37,
              50,
              70,
              104,
              80,
              104,
              74,
              90,
              87,
              90,
              51,
              83,
              98,
              97,
              71,
              67,
              85,
              77,
              81,
              83,
              117,
              102,
              107,
              57,
              106,
              37,
              50,
              70,
              70,
              53,
              103,
              83,
              67,
              75,
              89,
              113,
              107,
              112,
              112,
              109,
              116,
              73,
              89,
              118,
              70,
              89,
              113,
              50,
              49,
              83,
              54,
              73,
              122,
              80,
              100,
              48,
              98,
              115,
              52,
              65,
              100,
              115,
              110,
              103,
              104,
              68,
              70,
              106,
              37,
              50,
              70,
              51,
              106,
              109,
              55,
              110,
              37,
              50,
              66,
              81,
              84,
              110,
              109,
              76,
              81,
              85,
              54,
              54,
              54,
              83,
              78,
              86,
              54,
              121,
              49,
              119,
              70,
              53,
              108,
              103,
              115,
              105,
              116,
              104,
              105,
              119,
              105,
              50,
              69,
              97,
              121,
              70,
              71,
              113,
              79,
              87,
              119,
              77,
              69,
              111,
              88,
              86,
              99,
              78,
              51,
              106,
              69,
              115,
              52,
              79,
              37,
              50,
              70,
              106,
              106,
              84,
              76,
              87,
              115,
              52,
              88,
              87,
              120,
              104,
              100,
              66,
              90,
              83,
              119,
              110,
              69,
              97,
              73,
              109,
              114,
              83,
              100,
              85,
              103,
              70,
              80,
              118,
              107,
              56,
              88,
              88,
              108,
              89,
              76,
              73,
              108,
              116,
              111,
              71,
              69,
              113,
              99,
              114,
              83,
              50,
              105,
              119,
              99,
              114,
              112,
              110,
              87,
              86,
              54,
              71,
              57,
              48,
              67,
              75,
              37,
              50,
              66,
              80,
              73,
              121,
              70,
              105,
              109,
              79,
              37,
              50,
              70,
              66,
              117,
              112,
              89,
              111,
              54,
              68,
              105,
              89,
              120,
              90,
              69,
              89,
              66,
              51,
              73,
              37,
              50,
              66,
              111,
              118,
              100,
              80,
              99,
              71,
              70,
              69,
              107,
              109,
              90,
              68,
              88,
              120,
              111,
              116,
              87,
              51,
              57,
              99,
              105,
              72,
              83,
              98,
              83,
              109,
              119,
              101,
              104,
              106,
              88,
              75,
              120,
              79,
              50,
              76,
              106,
              113,
              54,
              74,
              83,
              79,
              104,
              79,
              74,
              120,
              74,
              54,
              107,
              86,
              99,
              78,
              121,
              103,
              119,
              55,
              70,
              77,
              108,
              71,
              103,
              37,
              50,
              70,
              37,
              50,
              66,
              72,
              83,
              49,
              101,
              37,
              50,
              66,
              117,
              79,
              73,
              82,
              70,
              111,
              48,
              88,
              51,
              78,
              100,
              89,
              54,
              48,
              76,
              73,
              37,
              50,
              70,
              108,
              121,
              82,
              115,
              71,
              119,
              118,
              78,
              48,
              117,
              111,
              100,
              81,
              51,
              76,
              78,
              101,
              108,
              48,
              69,
              105,
              51,
              75,
              97,
              101,
              103,
              82,
              66,
              57,
              69,
              103,
              56,
              117,
              80,
              57,
              116,
              37,
              50,
              70,
              54,
              77,
              69,
              86,
              79,
              114,
              56,
              102,
              74,
              88,
              103,
              84,
              48,
              57,
              75,
              51,
              111,
              48,
              54,
              110,
              108,
              97,
              111,
              98,
              113,
              117,
              87,
              111,
              48,
              48,
              72,
              105,
              65,
              55,
              81,
              107,
              104,
              71,
              66,
              56,
              99,
              105,
              107,
              97,
              98,
              68,
              82,
              52,
              97,
              107,
              69,
              82,
              74,
              37,
              50,
              66,
              114,
              109,
              114,
              101,
              76,
              103,
              90,
              120,
              57,
              110,
              102,
              67,
              118,
              75,
              98,
              108,
              97,
              37,
              50,
              70,
              52,
              110,
              56,
              101,
              106,
              97,
              74,
              83,
              50,
              71,
              37,
              50,
              70,
              112,
              97,
              83,
              115,
              108,
              87,
              72,
              79,
              100,
              72,
              51,
              51,
              86,
              86,
              51,
              97,
              87,
              101,
              102,
              78,
              85,
              88,
              55,
              54,
              54,
              109,
              53,
              37,
              50,
              66,
              105,
              115,
              86,
              116,
              117,
              104,
              122,
              89,
              48,
              100,
              83,
              76,
              88,
              87,
              37,
              50,
              66,
              111,
              117,
              82,
              48,
              86,
              119,
              49,
              103,
              81,
              117,
              75,
              76,
              109,
              72,
              83,
              87,
              82,
              57,
              66,
              84,
              97,
              67,
              85,
              108,
              111,
              80,
              67,
              52,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 283,
          "responseSize": 807
        },
        "id": "b7a82803-a64a-42ba-9c44-724d7c8e6c62",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메시지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "정기결제 초기인증 표준페이지 시작 URL(STARTURL) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "위 표준페이지 시작 URL 전송 파라미터(STARTPARAMS) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결제금액(AMOUNT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "a9cbac4d-6819-4efa-89a7-cc8441681468",
          "length": 21,
          "cycles": 1,
          "position": 1,
          "iteration": 0,
          "httpRequestId": "0840acc2-7eb1-42b3-8cc9-4fdcba1e3bb3"
        },
        "item": {
          "id": "caae695b-1927-455e-8484-8892c10ffdf1",
          "name": "READY - DANALCARD",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded; charset=UTF-8"
              }
            ],
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "bccd478e-9f60-4637-a2d7-51d2267adf54",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "// 파싱 및 개별 디코딩\r",
                  "const parsed = parseQueryString(result);\r",
                  "const startUrlDecoded = safeDecodeURIComponent(parsed.STARTURL);\r",
                  "console.log(\"STARTURL(디코딩):\", startUrlDecoded);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메시지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"정기결제 초기인증 표준페이지 시작 URL(STARTURL) 정상출력\", function () {\r",
                  "    pm.expect(startUrlDecoded).to.eql(\"https://checkout.teledit.com/creditcard_std/web\")\r",
                  "})\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"위 표준페이지 시작 URL 전송 파라미터(STARTPARAMS) 정상출력\", function () {\r",
                  "    pm.expect(parsed.STARTPARAMS).to.not.be.undefined;\r",
                  "    pm.expect(parsed.STARTPARAMS).to.not.be.empty;\r",
                  "    pm.expect(parsed.STARTPARAMS).to.not.be.null;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"결제금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});"
                ],
                "_lastExecutionId": "0a40d5b0-2f34-40b9-a6ef-db1dcd90d5af"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "7cfca397-3e41-41cb-8af2-e5635276cd8a",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'PC',\r",
                  "    TXTYPE: 'AUTH',\r",
                  "    SERVICETYPE: 'DANALCARD',\r",
                  "    CANCELURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                  "    RETURNURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                  "    ISBILL: 'Y',\r",
                  "    ISNOTI: 'N'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "dff1e2b2-82df-4b94-8673-c3de8aad6a3b"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4PJAgyNbIM2hLz3kcfuDNAsCL18rdUmVCzFjEXB9wjgQ82IteFWZK11Um66aaXg9%2BmJBA%2BzStWEMjr0dSocIEm%2Bbu9cYhIHHrFuuMeAbp0%2FaOn9YPjFswBAcVkFCl4MZNYRXi9%2BMiA7xwR%2FFNE00HJ0pC21O5yf5imQNizmVqk2bD03K20FpT3Fs3h%2FUCOJ0UXofslr6lyNGsyvb6DemiNcWC4LE3zCDhJmfdiJa9ITHGb2ToWrxU2XD3B50so4Ru4EZtRrOIrbszRI9doqcDx5dZKeCsMBh%2Ff1PMU0qTPX5ctV%2BHYz%2F289vKWnUu4B9CA%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "Content-Type",
              "value": "application/x-www-form-urlencoded; charset=UTF-8"
            },
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "1c3595f9-d4c4-481a-bbbc-bf29839296a4",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z6luj7bfqfoo3a",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "555ccb57-ac01-45e7-b9e1-71c78411817b",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "779"
            },
            {
              "key": "Date",
              "value": "Mon, 05 Jan 2026 06:40:03 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              80,
              100,
              37,
              50,
              66,
              75,
              48,
              72,
              110,
              79,
              120,
              87,
              84,
              105,
              75,
              82,
              70,
              102,
              111,
              72,
              107,
              98,
              104,
              52,
              52,
              88,
              117,
              70,
              111,
              37,
              50,
              70,
              49,
              89,
              70,
              101,
              52,
              51,
              115,
              114,
              82,
              81,
              52,
              79,
              74,
              79,
              120,
              104,
              76,
              115,
              57,
              53,
              86,
              65,
              114,
              97,
              53,
              115,
              37,
              50,
              70,
              86,
              83,
              76,
              107,
              122,
              50,
              101,
              99,
              73,
              53,
              113,
              81,
              80,
              49,
              74,
              68,
              55,
              70,
              105,
              68,
              56,
              48,
              56,
              115,
              55,
              72,
              105,
              80,
              100,
              52,
              97,
              105,
              70,
              118,
              66,
              106,
              114,
              51,
              113,
              89,
              111,
              122,
              100,
              72,
              81,
              53,
              88,
              122,
              103,
              106,
              53,
              65,
              87,
              109,
              69,
              75,
              83,
              104,
              121,
              111,
              118,
              88,
              102,
              66,
              90,
              112,
              82,
              54,
              114,
              99,
              52,
              73,
              81,
              68,
              57,
              120,
              106,
              111,
              114,
              101,
              122,
              52,
              112,
              37,
              50,
              70,
              101,
              110,
              116,
              74,
              90,
              90,
              69,
              102,
              103,
              113,
              70,
              104,
              37,
              50,
              66,
              121,
              90,
              90,
              89,
              89,
              65,
              102,
              76,
              77,
              49,
              53,
              37,
              50,
              66,
              97,
              82,
              114,
              57,
              80,
              82,
              71,
              50,
              104,
              71,
              116,
              48,
              122,
              86,
              66,
              51,
              85,
              99,
              49,
              100,
              106,
              86,
              65,
              54,
              57,
              109,
              109,
              49,
              101,
              56,
              119,
              68,
              106,
              76,
              81,
              100,
              56,
              86,
              101,
              109,
              83,
              70,
              50,
              83,
              54,
              83,
              72,
              73,
              118,
              109,
              57,
              48,
              51,
              105,
              69,
              81,
              67,
              119,
              102,
              108,
              53,
              67,
              68,
              89,
              79,
              54,
              119,
              106,
              111,
              55,
              52,
              105,
              111,
              106,
              66,
              117,
              106,
              79,
              114,
              108,
              84,
              56,
              50,
              52,
              48,
              57,
              48,
              108,
              69,
              56,
              87,
              102,
              108,
              75,
              122,
              117,
              114,
              68,
              117,
              90,
              55,
              90,
              109,
              69,
              117,
              37,
              50,
              70,
              53,
              100,
              79,
              103,
              37,
              50,
              70,
              111,
              84,
              88,
              107,
              120,
              69,
              88,
              76,
              87,
              115,
              115,
              115,
              65,
              107,
              103,
              121,
              122,
              121,
              48,
              52,
              74,
              119,
              114,
              79,
              101,
              111,
              119,
              86,
              121,
              89,
              75,
              71,
              83,
              121,
              105,
              74,
              101,
              106,
              79,
              48,
              75,
              77,
              115,
              69,
              74,
              122,
              50,
              75,
              75,
              49,
              56,
              57,
              80,
              53,
              65,
              69,
              88,
              118,
              77,
              53,
              65,
              78,
              76,
              74,
              51,
              102,
              70,
              106,
              81,
              113,
              105,
              77,
              72,
              108,
              113,
              48,
              107,
              118,
              55,
              67,
              83,
              54,
              65,
              110,
              122,
              53,
              67,
              88,
              84,
              83,
              121,
              65,
              104,
              66,
              77,
              37,
              50,
              66,
              87,
              115,
              79,
              105,
              76,
              81,
              111,
              84,
              104,
              117,
              116,
              56,
              52,
              114,
              98,
              37,
              50,
              66,
              52,
              72,
              119,
              71,
              112,
              99,
              37,
              50,
              66,
              70,
              114,
              108,
              122,
              79,
              69,
              84,
              82,
              79,
              86,
              117,
              101,
              76,
              105,
              112,
              68,
              66,
              85,
              102,
              99,
              65,
              103,
              84,
              109,
              109,
              54,
              100,
              65,
              106,
              86,
              50,
              102,
              67,
              98,
              74,
              68,
              87,
              50,
              66,
              57,
              37,
              50,
              66,
              37,
              50,
              66,
              106,
              109,
              109,
              79,
              83,
              37,
              50,
              66,
              99,
              82,
              66,
              118,
              82,
              78,
              119,
              106,
              116,
              37,
              50,
              66,
              73,
              66,
              65,
              111,
              72,
              51,
              86,
              117,
              73,
              117,
              65,
              73,
              48,
              115,
              89,
              48,
              102,
              80,
              56,
              111,
              66,
              67,
              67,
              54,
              87,
              82,
              104,
              118,
              51,
              67,
              74,
              79,
              85,
              105,
              111,
              112,
              88,
              100,
              121,
              121,
              77,
              120,
              84,
              84,
              68,
              103,
              109,
              88,
              77,
              55,
              37,
              50,
              70,
              48,
              49,
              103,
              88,
              114,
              52,
              69,
              101,
              104,
              37,
              50,
              70,
              102,
              52,
              77,
              56,
              76,
              75,
              104,
              97,
              68,
              105,
              74,
              81,
              66,
              100,
              55,
              56,
              120,
              81,
              100,
              106,
              107,
              88,
              74,
              65,
              76,
              99,
              103,
              56,
              52,
              101,
              88,
              106,
              74,
              55,
              84,
              100,
              109,
              77,
              119,
              75,
              100,
              66,
              113,
              75,
              120,
              50,
              81,
              56,
              57,
              66,
              112,
              113,
              103,
              86,
              88,
              76,
              76,
              105,
              120,
              100,
              97,
              75,
              83,
              109,
              52,
              117,
              74,
              56,
              70,
              50,
              99,
              111,
              67,
              72,
              82,
              73,
              88,
              97,
              112,
              78,
              57,
              103,
              67,
              51,
              120,
              67,
              72,
              73,
              68,
              89,
              113,
              102,
              88,
              76,
              115,
              70,
              86,
              70,
              81,
              113,
              69,
              81,
              49,
              37,
              50,
              66,
              89,
              56,
              54,
              85,
              85,
              49,
              100,
              72,
              114,
              100,
              110,
              55,
              86,
              56,
              55,
              98,
              111,
              107,
              78,
              103,
              110,
              97,
              85,
              90,
              67,
              85,
              57,
              51,
              108,
              101,
              111,
              88,
              77,
              111,
              37,
              50,
              66,
              114,
              101,
              77,
              83,
              79,
              103,
              67,
              107,
              118,
              49,
              106,
              117,
              49,
              49,
              119,
              121,
              103,
              120,
              81,
              111,
              37,
              50,
              66,
              72,
              109,
              50,
              50,
              78,
              84,
              88,
              119,
              88,
              81,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 33,
          "responseSize": 779
        },
        "id": "caae695b-1927-455e-8484-8892c10ffdf1",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메시지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "정기결제 초기인증 표준페이지 시작 URL(STARTURL) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "위 표준페이지 시작 URL 전송 파라미터(STARTPARAMS) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결제금액(AMOUNT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "8f7242c4-9fde-412f-a93d-eb27e19c2c55",
          "length": 21,
          "cycles": 1,
          "position": 2,
          "iteration": 0,
          "httpRequestId": "3d6c3400-9faa-487c-a439-a97a90265c5d"
        },
        "item": {
          "id": "0393c66c-4fe1-40ce-a77f-d93fae382863",
          "name": "ISSUEBILLKEY",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded; charset=UTF-8"
              }
            ],
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "6a34e800-b494-465d-a38e-4e2d4c1ee0be",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get('TID'),\r",
                  "    TXTYPE: 'ISSUEBILLKEY',\r",
                  "    SERVICETYPE: 'BATCH'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "d06fb2f6-66c7-430b-ab57-2151b12ad114"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "e093323a-4683-4152-a917-ba776aa9f503",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "// 파싱 및 개별 디코딩\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) : 1104 출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"1104\")\r",
                  "});\r",
                  "\r",
                  "// \"존재하지 않는 거래 입니다.\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) : 존재하지 않는 거래입니다. 출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%C1%B8%C0%E7%C7%CF%C1%F6+%BE%CA%B4%C2+%B0%C5%B7%A1+%C0%D4%B4%CF%B4%D9.\")\r",
                  "});"
                ],
                "_lastExecutionId": "c44495ec-611f-47da-b5b9-0bc5b2e09cee"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDXHvMUqO25iIdKkD6XH4VkTYfgoBPJqjGpr15Fqq4CCxlzQc11Pn06IJSodR9hnt4%2FgbXDCdFcZ2uADRjw%2Fvh8Q%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "Content-Type",
              "value": "application/x-www-form-urlencoded; charset=UTF-8"
            },
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "d05ce443-f89d-4cd5-8282-8e5fa159ff7b",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z6luj7bfqfoo3a",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "8c586072-11d1-4299-a468-244e378c856d",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "173"
            },
            {
              "key": "Date",
              "value": "Mon, 05 Jan 2026 06:40:03 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              102,
              117,
              54,
              83,
              50,
              114,
              73,
              76,
              75,
              49,
              37,
              50,
              70,
              69,
              48,
              108,
              103,
              69,
              121,
              75,
              71,
              81,
              51,
              97,
              115,
              54,
              107,
              69,
              107,
              75,
              101,
              114,
              56,
              72,
              66,
              109,
              89,
              119,
              80,
              108,
              76,
              84,
              81,
              80,
              113,
              101,
              87,
              101,
              111,
              48,
              116,
              97,
              76,
              106,
              111,
              73,
              113,
              89,
              51,
              110,
              116,
              53,
              77,
              57,
              65,
              105,
              110,
              57,
              37,
              50,
              70,
              100,
              83,
              114,
              110,
              101,
              121,
              53,
              88,
              107,
              55,
              78,
              56,
              114,
              114,
              88,
              101,
              68,
              97,
              116,
              88,
              109,
              88,
              51,
              99,
              66,
              107,
              87,
              56,
              65,
              75,
              37,
              50,
              70,
              104,
              117,
              114,
              49,
              48,
              51,
              74,
              67,
              80,
              107,
              37,
              50,
              70,
              103,
              110,
              72,
              73,
              102,
              103,
              107,
              78,
              117,
              120,
              115,
              73,
              101,
              81,
              70,
              83,
              118,
              73,
              102,
              73,
              37,
              50,
              70,
              72,
              49,
              74,
              84,
              105,
              55,
              116,
              87,
              79,
              111,
              99,
              37,
              50,
              66,
              109,
              103,
              84,
              51,
              100,
              99,
              88,
              65,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 20,
          "responseSize": 173
        },
        "id": "0393c66c-4fe1-40ce-a77f-d93fae382863",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) : 1104 출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) : 존재하지 않는 거래입니다. 출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "99aee530-4a5c-478d-86d7-2ebd32c0849d",
          "length": 21,
          "cycles": 1,
          "position": 3,
          "iteration": 0,
          "httpRequestId": "67ea60d2-4575-438f-999e-0aafef438247"
        },
        "item": {
          "id": "514b70da-2ad4-4e09-92c6-21e51f932efe",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded; charset=UTF-8"
              }
            ],
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "d58f9431-ee09-411e-80b5-33dc848238b5",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC250730151749FFCAA0',\r",
                  "    USERNAME: '김하늘',\r",
                  "    USERPHONE: '01085402697',\r",
                  "    ORDERID: '01234567'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "ac1b84c1-8813-45ce-9598-1c1d836d1268"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "d8237e0f-8e74-4201-bb3f-a107e8b7bd95",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0500\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.eql(\"01085402697\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "// 현재 시간 구하기 (HHmmss)\r",
                  "function getFormattedTime() {\r",
                  "  const now = new Date();\r",
                  "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                  "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                  "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                  "\r",
                  "  return `${hours}${minutes}${seconds}`;\r",
                  "}\r",
                  "\r",
                  "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.eql(\"01234567\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"512028******7294\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"삼성카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%BB%EF%BC%BA%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.eql(\"%EA%B9%3F%3F%3F%3F%3F\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "5e82bbba-ddfb-4037-a12f-05102d40356a"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzccrERjqayECmibASVLCFcu3mtMwnyeSqsDkh6Ok0RVNhbkzCgrGZvyWLuE0qblstQgkt2NYUzE21ScHAo%2BsYJOcT3xCtYEislZjbacyD1Wou68o56siY3%2FOkdyV%2FLh5ZjM%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "Content-Type",
              "value": "application/x-www-form-urlencoded; charset=UTF-8"
            },
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "866ad5a6-230a-4a38-aa4c-1a66e5bfaf3d",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z6luj7bfqfoo3a",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "a703e594-df2b-4ab9-9b78-5b38c4e83d34",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "481"
            },
            {
              "key": "Date",
              "value": "Mon, 05 Jan 2026 06:40:04 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              105,
              110,
              122,
              90,
              79,
              117,
              104,
              37,
              50,
              70,
              73,
              90,
              56,
              73,
              52,
              117,
              100,
              113,
              98,
              71,
              72,
              116,
              66,
              107,
              104,
              103,
              100,
              105,
              37,
              50,
              66,
              77,
              100,
              87,
              117,
              68,
              82,
              87,
              57,
              101,
              107,
              115,
              72,
              103,
              87,
              73,
              68,
              105,
              80,
              66,
              76,
              75,
              108,
              80,
              73,
              70,
              70,
              103,
              104,
              120,
              56,
              48,
              48,
              48,
              75,
              99,
              110,
              77,
              69,
              71,
              116,
              111,
              67,
              76,
              87,
              113,
              116,
              70,
              79,
              77,
              90,
              69,
              108,
              108,
              83,
              68,
              102,
              50,
              37,
              50,
              70,
              51,
              101,
              103,
              105,
              83,
              53,
              97,
              121,
              110,
              119,
              118,
              54,
              75,
              102,
              117,
              81,
              114,
              78,
              115,
              53,
              78,
              88,
              121,
              80,
              88,
              67,
              54,
              89,
              90,
              122,
              50,
              106,
              110,
              65,
              97,
              103,
              50,
              77,
              77,
              98,
              102,
              85,
              85,
              49,
              108,
              51,
              86,
              83,
              50,
              104,
              70,
              97,
              105,
              88,
              103,
              71,
              88,
              109,
              111,
              86,
              80,
              89,
              72,
              117,
              53,
              80,
              67,
              114,
              122,
              119,
              100,
              105,
              48,
              79,
              49,
              68,
              68,
              106,
              117,
              37,
              50,
              66,
              79,
              65,
              81,
              85,
              76,
              98,
              117,
              98,
              118,
              69,
              90,
              117,
              86,
              116,
              116,
              82,
              83,
              51,
              104,
              98,
              101,
              103,
              107,
              107,
              55,
              75,
              75,
              53,
              90,
              84,
              74,
              98,
              71,
              103,
              53,
              88,
              77,
              105,
              55,
              97,
              50,
              110,
              67,
              78,
              101,
              74,
              56,
              83,
              97,
              112,
              79,
              37,
              50,
              70,
              107,
              37,
              50,
              70,
              78,
              87,
              65,
              118,
              85,
              116,
              52,
              37,
              50,
              66,
              67,
              120,
              48,
              69,
              57,
              99,
              106,
              113,
              50,
              53,
              118,
              71,
              98,
              108,
              56,
              49,
              52,
              88,
              77,
              52,
              119,
              37,
              50,
              66,
              107,
              113,
              37,
              50,
              70,
              118,
              112,
              118,
              112,
              80,
              68,
              116,
              53,
              66,
              51,
              89,
              108,
              103,
              109,
              82,
              97,
              48,
              83,
              99,
              122,
              102,
              114,
              76,
              52,
              37,
              50,
              70,
              68,
              105,
              104,
              77,
              66,
              81,
              116,
              37,
              50,
              66,
              83,
              121,
              85,
              85,
              106,
              102,
              67,
              51,
              68,
              101,
              71,
              75,
              87,
              105,
              70,
              86,
              56,
              77,
              80,
              86,
              52,
              99,
              49,
              114,
              118,
              54,
              52,
              119,
              108,
              75,
              100,
              48,
              72,
              116,
              71,
              48,
              37,
              50,
              70,
              90,
              69,
              86,
              68,
              112,
              105,
              78,
              81,
              48,
              108,
              109,
              66,
              80,
              49,
              50,
              84,
              82,
              84,
              119,
              115,
              106,
              111,
              88,
              114,
              114,
              85,
              77,
              103,
              48,
              119,
              99,
              84,
              37,
              50,
              66,
              75,
              107,
              98,
              102,
              68,
              99,
              111,
              89,
              73,
              86,
              118,
              54,
              66,
              88,
              116,
              115,
              101,
              105,
              78,
              54,
              115,
              72,
              55,
              97,
              66,
              108,
              85,
              105,
              105
            ]
          },
          "cookie": [],
          "responseTime": 1526,
          "responseSize": 481
        },
        "id": "514b70da-2ad4-4e09-92c6-21e51f932efe",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) 정상출력",
            "skipped": false,
            "error": {
              "name": "AssertionError",
              "index": 5,
              "test": "매출 발생시간(TRANTIME) 정상출력",
              "message": "expected '154005' to deeply equal '154004'",
              "stack": "AssertionError: expected '154005' to deeply equal '154004'\n   at Object.eval sandbox-script.js:6:4)"
            }
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "07e1778d-05ef-4f48-81c8-4daa87bf019a",
          "length": 21,
          "cycles": 1,
          "position": 4,
          "iteration": 0,
          "httpRequestId": "3d1d5b52-d38a-4e20-bf9a-9c8a3e6035cf"
        },
        "item": {
          "id": "0a7f8ff2-fc90-404a-9ff6-297168eae8fa",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "39a163b8-224c-4d3c-859a-955ad389b147",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "fb736d41-184e-4d53-990e-82044ac3243c"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "2d38274c-dea0-43a0-b849-5462e14139e0",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "efa50524-9dea-4f06-99cd-738b5f3a73f2"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDffL%2BNtAG5PFUBOOKdg1SGbdMe4rxzB1DVK2yZayef3nysCdRGy7fMAf9aD0tadGyo%2FKDrh3N%2BJ35UdZjzwngTjj3Cs9Z6PCXrfbZ5%2BKbOmf"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "a7f7efe6-d3ac-4d97-8c75-7e329a3f7253",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z6luj7bfqfoo3a",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "7c13e7d8-8341-4744-bd99-a285369979d0",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "257"
            },
            {
              "key": "Date",
              "value": "Mon, 05 Jan 2026 06:40:06 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              114,
              78,
              71,
              57,
              86,
              86,
              37,
              50,
              70,
              70,
              68,
              120,
              76,
              114,
              69,
              82,
              56,
              101,
              73,
              97,
              48,
              74,
              84,
              97,
              54,
              52,
              118,
              104,
              78,
              86,
              97,
              100,
              48,
              102,
              100,
              106,
              110,
              108,
              109,
              69,
              108,
              99,
              118,
              65,
              75,
              67,
              87,
              67,
              65,
              86,
              50,
              56,
              115,
              90,
              54,
              88,
              89,
              120,
              98,
              112,
              82,
              101,
              81,
              53,
              83,
              114,
              120,
              80,
              103,
              82,
              102,
              98,
              69,
              71,
              77,
              83,
              122,
              69,
              86,
              111,
              115,
              65,
              52,
              121,
              102,
              67,
              98,
              107,
              97,
              77,
              55,
              76,
              104,
              90,
              89,
              85,
              114,
              106,
              53,
              37,
              50,
              70,
              66,
              82,
              78,
              109,
              104,
              118,
              70,
              116,
              122,
              57,
              84,
              105,
              51,
              49,
              51,
              52,
              104,
              114,
              106,
              52,
              69,
              113,
              73,
              108,
              80,
              66,
              82,
              75,
              100,
              69,
              71,
              111,
              73,
              65,
              70,
              54,
              105,
              104,
              80,
              107,
              121,
              113,
              72,
              86,
              79,
              74,
              67,
              103,
              113,
              118,
              74,
              73,
              37,
              50,
              66,
              100,
              73,
              73,
              56,
              98,
              37,
              50,
              66,
              70,
              116,
              85,
              37,
              50,
              66,
              111,
              101,
              89,
              50,
              76,
              122,
              56,
              83,
              120,
              73,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1453,
          "responseSize": 257
        },
        "id": "0a7f8ff2-fc90-404a-9ff6-297168eae8fa",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "e84036de-be45-49d9-803f-8938ba1ba15f",
          "length": 21,
          "cycles": 1,
          "position": 5,
          "iteration": 0,
          "httpRequestId": "83a038ab-b4a5-4358-b57e-dc780b600c31"
        },
        "item": {
          "id": "a20b5e03-219e-415e-9aa4-bf8682640b2e",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "2e383411-91b1-45c9-b9e3-e8508432547b",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC221222165535557F38'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "3afa0fbb-bda1-4891-b5e8-c23100666286"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "85631852-0f9e-4412-993d-57ecbaaba499",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0400\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "// 현재 시간 구하기 (HHmmss)\r",
                  "function getFormattedTime() {\r",
                  "  const now = new Date();\r",
                  "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                  "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                  "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                  "\r",
                  "  return `${hours}${minutes}${seconds}`;\r",
                  "}\r",
                  "\r",
                  "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                  "console.log(formattedTime)\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"403293******4003\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"현대카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%C7%F6%B4%EB%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "})\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "ba5e99d9-da45-4723-bf7b-0ef1c84c5559"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzceacjSE9wkZ8OEcuyhqS4aTCOgYJsVDSvmkj%2FNDn1RD1w%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "d5c6a52f-72e9-4e77-8836-08cc6c355be5",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z6luj7bfqfoo3a",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "f9d82a8c-5324-47a4-9ab1-8dbb92d11f73",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "431"
            },
            {
              "key": "Date",
              "value": "Mon, 05 Jan 2026 06:40:07 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              53,
              70,
              88,
              84,
              104,
              82,
              70,
              68,
              71,
              122,
              97,
              100,
              67,
              102,
              82,
              75,
              111,
              97,
              74,
              107,
              107,
              50,
              55,
              78,
              97,
              109,
              97,
              54,
              87,
              111,
              56,
              52,
              81,
              100,
              84,
              108,
              107,
              83,
              116,
              106,
              99,
              99,
              112,
              75,
              112,
              73,
              78,
              102,
              86,
              73,
              77,
              111,
              119,
              97,
              109,
              73,
              69,
              115,
              114,
              108,
              114,
              67,
              52,
              101,
              81,
              75,
              84,
              106,
              105,
              100,
              49,
              101,
              111,
              118,
              53,
              74,
              114,
              115,
              80,
              68,
              113,
              86,
              122,
              103,
              98,
              90,
              115,
              116,
              49,
              71,
              108,
              112,
              48,
              66,
              55,
              103,
              114,
              65,
              66,
              55,
              65,
              106,
              55,
              81,
              49,
              103,
              37,
              50,
              70,
              103,
              121,
              57,
              67,
              86,
              49,
              88,
              120,
              82,
              75,
              68,
              115,
              65,
              108,
              82,
              71,
              68,
              71,
              65,
              83,
              74,
              103,
              68,
              51,
              104,
              97,
              55,
              113,
              51,
              79,
              105,
              84,
              65,
              98,
              37,
              50,
              70,
              53,
              79,
              114,
              49,
              114,
              122,
              120,
              72,
              71,
              120,
              82,
              67,
              49,
              68,
              48,
              55,
              90,
              104,
              117,
              83,
              88,
              65,
              53,
              67,
              121,
              108,
              55,
              110,
              110,
              113,
              66,
              56,
              104,
              105,
              107,
              118,
              108,
              101,
              37,
              50,
              66,
              101,
              88,
              52,
              108,
              73,
              37,
              50,
              70,
              105,
              81,
              97,
              102,
              78,
              98,
              108,
              98,
              105,
              119,
              74,
              98,
              83,
              100,
              74,
              80,
              89,
              55,
              52,
              116,
              81,
              77,
              98,
              48,
              118,
              65,
              120,
              108,
              79,
              105,
              109,
              105,
              99,
              98,
              99,
              103,
              57,
              108,
              75,
              55,
              74,
              113,
              115,
              50,
              56,
              85,
              87,
              115,
              115,
              118,
              67,
              112,
              50,
              117,
              52,
              88,
              50,
              106,
              78,
              48,
              109,
              104,
              79,
              37,
              50,
              66,
              88,
              68,
              49,
              111,
              115,
              97,
              49,
              114,
              90,
              80,
              84,
              101,
              76,
              75,
              99,
              53,
              80,
              76,
              88,
              87,
              76,
              112,
              87,
              104,
              65,
              72,
              109,
              120,
              87,
              69,
              69,
              52,
              99,
              74,
              78,
              98,
              54,
              56,
              72,
              69,
              69,
              50,
              57,
              71,
              114,
              53,
              55,
              67,
              86,
              115,
              103,
              83,
              113,
              86,
              80,
              85,
              54,
              74,
              80,
              50,
              90,
              50,
              48,
              85,
              121,
              104,
              110,
              122,
              99,
              79,
              88,
              122,
              65,
              112,
              51,
              55,
              113,
              119,
              113,
              37,
              50,
              70,
              54,
              104,
              90,
              121,
              52,
              101,
              57,
              97,
              110,
              51,
              81,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1290,
          "responseSize": 431
        },
        "id": "a20b5e03-219e-415e-9aa4-bf8682640b2e",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) 정상출력",
            "skipped": false,
            "error": {
              "name": "AssertionError",
              "index": 5,
              "test": "매출 발생시간(TRANTIME) 정상출력",
              "message": "expected '154008' to deeply equal '154007'",
              "stack": "AssertionError: expected '154008' to deeply equal '154007'\n   at Object.eval sandbox-script.js:6:6)"
            }
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "45f9525d-3637-43d3-ad4b-c219c50bbf41",
          "length": 21,
          "cycles": 1,
          "position": 6,
          "iteration": 0,
          "httpRequestId": "ff8f6a69-54da-4091-80f4-bf9ac0128f72"
        },
        "item": {
          "id": "e105dfbc-79c2-456f-97d0-d86cd6abdd62",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "ec82cca0-d47f-4899-a7c6-ff80b993369a",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "2e6ae83d-543b-4d32-880d-b6b2e4cb7903"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "5a8e6684-862a-4a5f-bff3-1f67753b428f",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "8430450f-aa4b-4a28-a8b3-0c750b23f7ee"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDY38e4i7fF2wfwEBUedAko%2BbBgoGFekUhs7iJOSZa52UVCmyKR6R9PT%2BF3LtzSlhhPUETKqE9a0r3JQ3sG4irkuwRCmrU7OjdnfIAePN%2B8zX"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "fdc2ed64-cbeb-4ec1-a304-95892d5b9329",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z6luj7bfqfoo3a",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "8a092253-7762-419f-ac06-686f6b52a5e7",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "259"
            },
            {
              "key": "Date",
              "value": "Mon, 05 Jan 2026 06:40:08 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              114,
              78,
              71,
              57,
              86,
              86,
              37,
              50,
              70,
              70,
              68,
              120,
              76,
              114,
              69,
              82,
              56,
              101,
              73,
              97,
              48,
              74,
              84,
              85,
              107,
              89,
              81,
              81,
              98,
              110,
              81,
              65,
              79,
              118,
              66,
              71,
              104,
              116,
              52,
              108,
              75,
              51,
              71,
              56,
              65,
              105,
              48,
              98,
              108,
              121,
              65,
              119,
              71,
              80,
              113,
              81,
              67,
              108,
              71,
              119,
              52,
              72,
              119,
              90,
              119,
              86,
              48,
              74,
              122,
              88,
              66,
              83,
              111,
              97,
              104,
              111,
              53,
              114,
              66,
              122,
              88,
              69,
              112,
              97,
              114,
              56,
              67,
              107,
              120,
              118,
              99,
              102,
              88,
              121,
              67,
              37,
              50,
              70,
              37,
              50,
              70,
              72,
              55,
              88,
              80,
              121,
              111,
              51,
              104,
              88,
              100,
              89,
              101,
              56,
              117,
              87,
              110,
              98,
              79,
              106,
              106,
              79,
              37,
              50,
              70,
              69,
              75,
              118,
              90,
              52,
              37,
              50,
              70,
              106,
              113,
              103,
              118,
              112,
              49,
              81,
              37,
              50,
              66,
              86,
              83,
              67,
              51,
              70,
              56,
              117,
              113,
              50,
              118,
              67,
              97,
              115,
              100,
              70,
              77,
              48,
              73,
              100,
              89,
              89,
              72,
              104,
              76,
              72,
              90,
              67,
              52,
              90,
              56,
              105,
              114,
              121,
              116,
              69,
              89,
              117,
              121,
              117,
              56,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1285,
          "responseSize": 259
        },
        "id": "e105dfbc-79c2-456f-97d0-d86cd6abdd62",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "dc276691-ac8c-490e-83d7-c177af303138",
          "length": 21,
          "cycles": 1,
          "position": 7,
          "iteration": 0,
          "httpRequestId": "21bfdac0-eab5-438f-917d-8f443794ac32"
        },
        "item": {
          "id": "10d3b6ff-bdb0-499d-8224-aefc3d5c5065",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "df78177d-543e-46d9-ae76-57fe3cb6a21b",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC2507311547242F2CD0'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "16569aed-9f4a-40bc-9491-58b66335abc6"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "aa0809a5-c61d-4021-a49c-909551d0a05d",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0100\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "// 현재 시간 구하기 (HHmmss)\r",
                  "function getFormattedTime() {\r",
                  "  const now = new Date();\r",
                  "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                  "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                  "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                  "\r",
                  "  return `${hours}${minutes}${seconds}`;\r",
                  "}\r",
                  "\r",
                  "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                  "console.log(formattedTime)\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"451842******5446\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"신한카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%BD%C5%C7%D1%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "3e57e026-9f9b-4e47-a0bb-5f09978beb01"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzcfXTTxRRh%2BjuC1%2BxTb3aJM2weIs3zf7UG56%2FZflpkMYeg%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "3824d0ef-3fc0-4e07-8d62-5c96d86112d6",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z6luj7bfqfoo3a",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "8669a0cb-22b2-4fde-b4a1-2f7c53ccec0c",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "441"
            },
            {
              "key": "Date",
              "value": "Mon, 05 Jan 2026 06:40:11 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              70,
              68,
              83,
              99,
              115,
              89,
              118,
              103,
              52,
              89,
              99,
              121,
              83,
              76,
              37,
              50,
              66,
              53,
              78,
              76,
              86,
              78,
              116,
              103,
              97,
              106,
              73,
              108,
              119,
              105,
              83,
              103,
              73,
              89,
              99,
              82,
              80,
              37,
              50,
              66,
              90,
              51,
              53,
              81,
              53,
              57,
              49,
              80,
              53,
              115,
              56,
              55,
              108,
              67,
              117,
              88,
              86,
              53,
              122,
              112,
              90,
              107,
              110,
              51,
              102,
              83,
              108,
              85,
              114,
              120,
              109,
              51,
              112,
              100,
              72,
              81,
              57,
              111,
              66,
              108,
              37,
              50,
              70,
              118,
              49,
              49,
              98,
              103,
              70,
              37,
              50,
              66,
              69,
              120,
              106,
              56,
              71,
              114,
              49,
              107,
              86,
              112,
              119,
              99,
              118,
              121,
              108,
              50,
              117,
              86,
              89,
              116,
              112,
              82,
              86,
              56,
              70,
              48,
              65,
              85,
              51,
              111,
              117,
              80,
              112,
              99,
              102,
              51,
              115,
              72,
              54,
              116,
              70,
              51,
              104,
              120,
              53,
              81,
              87,
              74,
              88,
              114,
              52,
              76,
              90,
              101,
              101,
              74,
              104,
              109,
              85,
              52,
              52,
              113,
              73,
              84,
              70,
              111,
              87,
              54,
              78,
              54,
              37,
              50,
              66,
              117,
              84,
              121,
              68,
              116,
              56,
              86,
              83,
              83,
              83,
              104,
              66,
              52,
              120,
              68,
              37,
              50,
              66,
              76,
              76,
              81,
              89,
              37,
              50,
              70,
              114,
              87,
              49,
              112,
              53,
              106,
              119,
              83,
              66,
              102,
              48,
              112,
              65,
              74,
              116,
              88,
              98,
              79,
              90,
              75,
              75,
              120,
              84,
              121,
              90,
              77,
              85,
              89,
              104,
              99,
              56,
              57,
              55,
              121,
              76,
              113,
              108,
              81,
              66,
              89,
              113,
              87,
              120,
              117,
              88,
              78,
              57,
              80,
              119,
              89,
              74,
              81,
              77,
              117,
              78,
              117,
              83,
              37,
              50,
              66,
              67,
              122,
              50,
              103,
              70,
              76,
              50,
              99,
              83,
              72,
              117,
              83,
              100,
              76,
              50,
              54,
              74,
              85,
              109,
              101,
              112,
              53,
              78,
              55,
              80,
              80,
              37,
              50,
              66,
              109,
              118,
              65,
              86,
              56,
              85,
              78,
              122,
              72,
              37,
              50,
              66,
              71,
              84,
              88,
              90,
              101,
              82,
              76,
              104,
              102,
              104,
              122,
              114,
              97,
              106,
              116,
              87,
              106,
              75,
              104,
              111,
              112,
              77,
              104,
              117,
              53,
              87,
              80,
              120,
              49,
              98,
              122,
              52,
              106,
              80,
              83,
              81,
              109,
              69,
              122,
              82,
              117,
              48,
              77,
              85,
              79,
              88,
              105,
              50,
              67,
              50,
              66,
              69,
              67,
              82,
              121,
              54,
              79,
              50,
              52,
              98,
              105,
              56,
              70,
              109,
              37,
              50,
              70,
              90,
              76,
              55,
              57,
              99,
              103,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1508,
          "responseSize": 441
        },
        "id": "10d3b6ff-bdb0-499d-8224-aefc3d5c5065",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "076daae2-acff-431c-b7e4-af6072e43348",
          "length": 21,
          "cycles": 1,
          "position": 8,
          "iteration": 0,
          "httpRequestId": "113048aa-7f29-4775-ad0e-0f26b1443e0d"
        },
        "item": {
          "id": "7863f025-3e51-4579-9fda-25914af910c8",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "49a1087f-623c-4811-969f-7bebe836b2ac",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "74fc8e83-42eb-40a5-972f-c9138ec37028"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "9aa982c1-3ddf-4e2c-9c03-28215bef7b8d",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "d9c4274a-c7e9-42be-8e17-778057616d86"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDUJGXbOWDbPLf4%2BmzFXufYNRPzxN9Nfxqb9XyU7alpUA1Uopvd9roqZFspfjiGNWdWypoUys%2FGj1WtdmqbJXCZClbEVSDSrqvOXkl5X%2B0Rov"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "215ef50d-2e9f-4e90-b4da-7e3934ac0635",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z6luj7bfqfoo3a",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "9e242f86-5093-46a3-8d7f-16c2ea21c95b",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "255"
            },
            {
              "key": "Date",
              "value": "Mon, 05 Jan 2026 06:40:13 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              114,
              78,
              71,
              57,
              86,
              86,
              37,
              50,
              70,
              70,
              68,
              120,
              76,
              114,
              69,
              82,
              56,
              101,
              73,
              97,
              48,
              74,
              84,
              84,
              86,
              89,
              80,
              98,
              88,
              49,
              101,
              48,
              82,
              77,
              122,
              100,
              116,
              48,
              115,
              106,
              114,
              81,
              90,
              109,
              120,
              105,
              49,
              117,
              114,
              82,
              56,
              50,
              50,
              55,
              69,
              83,
              73,
              82,
              121,
              115,
              101,
              122,
              72,
              98,
              102,
              68,
              56,
              66,
              83,
              120,
              71,
              51,
              83,
              67,
              103,
              112,
              68,
              99,
              101,
              122,
              117,
              118,
              87,
              77,
              79,
              37,
              50,
              66,
              70,
              119,
              104,
              72,
              70,
              80,
              70,
              80,
              99,
              114,
              50,
              54,
              119,
              37,
              50,
              70,
              76,
              83,
              114,
              54,
              97,
              115,
              74,
              110,
              120,
              67,
              56,
              89,
              85,
              89,
              68,
              53,
              77,
              57,
              69,
              117,
              121,
              90,
              73,
              80,
              66,
              120,
              67,
              88,
              87,
              118,
              112,
              48,
              110,
              89,
              117,
              99,
              87,
              74,
              99,
              54,
              102,
              37,
              50,
              66,
              66,
              48,
              48,
              103,
              117,
              87,
              54,
              85,
              119,
              100,
              87,
              66,
              77,
              57,
              113,
              102,
              78,
              115,
              70,
              55,
              54,
              105,
              48,
              76,
              49,
              111,
              88,
              57,
              51,
              116,
              81,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1674,
          "responseSize": 255
        },
        "id": "7863f025-3e51-4579-9fda-25914af910c8",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "27fb9519-3821-4ef8-92ff-7e7e0628a4aa",
          "length": 21,
          "cycles": 1,
          "position": 9,
          "iteration": 0,
          "httpRequestId": "a2fb1732-e8e4-41ca-9208-01f78eb6b6d1"
        },
        "item": {
          "id": "501b8808-3f20-4dfc-b522-8d19dc2521d0",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "be8ca9a1-595c-4a82-9d3b-4a25356dae85",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC2512151528144A426D'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "2f819185-36b3-497c-abde-d10eb911d87d"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "49461602-26db-4f04-9dbb-e0e60a986d53",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0800\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "// 현재 시간 구하기 (HHmmss)\r",
                  "function getFormattedTime() {\r",
                  "  const now = new Date();\r",
                  "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                  "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                  "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                  "\r",
                  "  return `${hours}${minutes}${seconds}`;\r",
                  "}\r",
                  "\r",
                  "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"542586******3820\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "// \"NH농협카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"NH%B3%F3%C7%F9%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "76267ec6-da69-4149-8e13-b4a0169fb274"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzcfqMk1YAIjfTKOzEfoXN7bENBxmDICbQksXQP2fAKPCnw%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "64150095-978a-4c47-97f6-1ea09772ff87",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z6luj7bfqfoo3a",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "ccd30680-f63d-47d3-b26e-d30d127df27a",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "437"
            },
            {
              "key": "Date",
              "value": "Mon, 05 Jan 2026 06:40:15 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              99,
              76,
              50,
              56,
              105,
              65,
              113,
              66,
              53,
              66,
              111,
              70,
              106,
              117,
              107,
              121,
              103,
              65,
              54,
              55,
              109,
              85,
              67,
              50,
              70,
              48,
              53,
              68,
              66,
              80,
              70,
              70,
              68,
              122,
              82,
              81,
              118,
              69,
              37,
              50,
              70,
              84,
              113,
              106,
              37,
              50,
              70,
              78,
              122,
              107,
              88,
              81,
              110,
              81,
              79,
              54,
              70,
              67,
              50,
              103,
              108,
              71,
              68,
              111,
              83,
              97,
              117,
              107,
              122,
              68,
              87,
              108,
              116,
              71,
              115,
              76,
              90,
              55,
              37,
              50,
              66,
              56,
              116,
              74,
              87,
              114,
              77,
              53,
              90,
              87,
              109,
              110,
              71,
              75,
              90,
              49,
              76,
              110,
              89,
              74,
              100,
              65,
              100,
              72,
              119,
              52,
              72,
              71,
              85,
              83,
              104,
              119,
              75,
              77,
              85,
              75,
              79,
              69,
              37,
              50,
              70,
              68,
              82,
              71,
              71,
              88,
              71,
              82,
              111,
              104,
              82,
              71,
              100,
              53,
              66,
              122,
              54,
              122,
              71,
              89,
              82,
              101,
              114,
              78,
              111,
              120,
              55,
              71,
              37,
              50,
              70,
              86,
              121,
              102,
              78,
              75,
              56,
              55,
              106,
              81,
              74,
              109,
              80,
              51,
              101,
              120,
              117,
              106,
              71,
              89,
              69,
              120,
              57,
              83,
              77,
              116,
              87,
              75,
              81,
              120,
              112,
              69,
              84,
              80,
              103,
              50,
              54,
              119,
              55,
              67,
              65,
              108,
              53,
              53,
              82,
              75,
              103,
              113,
              120,
              85,
              98,
              103,
              113,
              57,
              81,
              73,
              49,
              65,
              90,
              57,
              98,
              37,
              50,
              70,
              53,
              69,
              75,
              53,
              109,
              107,
              90,
              104,
              83,
              110,
              121,
              103,
              113,
              113,
              81,
              119,
              80,
              120,
              118,
              87,
              37,
              50,
              66,
              52,
              68,
              100,
              112,
              87,
              79,
              52,
              99,
              102,
              102,
              78,
              118,
              110,
              100,
              69,
              103,
              50,
              89,
              67,
              50,
              76,
              99,
              65,
              111,
              116,
              120,
              50,
              84,
              104,
              68,
              57,
              55,
              117,
              112,
              116,
              72,
              53,
              119,
              101,
              53,
              65,
              89,
              101,
              70,
              120,
              122,
              84,
              75,
              110,
              90,
              111,
              110,
              50,
              108,
              113,
              90,
              65,
              70,
              65,
              90,
              54,
              67,
              106,
              113,
              114,
              49,
              71,
              53,
              78,
              90,
              79,
              87,
              52,
              122,
              117,
              83,
              86,
              73,
              49,
              85,
              49,
              73,
              111,
              109,
              72,
              37,
              50,
              66,
              65,
              65,
              118,
              115,
              113,
              52,
              69,
              51,
              54,
              108,
              74,
              103,
              109,
              109,
              113,
              97,
              67,
              105,
              82,
              82,
              84,
              53,
              70,
              37,
              50,
              66,
              113,
              99,
              81,
              97,
              83,
              107,
              68,
              86,
              119,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 2009,
          "responseSize": 437
        },
        "id": "501b8808-3f20-4dfc-b522-8d19dc2521d0",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "bb54826e-e54a-4934-87d8-2fd8872e014b",
          "length": 21,
          "cycles": 1,
          "position": 10,
          "iteration": 0,
          "httpRequestId": "7b7cf2f2-8986-4578-91e2-676eb293d3cb"
        },
        "item": {
          "id": "3696f654-f975-46e4-bd1b-70cdf25ab376",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "18da0f0c-d8f0-44ec-a464-cba23af6bbaa",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "ebe0f58f-83cf-4561-91db-bcadc5bcb520"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "90fb2fca-0ad3-4e39-b781-4c9abbfcba6f",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "a1a24a83-f818-447b-88f7-096f1722156e"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDX27v4zzE00ASMAtR7WXxrBEXb3Mcck3m8MVM7ehw2r03G8skjVu5O00YCWGfIM%2BqS6CHjDLGaGj%2B3eEPEHh9Nce%2FY6vCO0vqSCwclC9bM6L"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "011d1ff5-67a1-4e7e-8faa-ee2eb60a4dee",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z6luj7bfqfoo3a",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "24ffd6c8-5b07-46b6-9503-14f965f4c382",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "261"
            },
            {
              "key": "Date",
              "value": "Mon, 05 Jan 2026 06:40:16 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              114,
              78,
              71,
              57,
              86,
              86,
              37,
              50,
              70,
              70,
              68,
              120,
              76,
              114,
              69,
              82,
              56,
              101,
              73,
              97,
              48,
              74,
              84,
              84,
              102,
              99,
              72,
              97,
              116,
              98,
              75,
              86,
              88,
              56,
              89,
              70,
              108,
              108,
              53,
              113,
              65,
              113,
              86,
              87,
              65,
              102,
              67,
              113,
              66,
              118,
              37,
              50,
              70,
              121,
              37,
              50,
              66,
              97,
              100,
              37,
              50,
              66,
              65,
              108,
              79,
              86,
              56,
              98,
              112,
              50,
              117,
              119,
              100,
              52,
              115,
              106,
              102,
              73,
              114,
              67,
              105,
              105,
              117,
              55,
              105,
              49,
              122,
              85,
              37,
              50,
              70,
              112,
              111,
              50,
              53,
              97,
              122,
              115,
              71,
              115,
              103,
              109,
              90,
              112,
              75,
              67,
              106,
              67,
              55,
              68,
              102,
              118,
              102,
              116,
              109,
              107,
              114,
              102,
              70,
              54,
              68,
              97,
              101,
              37,
              50,
              70,
              103,
              74,
              99,
              71,
              55,
              121,
              73,
              79,
              56,
              55,
              115,
              48,
              76,
              72,
              118,
              37,
              50,
              70,
              70,
              115,
              87,
              100,
              71,
              55,
              78,
              53,
              119,
              100,
              56,
              82,
              107,
              104,
              55,
              56,
              76,
              72,
              85,
              119,
              106,
              112,
              53,
              122,
              84,
              76,
              65,
              69,
              83,
              102,
              67,
              122,
              75,
              99,
              73,
              74,
              99,
              114,
              88,
              84,
              119,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1414,
          "responseSize": 261
        },
        "id": "3696f654-f975-46e4-bd1b-70cdf25ab376",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "57beae52-3cce-4093-8a20-7505bd631368",
          "length": 21,
          "cycles": 1,
          "position": 11,
          "iteration": 0,
          "httpRequestId": "8d698eb6-5811-47ad-85be-edf287849d6b"
        },
        "item": {
          "id": "c2ce4a00-4f3a-4f53-92d8-fb97ebad2513",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "7483840e-1a60-4707-9704-605304851b80",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC250804165745DBD04E'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "9ee855ff-bac6-4183-853a-4d2120ff7b91"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "72572743-cf45-4989-9cfd-29a368220174",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0300\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "// 현재 시간 구하기 (HHmmss)\r",
                  "function getFormattedTime() {\r",
                  "  const now = new Date();\r",
                  "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                  "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                  "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                  "\r",
                  "  return `${hours}${minutes}${seconds}`;\r",
                  "}\r",
                  "\r",
                  "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                  "console.log(formattedTime)\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"540926******6041'\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"삼성카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"KB%B1%B9%B9%CE%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "aac11d75-783d-4462-b3ea-6b4f0bd3354a"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzccTXfPyWymzriWFq4iqdmp99Wj2bHxTvGvcdoWGjKzABQ%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "90601954-3890-4be3-a57a-ef5dcfaf4bd3",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z6luj7bfqfoo3a",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "0c5429f1-9cda-4279-8c02-1c3d970156e0",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "435"
            },
            {
              "key": "Date",
              "value": "Mon, 05 Jan 2026 06:40:18 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              109,
              37,
              50,
              66,
              54,
              71,
              66,
              89,
              57,
              107,
              74,
              81,
              114,
              116,
              99,
              83,
              88,
              121,
              89,
              70,
              120,
              69,
              57,
              101,
              122,
              67,
              73,
              71,
              78,
              109,
              49,
              55,
              108,
              119,
              119,
              48,
              48,
              122,
              78,
              50,
              77,
              79,
              110,
              112,
              52,
              119,
              85,
              66,
              73,
              83,
              122,
              69,
              100,
              81,
              90,
              83,
              79,
              69,
              72,
              78,
              111,
              69,
              51,
              76,
              110,
              67,
              80,
              90,
              57,
              87,
              109,
              101,
              55,
              56,
              89,
              103,
              98,
              55,
              115,
              105,
              53,
              67,
              69,
              104,
              67,
              107,
              56,
              86,
              70,
              115,
              81,
              83,
              81,
              100,
              97,
              102,
              74,
              108,
              66,
              120,
              118,
              108,
              117,
              51,
              76,
              71,
              111,
              84,
              115,
              115,
              90,
              111,
              112,
              89,
              50,
              85,
              53,
              90,
              108,
              79,
              48,
              86,
              68,
              80,
              111,
              56,
              112,
              85,
              85,
              50,
              111,
              37,
              50,
              70,
              90,
              51,
              79,
              118,
              90,
              85,
              115,
              70,
              90,
              79,
              119,
              67,
              74,
              90,
              104,
              48,
              102,
              57,
              48,
              105,
              122,
              89,
              87,
              109,
              70,
              81,
              84,
              111,
              103,
              90,
              76,
              69,
              84,
              122,
              107,
              103,
              80,
              100,
              79,
              80,
              76,
              56,
              86,
              52,
              102,
              82,
              83,
              99,
              88,
              111,
              37,
              50,
              70,
              87,
              56,
              74,
              72,
              89,
              78,
              103,
              72,
              79,
              72,
              122,
              89,
              68,
              37,
              50,
              70,
              120,
              111,
              56,
              49,
              120,
              105,
              53,
              81,
              107,
              121,
              73,
              37,
              50,
              66,
              97,
              116,
              105,
              104,
              48,
              111,
              53,
              116,
              57,
              108,
              79,
              67,
              78,
              118,
              65,
              66,
              105,
              75,
              109,
              77,
              48,
              70,
              103,
              98,
              48,
              54,
              56,
              97,
              100,
              97,
              81,
              78,
              109,
              86,
              121,
              71,
              116,
              79,
              70,
              57,
              72,
              69,
              103,
              79,
              105,
              113,
              122,
              103,
              100,
              65,
              79,
              108,
              68,
              106,
              105,
              107,
              111,
              110,
              74,
              56,
              70,
              37,
              50,
              70,
              50,
              67,
              72,
              113,
              116,
              82,
              54,
              119,
              112,
              66,
              79,
              68,
              114,
              74,
              78,
              68,
              116,
              97,
              70,
              80,
              50,
              56,
              111,
              48,
              100,
              65,
              56,
              68,
              120,
              119,
              65,
              84,
              55,
              72,
              75,
              81,
              76,
              114,
              102,
              111,
              73,
              48,
              56,
              72,
              37,
              50,
              66,
              52,
              85,
              37,
              50,
              66,
              66,
              97,
              70,
              72,
              79,
              65,
              86,
              76,
              109,
              55,
              55,
              102,
              110,
              103,
              99,
              66,
              97,
              83,
              78,
              49,
              53,
              55,
              48,
              98,
              119,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1403,
          "responseSize": 435
        },
        "id": "c2ce4a00-4f3a-4f53-92d8-fb97ebad2513",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "보증금 금액(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false,
            "error": {
              "name": "AssertionError",
              "index": 12,
              "test": "카드번호(CARDNO) 정상출력",
              "message": "expected '540926******6041' to deeply equal '540926******6041\\''",
              "stack": "AssertionError: expected '540926******6041' to deeply equal '540926******6041\\''\n   at Object.eval sandbox-script.js:13:12)"
            }
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "436818ce-a9ec-4571-8f3f-0f4e185f590a",
          "length": 21,
          "cycles": 1,
          "position": 12,
          "iteration": 0,
          "httpRequestId": "ad74e629-1cc0-496d-876d-63de5d772088"
        },
        "item": {
          "id": "757d0b67-7e27-49f0-ac27-f1d2fab57268",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "f85b519c-193e-4a8c-9583-d367d1057d4b",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "fe7c1fd1-bcab-4de9-9e51-2ddafdecc3bd"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "bc677fc4-15ac-4f2d-85f6-3ea65a1a06c6",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "5a2acc92-8f3b-4b26-8d14-74287aee4ff9"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDYysB%2BqUpadZzP5WtkIPqlO30pHl8oxhUhYRCnhMkBWsEbKmysAB8An5jM7Obbqw%2BMk6v879tAT78S%2FSEpvx2a6kzdivux%2BuyWooKH7hwSlZ"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "45288040-1863-4de6-9f21-7db5147d7029",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z6luj7bfqfoo3a",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "bce2d58c-ffd8-4f54-aca3-289fde7b65d4",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "261"
            },
            {
              "key": "Date",
              "value": "Mon, 05 Jan 2026 06:40:19 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              114,
              78,
              71,
              57,
              86,
              86,
              37,
              50,
              70,
              70,
              68,
              120,
              76,
              114,
              69,
              82,
              56,
              101,
              73,
              97,
              48,
              74,
              84,
              85,
              56,
              113,
              56,
              50,
              69,
              50,
              65,
              106,
              114,
              70,
              106,
              70,
              82,
              82,
              97,
              54,
              122,
              69,
              102,
              110,
              83,
              114,
              113,
              65,
              97,
              79,
              84,
              37,
              50,
              66,
              88,
              56,
              99,
              116,
              74,
              66,
              79,
              122,
              80,
              50,
              37,
              50,
              66,
              114,
              119,
              120,
              108,
              98,
              117,
              112,
              55,
              102,
              55,
              76,
              97,
              53,
              84,
              87,
              113,
              88,
              119,
              76,
              72,
              84,
              84,
              37,
              50,
              66,
              99,
              72,
              121,
              85,
              104,
              111,
              37,
              50,
              70,
              66,
              100,
              86,
              119,
              108,
              67,
              81,
              52,
              99,
              66,
              88,
              102,
              37,
              50,
              66,
              97,
              89,
              81,
              57,
              69,
              103,
              49,
              101,
              106,
              88,
              71,
              74,
              50,
              70,
              56,
              115,
              90,
              37,
              50,
              70,
              55,
              116,
              89,
              122,
              51,
              86,
              99,
              107,
              119,
              98,
              66,
              90,
              57,
              70,
              56,
              121,
              87,
              84,
              71,
              116,
              117,
              78,
              116,
              71,
              50,
              69,
              76,
              112,
              113,
              77,
              111,
              50,
              56,
              86,
              109,
              79,
              71,
              121,
              87,
              106,
              107,
              89,
              55,
              70,
              103,
              121,
              114,
              105,
              69,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1676,
          "responseSize": 261
        },
        "id": "757d0b67-7e27-49f0-ac27-f1d2fab57268",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "9d136072-3a59-4805-9064-b855d5e1661d",
          "length": 21,
          "cycles": 1,
          "position": 13,
          "iteration": 0,
          "httpRequestId": "7e485cb1-b1e5-4e48-a152-f61f5a213bf4"
        },
        "item": {
          "id": "cc3ff19d-a6e3-400e-ae19-fc6aa4d07ec8",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "8941c2c4-a343-489a-8a22-d6a3caaadfe6",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC25080416595836B04B'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "d6277e02-11c4-4acd-bc4b-576c7685bb73"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "a1ca991b-a2c0-4833-9871-fdbc7051457f",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0202\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "// 현재 시간 구하기 (HHmmss)\r",
                  "function getFormattedTime() {\r",
                  "  const now = new Date();\r",
                  "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                  "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                  "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                  "\r",
                  "  return `${hours}${minutes}${seconds}`;\r",
                  "}\r",
                  "\r",
                  "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                  "console.log(formattedTime)\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"538920******1226\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"삼성카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%BF%EC%B8%AEBC%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "9563fba1-f000-421a-8413-ea13985c51b3"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzccVRR%2FtepSx6ESumfhyCleVEPVKGpunFtzDUwUlJoNVsg%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "8d6238a5-d735-4658-8256-6a85fedc17a7",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z6luj7bfqfoo3a",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "7f113439-ff85-4847-a47d-25743c72d793",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "433"
            },
            {
              "key": "Date",
              "value": "Mon, 05 Jan 2026 06:40:21 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              78,
              114,
              70,
              88,
              55,
              77,
              67,
              119,
              78,
              65,
              115,
              52,
              121,
              105,
              104,
              76,
              107,
              51,
              90,
              57,
              118,
              50,
              49,
              37,
              50,
              66,
              121,
              98,
              68,
              99,
              88,
              122,
              119,
              120,
              80,
              105,
              55,
              104,
              74,
              83,
              84,
              49,
              51,
              117,
              70,
              54,
              37,
              50,
              66,
              121,
              76,
              103,
              66,
              88,
              71,
              101,
              109,
              101,
              103,
              101,
              106,
              70,
              74,
              115,
              55,
              82,
              80,
              121,
              55,
              84,
              118,
              104,
              72,
              109,
              56,
              97,
              104,
              55,
              97,
              73,
              117,
              68,
              78,
              100,
              108,
              100,
              87,
              72,
              53,
              67,
              51,
              114,
              97,
              97,
              52,
              53,
              87,
              75,
              70,
              77,
              55,
              65,
              78,
              105,
              68,
              90,
              69,
              111,
              37,
              50,
              70,
              104,
              83,
              65,
              120,
              114,
              77,
              69,
              109,
              97,
              71,
              112,
              108,
              71,
              119,
              98,
              102,
              77,
              54,
              72,
              102,
              101,
              111,
              51,
              49,
              87,
              114,
              89,
              52,
              122,
              117,
              113,
              49,
              72,
              48,
              81,
              73,
              120,
              121,
              57,
              98,
              81,
              122,
              81,
              53,
              37,
              50,
              66,
              81,
              66,
              83,
              72,
              77,
              104,
              72,
              90,
              79,
              51,
              87,
              49,
              73,
              74,
              81,
              37,
              50,
              66,
              108,
              82,
              85,
              89,
              84,
              121,
              120,
              71,
              104,
              98,
              68,
              87,
              106,
              55,
              77,
              78,
              121,
              52,
              103,
              111,
              113,
              118,
              81,
              114,
              73,
              116,
              119,
              49,
              66,
              97,
              103,
              120,
              49,
              114,
              102,
              80,
              88,
              89,
              111,
              88,
              102,
              87,
              83,
              113,
              85,
              87,
              110,
              89,
              80,
              108,
              116,
              87,
              76,
              67,
              75,
              82,
              66,
              119,
              77,
              65,
              87,
              78,
              117,
              117,
              88,
              37,
              50,
              66,
              105,
              81,
              90,
              70,
              51,
              109,
              103,
              113,
              104,
              114,
              98,
              120,
              85,
              71,
              83,
              99,
              68,
              114,
              82,
              109,
              101,
              114,
              120,
              56,
              80,
              49,
              99,
              102,
              48,
              79,
              83,
              78,
              73,
              50,
              65,
              66,
              110,
              110,
              76,
              84,
              52,
              119,
              80,
              121,
              120,
              72,
              120,
              97,
              106,
              84,
              102,
              57,
              122,
              49,
              50,
              71,
              116,
              89,
              48,
              119,
              79,
              97,
              108,
              90,
              101,
              53,
              90,
              83,
              56,
              81,
              87,
              97,
              80,
              80,
              76,
              109,
              37,
              50,
              70,
              89,
              87,
              80,
              66,
              97,
              118,
              98,
              51,
              81,
              110,
              99,
              108,
              56,
              114,
              106,
              101,
              50,
              66,
              108,
              107,
              120,
              98,
              73,
              104,
              105,
              100,
              67,
              83,
              51,
              85,
              81,
              90,
              81,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1825,
          "responseSize": 433
        },
        "id": "cc3ff19d-a6e3-400e-ae19-fc6aa4d07ec8",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "보증금 금액(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "78984e83-91ca-4d3d-8502-0962d9fadf46",
          "length": 21,
          "cycles": 1,
          "position": 14,
          "iteration": 0,
          "httpRequestId": "8923671d-82ae-44e0-9b62-95a49948ffa6"
        },
        "item": {
          "id": "e2958a3c-4236-463e-9f7f-4ac585e23d48",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "81f8ece3-52bd-40d5-bb8a-a66727350c97",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "d00b4ea3-cf61-4daa-bcff-1ea0e2b28cfd"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "6cd7b12e-001d-45fa-84d2-cef22e5a7c9c",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "e3f2b336-96dd-4697-a767-b232357186c6"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDahSG%2F7%2FkgHTYrWgoVan7Tkm58ShITiGd3fWl%2BoczL8Pv1%2Fx2Ao7oYTHRM3Wla7XcM5cozldJprEiy5sZdBNDuwB%2FSgJVwQ9%2BroR1Xq0Y1y6"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "eb747789-ba10-42ed-bca0-2fe862ee1504",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z6luj7bfqfoo3a",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "843a31a8-bcde-4b0b-889d-beb07a8dd16e",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "261"
            },
            {
              "key": "Date",
              "value": "Mon, 05 Jan 2026 06:40:23 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              114,
              78,
              71,
              57,
              86,
              86,
              37,
              50,
              70,
              70,
              68,
              120,
              76,
              114,
              69,
              82,
              56,
              101,
              73,
              97,
              48,
              74,
              84,
              89,
              53,
              116,
              121,
              78,
              87,
              68,
              74,
              71,
              55,
              81,
              68,
              119,
              65,
              37,
              50,
              66,
              102,
              100,
              88,
              99,
              49,
              113,
              117,
              84,
              81,
              115,
              37,
              50,
              66,
              118,
              101,
              49,
              82,
              76,
              83,
              54,
              103,
              65,
              114,
              104,
              37,
              50,
              66,
              89,
              114,
              37,
              50,
              70,
              76,
              70,
              113,
              65,
              55,
              110,
              71,
              84,
              48,
              57,
              80,
              88,
              110,
              113,
              48,
              118,
              69,
              49,
              105,
              103,
              103,
              107,
              76,
              77,
              114,
              68,
              76,
              98,
              99,
              70,
              87,
              85,
              57,
              49,
              48,
              84,
              73,
              65,
              48,
              54,
              110,
              73,
              104,
              98,
              87,
              53,
              82,
              120,
              68,
              100,
              107,
              109,
              77,
              50,
              105,
              88,
              55,
              115,
              50,
              101,
              106,
              72,
              113,
              89,
              73,
              103,
              85,
              110,
              37,
              50,
              70,
              112,
              80,
              72,
              83,
              90,
              72,
              70,
              79,
              119,
              52,
              85,
              112,
              37,
              50,
              66,
              115,
              122,
              104,
              75,
              77,
              87,
              120,
              48,
              81,
              77,
              49,
              85,
              55,
              71,
              87,
              113,
              65,
              98,
              75,
              116,
              68,
              56,
              78,
              112,
              66,
              83,
              65,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1617,
          "responseSize": 261
        },
        "id": "e2958a3c-4236-463e-9f7f-4ac585e23d48",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "3e66fe23-2fe6-48c4-8a04-a71cf189436c",
          "length": 21,
          "cycles": 1,
          "position": 15,
          "iteration": 0,
          "httpRequestId": "cc7da685-02a3-46db-a80b-4f9f19a35399"
        },
        "item": {
          "id": "eab75afe-1450-4560-962f-db53beb0490a",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "a64b14a6-e4a7-4f56-832f-5ca543444978",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC251215145003CEDD72'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "c2e89710-1b13-4bea-a14c-96b57fd3bf10"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "50151dfa-ba33-4f4a-a6fe-72f4f52eaa50",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0907\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "// 현재 시간 구하기 (HHmmss)\r",
                  "function getFormattedTime() {\r",
                  "  const now = new Date();\r",
                  "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                  "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                  "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                  "\r",
                  "  return `${hours}${minutes}${seconds}`;\r",
                  "}\r",
                  "\r",
                  "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                  "console.log(formattedTime)\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"624404******8380\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"롯데카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%BF%EC%B8%AE%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "8ef36597-53ae-4e45-89ce-0181e7831d9f"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzcextrJriQhf%2FIUYtULhB8bH62Qdp0SGru%2BMd63vyNOLHA%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "963d195f-6b20-4d24-b23b-d87b5b302c48",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z6luj7bfqfoo3a",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "4bf1e820-0881-47ec-8694-20221c7d6141",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "455"
            },
            {
              "key": "Date",
              "value": "Mon, 05 Jan 2026 06:40:25 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              67,
              69,
              86,
              56,
              88,
              48,
              116,
              51,
              118,
              77,
              102,
              108,
              57,
              65,
              84,
              99,
              48,
              69,
              103,
              77,
              86,
              103,
              115,
              37,
              50,
              66,
              83,
              101,
              50,
              37,
              50,
              66,
              77,
              83,
              68,
              103,
              54,
              37,
              50,
              70,
              71,
              37,
              50,
              70,
              104,
              97,
              117,
              48,
              73,
              72,
              66,
              83,
              55,
              86,
              119,
              37,
              50,
              66,
              56,
              120,
              100,
              68,
              83,
              68,
              57,
              89,
              106,
              75,
              119,
              56,
              70,
              100,
              103,
              90,
              70,
              82,
              98,
              82,
              48,
              101,
              51,
              73,
              57,
              98,
              55,
              114,
              37,
              50,
              66,
              37,
              50,
              70,
              114,
              85,
              112,
              90,
              69,
              67,
              49,
              89,
              67,
              121,
              106,
              55,
              53,
              69,
              52,
              72,
              104,
              65,
              118,
              37,
              50,
              70,
              88,
              110,
              90,
              66,
              105,
              79,
              107,
              114,
              79,
              100,
              82,
              122,
              98,
              109,
              108,
              90,
              37,
              50,
              66,
              99,
              107,
              89,
              71,
              48,
              77,
              101,
              67,
              51,
              104,
              53,
              86,
              110,
              37,
              50,
              70,
              57,
              72,
              50,
              109,
              100,
              80,
              57,
              119,
              51,
              37,
              50,
              70,
              49,
              50,
              68,
              50,
              69,
              76,
              103,
              78,
              82,
              108,
              86,
              37,
              50,
              66,
              76,
              90,
              71,
              76,
              102,
              81,
              110,
              115,
              67,
              106,
              122,
              104,
              106,
              118,
              111,
              102,
              51,
              106,
              81,
              52,
              51,
              101,
              37,
              50,
              66,
              86,
              57,
              53,
              37,
              50,
              66,
              50,
              100,
              113,
              88,
              105,
              110,
              117,
              65,
              56,
              101,
              79,
              76,
              80,
              100,
              110,
              49,
              87,
              86,
              78,
              81,
              50,
              68,
              69,
              84,
              49,
              102,
              65,
              50,
              53,
              65,
              97,
              78,
              74,
              87,
              65,
              72,
              51,
              99,
              48,
              122,
              117,
              90,
              37,
              50,
              66,
              77,
              75,
              97,
              76,
              113,
              48,
              100,
              88,
              101,
              115,
              102,
              53,
              110,
              99,
              72,
              109,
              116,
              101,
              53,
              53,
              84,
              49,
              83,
              120,
              74,
              67,
              102,
              75,
              90,
              52,
              117,
              111,
              122,
              37,
              50,
              70,
              70,
              122,
              69,
              67,
              81,
              56,
              116,
              68,
              37,
              50,
              66,
              100,
              66,
              116,
              111,
              99,
              52,
              69,
              56,
              115,
              53,
              107,
              77,
              52,
              100,
              101,
              113,
              115,
              69,
              76,
              80,
              116,
              109,
              104,
              69,
              98,
              89,
              110,
              72,
              102,
              67,
              111,
              105,
              78,
              85,
              88,
              113,
              65,
              116,
              72,
              81,
              97,
              75,
              104,
              70,
              117,
              115,
              99,
              69,
              85,
              122,
              74,
              53,
              110,
              112,
              57,
              70,
              66,
              121,
              113,
              114,
              106,
              104,
              50,
              120,
              53,
              104,
              53,
              75,
              85,
              49,
              37,
              50,
              66,
              118,
              109,
              97,
              104,
              119,
              72,
              65,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1348,
          "responseSize": 455
        },
        "id": "eab75afe-1450-4560-962f-db53beb0490a",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "보증금 금액(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "43d37faa-1f8d-450e-9e5d-bd4205fd548c",
          "length": 21,
          "cycles": 1,
          "position": 16,
          "iteration": 0,
          "httpRequestId": "d4e27b94-584a-4512-b893-88af1cc2a5dc"
        },
        "item": {
          "id": "8f7421ca-fbdb-42ce-915b-6c6fdd0248d9",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "caaa6572-d13d-4134-80ef-6f426475d3b7",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "8921d367-27b8-4941-9d61-20a9fb75b187"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "78f2bbdb-56c0-4db7-9a5a-df2c685db715",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "157c78bf-b5a0-4073-bece-08920c394240"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDXaZdG%2Bqz8msKX3UW50LvwU0P%2FSvJ4MMqdQmj3g2NutoNkoUpRVKMl90b2Zmoyv8D0ZvxKc0PkkTTHzVohuUYaXiYlrLZee7lS2xGN7csneg"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "fb80496f-5e1d-40c4-bffc-ba078f68b717",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z6luj7bfqfoo3a",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "fc18e86e-8a41-46d4-8832-87bc66b3c47b",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "255"
            },
            {
              "key": "Date",
              "value": "Mon, 05 Jan 2026 06:40:27 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              114,
              78,
              71,
              57,
              86,
              86,
              37,
              50,
              70,
              70,
              68,
              120,
              76,
              114,
              69,
              82,
              56,
              101,
              73,
              97,
              48,
              74,
              84,
              89,
              49,
              83,
              79,
              88,
              114,
              112,
              56,
              70,
              86,
              98,
              75,
              81,
              50,
              37,
              50,
              70,
              99,
              55,
              117,
              37,
              50,
              66,
              82,
              119,
              51,
              73,
              78,
              99,
              103,
              79,
              79,
              104,
              84,
              103,
              109,
              100,
              86,
              114,
              57,
              85,
              90,
              76,
              55,
              110,
              109,
              53,
              48,
              113,
              83,
              82,
              120,
              82,
              121,
              55,
              80,
              119,
              117,
              102,
              84,
              73,
              79,
              87,
              113,
              50,
              112,
              82,
              87,
              73,
              85,
              101,
              107,
              99,
              77,
              79,
              50,
              70,
              121,
              90,
              73,
              106,
              79,
              106,
              50,
              83,
              122,
              97,
              55,
              105,
              82,
              71,
              89,
              65,
              88,
              97,
              79,
              88,
              118,
              90,
              117,
              55,
              50,
              37,
              50,
              66,
              50,
              75,
              67,
              81,
              69,
              122,
              102,
              50,
              66,
              53,
              115,
              56,
              48,
              77,
              74,
              121,
              98,
              104,
              65,
              53,
              70,
              104,
              81,
              97,
              76,
              72,
              74,
              116,
              102,
              81,
              71,
              73,
              57,
              102,
              90,
              101,
              85,
              65,
              108,
              65,
              73,
              75,
              49,
              100,
              73,
              82,
              109,
              55,
              55,
              56,
              77,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1306,
          "responseSize": 255
        },
        "id": "8f7421ca-fbdb-42ce-915b-6c6fdd0248d9",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "c8572468-84b5-4040-83e1-3b6a7d0a2cff",
          "length": 21,
          "cycles": 1,
          "position": 17,
          "iteration": 0,
          "httpRequestId": "349b10c5-04ba-4286-9a8f-3d47af18977c"
        },
        "item": {
          "id": "dde2888e-464d-4e49-ada8-60888ef09d04",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "e052b64b-b4a5-4d85-a951-e6c4e80c1924",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC25121515231344D775'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "80b49abe-0dfc-4676-9d00-d406132cfc45"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "1f688978-8824-464e-8dff-d1d70660d749",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0921\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "// 현재 시간 구하기 (HHmmss)\r",
                  "function getFormattedTime() {\r",
                  "  const now = new Date();\r",
                  "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                  "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                  "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                  "\r",
                  "  return `${hours}${minutes}${seconds}`;\r",
                  "}\r",
                  "\r",
                  "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                  "console.log(formattedTime)\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"485462******0767\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"삼성카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%C4%C9%C0%CC%B9%F0%C5%A9%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "bc1dcdf1-d158-4b31-abbe-292908859d4c"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzccQmxP3XnXAnB6A1V7j6yFer%2BQE%2Ba1pl7pMnq93f1iTpw%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "505e697d-78fb-4744-b164-87253e9cba58",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z6luj7bfqfoo3a",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "d54bbd32-9af8-4d39-b02f-1a5b8d30e223",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "443"
            },
            {
              "key": "Date",
              "value": "Mon, 05 Jan 2026 06:40:28 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              105,
              110,
              68,
              107,
              89,
              110,
              57,
              105,
              111,
              74,
              115,
              68,
              56,
              111,
              102,
              101,
              113,
              105,
              120,
              97,
              90,
              104,
              97,
              102,
              103,
              86,
              122,
              82,
              84,
              70,
              80,
              37,
              50,
              70,
              103,
              67,
              67,
              70,
              120,
              86,
              83,
              37,
              50,
              70,
              109,
              71,
              90,
              121,
              82,
              74,
              101,
              102,
              71,
              37,
              50,
              70,
              106,
              72,
              85,
              104,
              50,
              102,
              107,
              83,
              37,
              50,
              66,
              74,
              104,
              101,
              37,
              50,
              66,
              116,
              56,
              100,
              120,
              117,
              73,
              37,
              50,
              66,
              97,
              71,
              110,
              77,
              105,
              50,
              37,
              50,
              66,
              81,
              78,
              103,
              118,
              122,
              51,
              50,
              50,
              99,
              111,
              120,
              115,
              115,
              37,
              50,
              66,
              83,
              107,
              107,
              89,
              104,
              114,
              117,
              100,
              113,
              48,
              77,
              55,
              69,
              67,
              115,
              112,
              73,
              106,
              88,
              103,
              75,
              56,
              106,
              69,
              71,
              118,
              54,
              37,
              50,
              70,
              65,
              116,
              103,
              68,
              49,
              48,
              78,
              107,
              84,
              117,
              121,
              53,
              85,
              83,
              122,
              118,
              105,
              68,
              84,
              117,
              51,
              37,
              50,
              70,
              49,
              57,
              75,
              48,
              66,
              56,
              112,
              51,
              49,
              56,
              57,
              113,
              75,
              56,
              82,
              82,
              55,
              117,
              102,
              120,
              112,
              98,
              80,
              115,
              116,
              55,
              77,
              106,
              122,
              109,
              89,
              103,
              89,
              114,
              55,
              53,
              55,
              70,
              115,
              106,
              84,
              67,
              110,
              78,
              109,
              77,
              81,
              79,
              120,
              89,
              49,
              117,
              55,
              99,
              88,
              109,
              75,
              112,
              107,
              97,
              79,
              112,
              88,
              66,
              78,
              118,
              88,
              108,
              75,
              74,
              108,
              54,
              121,
              48,
              101,
              73,
              67,
              52,
              48,
              102,
              104,
              57,
              79,
              55,
              50,
              118,
              73,
              79,
              102,
              99,
              66,
              112,
              71,
              105,
              49,
              115,
              111,
              82,
              117,
              112,
              121,
              104,
              109,
              120,
              57,
              88,
              66,
              70,
              70,
              53,
              82,
              53,
              107,
              90,
              87,
              68,
              49,
              112,
              69,
              97,
              52,
              79,
              111,
              66,
              112,
              106,
              69,
              118,
              121,
              88,
              109,
              116,
              81,
              85,
              37,
              50,
              66,
              99,
              74,
              101,
              77,
              78,
              103,
              122,
              67,
              107,
              56,
              55,
              50,
              56,
              113,
              83,
              56,
              114,
              99,
              84,
              37,
              50,
              70,
              50,
              120,
              98,
              118,
              121,
              83,
              76,
              105,
              85,
              48,
              69,
              83,
              57,
              80,
              104,
              122,
              57,
              88,
              57,
              105,
              113,
              122,
              51,
              85,
              84,
              49,
              74,
              110,
              122,
              89,
              74,
              89,
              97,
              75,
              49,
              68,
              104,
              48,
              77,
              68,
              112,
              68,
              51,
              115,
              97,
              119,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1744,
          "responseSize": 443
        },
        "id": "dde2888e-464d-4e49-ada8-60888ef09d04",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) 정상출력",
            "skipped": false,
            "error": {
              "name": "AssertionError",
              "index": 5,
              "test": "매출 발생시간(TRANTIME) 정상출력",
              "message": "expected '154029' to deeply equal '154028'",
              "stack": "AssertionError: expected '154029' to deeply equal '154028'\n   at Object.eval sandbox-script.js:6:18)"
            }
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "보증금 금액(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "1e0b0053-da04-4f64-84b6-1de88ff6bd1d",
          "length": 21,
          "cycles": 1,
          "position": 18,
          "iteration": 0,
          "httpRequestId": "2dd682bc-a7c8-44b8-8c3e-0ef7c671f3a0"
        },
        "item": {
          "id": "106a437c-f7ce-4ece-a364-c1bec03bcac1",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "73d773ec-5180-4a1a-bacb-ff72e3e1fdcb",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "33ef4cf7-c38b-49e6-b6f6-6303417ec3c4"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "1492572d-b99e-4f16-b7cd-c101ea82a513",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "58dfe7ef-f2b4-4a21-b139-004c0bcdf74d"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDfjO8w3OZ%2Fsve24kmc5tuqtTkshMw1XPXEU17aFIAFmusZJNin5WPUXJQHg5BS77yaE30IAGsqEbFC2fp0XLvPVNiBbPSbYfUNiY1uP4xoIG"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "9c4ae9fd-b49a-4952-84d6-f64f8e5bc01a",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z6luj7bfqfoo3a",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "78b93d70-7420-4338-aa08-3f10af9e608f",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "255"
            },
            {
              "key": "Date",
              "value": "Mon, 05 Jan 2026 06:40:30 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              114,
              78,
              71,
              57,
              86,
              86,
              37,
              50,
              70,
              70,
              68,
              120,
              76,
              114,
              69,
              82,
              56,
              101,
              73,
              97,
              48,
              74,
              84,
              86,
              100,
              57,
              109,
              53,
              104,
              118,
              89,
              89,
              114,
              37,
              50,
              70,
              90,
              107,
              112,
              74,
              88,
              88,
              79,
              80,
              68,
              97,
              103,
              53,
              97,
              117,
              116,
              37,
              50,
              70,
              82,
              51,
              86,
              52,
              85,
              69,
              83,
              112,
              71,
              121,
              49,
              109,
              90,
              114,
              73,
              99,
              81,
              114,
              115,
              97,
              54,
              80,
              71,
              71,
              77,
              120,
              98,
              75,
              101,
              105,
              120,
              109,
              83,
              51,
              117,
              111,
              74,
              76,
              108,
              106,
              88,
              56,
              113,
              75,
              116,
              69,
              113,
              52,
              102,
              109,
              75,
              86,
              100,
              103,
              65,
              120,
              76,
              116,
              84,
              66,
              51,
              65,
              74,
              68,
              102,
              70,
              49,
              76,
              56,
              82,
              52,
              107,
              65,
              69,
              105,
              115,
              37,
              50,
              70,
              70,
              89,
              73,
              69,
              78,
              98,
              98,
              77,
              90,
              97,
              106,
              101,
              100,
              115,
              56,
              114,
              106,
              75,
              86,
              121,
              51,
              102,
              68,
              55,
              65,
              77,
              106,
              105,
              75,
              49,
              51,
              56,
              84,
              88,
              86,
              76,
              89,
              48,
              115,
              67,
              75,
              76,
              103,
              121,
              55,
              85,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1438,
          "responseSize": 255
        },
        "id": "106a437c-f7ce-4ece-a364-c1bec03bcac1",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "b5c96217-9963-4d8f-ba75-5099727fb8db",
          "length": 21,
          "cycles": 1,
          "position": 19,
          "iteration": 0,
          "httpRequestId": "cbf2e9ad-cce8-4624-b293-3e5e704bd38f"
        },
        "item": {
          "id": "b7ea07af-1788-4a8b-9e7b-0841bf94216b",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "f2b88dfe-6719-4c2f-a0c5-2cadf1a5a43b",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC2512151453119224E3'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "2d80be22-42f1-4fae-82bc-0eec1d6ba42d"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "3a5b6d47-c985-49d2-9505-bcfbbf38ec8d",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0700\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "// 현재 시간 구하기 (HHmmss)\r",
                  "function getFormattedTime() {\r",
                  "  const now = new Date();\r",
                  "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                  "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                  "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                  "\r",
                  "  return `${hours}${minutes}${seconds}`;\r",
                  "}\r",
                  "\r",
                  "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                  "console.log(formattedTime)\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"513792******3380\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"롯데카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%B7%D4%B5%A5%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "f3baaf42-2b93-4d13-99ea-a7538cf726a6"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzcfDPdPuA9czR8Lb0T%2Ba0ODlNEPIdgayTwp7V1JVXixp1g%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "8b686d4d-b756-449d-a991-2c4e09128e16",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z6luj7bfqfoo3a",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "25e70e5d-5c89-4098-87c0-433a5c0973c4",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "437"
            },
            {
              "key": "Date",
              "value": "Mon, 05 Jan 2026 06:40:31 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              116,
              115,
              67,
              83,
              76,
              81,
              114,
              72,
              89,
              56,
              55,
              101,
              99,
              98,
              52,
              66,
              83,
              55,
              77,
              57,
              87,
              79,
              55,
              51,
              68,
              55,
              111,
              100,
              37,
              50,
              66,
              74,
              83,
              119,
              107,
              70,
              110,
              106,
              115,
              76,
              82,
              115,
              110,
              73,
              90,
              55,
              37,
              50,
              70,
              69,
              117,
              55,
              109,
              83,
              105,
              105,
              37,
              50,
              66,
              85,
              106,
              77,
              119,
              119,
              68,
              57,
              71,
              76,
              97,
              107,
              112,
              80,
              120,
              53,
              65,
              118,
              53,
              55,
              80,
              111,
              121,
              88,
              37,
              50,
              66,
              67,
              73,
              75,
              49,
              107,
              113,
              111,
              87,
              110,
              71,
              86,
              111,
              55,
              74,
              122,
              80,
              111,
              53,
              77,
              57,
              113,
              81,
              116,
              56,
              79,
              88,
              54,
              113,
              111,
              51,
              103,
              50,
              98,
              102,
              102,
              110,
              97,
              84,
              118,
              119,
              67,
              72,
              79,
              50,
              48,
              102,
              65,
              100,
              100,
              57,
              80,
              90,
              98,
              103,
              57,
              106,
              102,
              69,
              49,
              66,
              37,
              50,
              70,
              49,
              118,
              72,
              121,
              85,
              75,
              111,
              73,
              86,
              117,
              105,
              101,
              53,
              83,
              101,
              78,
              83,
              51,
              121,
              122,
              101,
              70,
              110,
              77,
              106,
              104,
              98,
              98,
              66,
              67,
              101,
              75,
              110,
              113,
              69,
              78,
              49,
              48,
              115,
              120,
              54,
              37,
              50,
              70,
              113,
              70,
              56,
              113,
              90,
              119,
              107,
              73,
              74,
              77,
              82,
              86,
              48,
              68,
              48,
              77,
              82,
              55,
              67,
              113,
              56,
              66,
              71,
              88,
              77,
              98,
              37,
              50,
              66,
              66,
              87,
              68,
              79,
              105,
              109,
              81,
              88,
              102,
              109,
              72,
              114,
              88,
              82,
              101,
              50,
              86,
              55,
              74,
              120,
              115,
              73,
              79,
              57,
              79,
              55,
              110,
              116,
              100,
              101,
              71,
              48,
              87,
              107,
              84,
              109,
              48,
              112,
              72,
              78,
              100,
              48,
              76,
              80,
              90,
              50,
              82,
              72,
              54,
              82,
              114,
              57,
              104,
              107,
              102,
              57,
              111,
              121,
              49,
              120,
              104,
              113,
              111,
              37,
              50,
              66,
              72,
              78,
              100,
              52,
              115,
              116,
              49,
              37,
              50,
              70,
              88,
              65,
              66,
              52,
              68,
              81,
              114,
              48,
              79,
              83,
              83,
              50,
              86,
              112,
              81,
              90,
              118,
              70,
              88,
              48,
              55,
              89,
              100,
              87,
              84,
              70,
              69,
              76,
              78,
              80,
              79,
              101,
              77,
              97,
              72,
              49,
              67,
              114,
              120,
              115,
              98,
              99,
              70,
              79,
              107,
              85,
              114,
              110,
              48,
              105,
              48,
              84,
              69,
              105,
              71,
              89,
              119,
              87,
              97,
              121,
              80,
              116,
              119,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1264,
          "responseSize": 437
        },
        "id": "b7ea07af-1788-4a8b-9e7b-0841bf94216b",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) 정상출력",
            "skipped": false,
            "error": {
              "name": "AssertionError",
              "index": 5,
              "test": "매출 발생시간(TRANTIME) 정상출력",
              "message": "expected '154032' to deeply equal '154031'",
              "stack": "AssertionError: expected '154032' to deeply equal '154031'\n   at Object.eval sandbox-script.js:6:20)"
            }
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "보증금 금액(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "eb9ed8a1-5c14-438b-8fba-b1a2ea867388",
          "length": 21,
          "cycles": 1,
          "position": 20,
          "iteration": 0,
          "httpRequestId": "49d7a16c-fe25-4166-8847-74a4dbdb7068"
        },
        "item": {
          "id": "1b301c59-8b53-45a5-808d-505918f9849b",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "161c6bb1-35e9-4e52-bc4e-d14338e93168",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "89a075c5-d227-4cbb-a03d-7ed58e3a79ef"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "fd716c69-3d36-4d5b-ae72-a4d9f60d1d9e",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "310b70c0-a5ac-4446-8a65-d217e9107467"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDSJd0%2FMFObXIHYDD7oOtGSt1MzeMEvUhJeOaNufr6U21DudarBu%2FV9fmDI37C1G1GfJojZ9Is25%2FE%2FLSRRsjkg%2BScdegZyJ2kwIzBUkYYfXT"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "77d94baf-b5d3-4f2c-82bf-14d9e396b193",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=z6luj7bfqfoo3a",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "c5fa0c3e-0c06-448f-adfa-68a8e698766c",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "253"
            },
            {
              "key": "Date",
              "value": "Mon, 05 Jan 2026 06:40:33 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              114,
              78,
              71,
              57,
              86,
              86,
              37,
              50,
              70,
              70,
              68,
              120,
              76,
              114,
              69,
              82,
              56,
              101,
              73,
              97,
              48,
              74,
              84,
              99,
              101,
              104,
              105,
              54,
              122,
              55,
              37,
              50,
              66,
              84,
              107,
              98,
              100,
              81,
              50,
              48,
              78,
              57,
              111,
              50,
              67,
              57,
              67,
              55,
              105,
              74,
              85,
              109,
              49,
              68,
              115,
              102,
              102,
              101,
              86,
              108,
              117,
              105,
              108,
              78,
              118,
              88,
              117,
              87,
              107,
              108,
              104,
              71,
              119,
              82,
              85,
              73,
              90,
              55,
              106,
              97,
              53,
              71,
              104,
              50,
              113,
              65,
              75,
              107,
              52,
              57,
              75,
              100,
              50,
              120,
              115,
              115,
              107,
              119,
              119,
              77,
              76,
              71,
              98,
              118,
              90,
              98,
              79,
              97,
              117,
              115,
              66,
              111,
              98,
              114,
              107,
              50,
              68,
              48,
              84,
              112,
              121,
              53,
              122,
              49,
              83,
              66,
              74,
              76,
              115,
              68,
              79,
              82,
              51,
              55,
              79,
              103,
              57,
              90,
              114,
              100,
              57,
              120,
              54,
              113,
              101,
              78,
              50,
              54,
              37,
              50,
              66,
              67,
              53,
              102,
              120,
              77,
              121,
              82,
              77,
              57,
              118,
              115,
              103,
              89,
              80,
              90,
              103,
              117,
              77,
              106,
              86,
              98,
              54,
              67,
              66,
              103,
              115,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1419,
          "responseSize": 253
        },
        "id": "1b301c59-8b53-45a5-808d-505918f9849b",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      }
    ],
    "transfers": {
      "responseTotal": 8069
    },
    "failures": [
      {
        "error": {
          "name": "AssertionError",
          "index": 5,
          "test": "매출 발생시간(TRANTIME) 정상출력",
          "message": "expected '154005' to deeply equal '154004'",
          "stack": "AssertionError: expected '154005' to deeply equal '154004'\n   at Object.eval sandbox-script.js:6:4)",
          "checksum": "8b23f03ae57651693409dce56b6f63d7",
          "id": "0eafaa98-957c-4d15-a9da-e12debcaa9b2",
          "timestamp": 1767595204890,
          "stacktrace": [
            {
              "fileName": "sandbox-script.js",
              "lineNumber": 6,
              "functionName": "Object.eval",
              "typeName": "Object",
              "methodName": "eval",
              "columnNumber": 4,
              "native": false
            }
          ]
        },
        "at": "assertion:5 in test-script",
        "source": {
          "id": "514b70da-2ad4-4e09-92c6-21e51f932efe",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded; charset=UTF-8"
              }
            ],
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "d58f9431-ee09-411e-80b5-33dc848238b5",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC250730151749FFCAA0',\r",
                  "    USERNAME: '김하늘',\r",
                  "    USERPHONE: '01085402697',\r",
                  "    ORDERID: '01234567'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "ac1b84c1-8813-45ce-9598-1c1d836d1268"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "d8237e0f-8e74-4201-bb3f-a107e8b7bd95",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0500\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.eql(\"01085402697\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "// 현재 시간 구하기 (HHmmss)\r",
                  "function getFormattedTime() {\r",
                  "  const now = new Date();\r",
                  "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                  "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                  "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                  "\r",
                  "  return `${hours}${minutes}${seconds}`;\r",
                  "}\r",
                  "\r",
                  "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.eql(\"01234567\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"512028******7294\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"삼성카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%BB%EF%BC%BA%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.eql(\"%EA%B9%3F%3F%3F%3F%3F\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "5e82bbba-ddfb-4037-a12f-05102d40356a"
              }
            }
          ]
        },
        "parent": {
          "id": "962cbc48-81c3-4e1c-80b7-3c511272d828",
          "name": "삼성카드",
          "item": [
            {
              "id": "514b70da-2ad4-4e09-92c6-21e51f932efe",
              "name": "정기결제 요청 (OTBILL)",
              "request": {
                "url": {
                  "host": [
                    "{{tx-credit}}"
                  ],
                  "query": [
                    {
                      "key": "CPID",
                      "value": "A010037544"
                    },
                    {
                      "key": "DATA",
                      "value": "{{encryptedData}}"
                    }
                  ],
                  "variable": []
                },
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/x-www-form-urlencoded; charset=UTF-8"
                  }
                ],
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "id": "d58f9431-ee09-411e-80b5-33dc848238b5",
                    "type": "text/javascript",
                    "packages": {},
                    "exec": [
                      "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                      "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                      "\r",
                      "// 암호화 대상 데이터 (CPID 제외)\r",
                      "let params = {\r",
                      "    ITEMNAME: 'apiautotest',\r",
                      "    AMOUNT: '301',\r",
                      "    CURRENCY: '410',\r",
                      "    USERID: 'hnkim',\r",
                      "    USERAGENT: 'ONLINE',\r",
                      "    TXTYPE: 'OTBILL',\r",
                      "    SERVICETYPE: 'BATCH',\r",
                      "    ISREBILL: 'Y',\r",
                      "    BILLINFO: 'DC250730151749FFCAA0',\r",
                      "    USERNAME: '김하늘',\r",
                      "    USERPHONE: '01085402697',\r",
                      "    ORDERID: '01234567'\r",
                      "};\r",
                      "\r",
                      "// Step 1: URL 인코딩 (key 제외, value만)\r",
                      "let encodedParams = [];\r",
                      "for (let key in params) {\r",
                      "    let value = encodeURIComponent(params[key]);\r",
                      "    encodedParams.push(`${key}=${value}`);\r",
                      "}\r",
                      "\r",
                      "// Step 2: QueryString 구성\r",
                      "let queryString = encodedParams.join('&');\r",
                      "\r",
                      "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                      "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                      "    iv: iv,\r",
                      "    mode: CryptoJS.mode.CBC,\r",
                      "    padding: CryptoJS.pad.Pkcs7\r",
                      "});\r",
                      "\r",
                      "// Step 4: Base64 → URLEncoded\r",
                      "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                      "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                      "\r",
                      "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                      "pm.environment.set(\"encryptedData\", finalEncoded);"
                    ],
                    "_lastExecutionId": "ac1b84c1-8813-45ce-9598-1c1d836d1268"
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "id": "d8237e0f-8e74-4201-bb3f-a107e8b7bd95",
                    "type": "text/javascript",
                    "packages": {},
                    "exec": [
                      "// Step 1: 응답을 텍스트로 가져옴\r",
                      "let rawText = pm.response.text();\r",
                      "\r",
                      "// Step 2: DATA= 뒤의 암호문만 추출\r",
                      "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                      "\r",
                      "// Step 3: URI 디코딩\r",
                      "let base64Cipher = decodeURIComponent(encryptedData);\r",
                      "\r",
                      "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                      "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                      "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                      "\r",
                      "// Step 5: AES 복호화\r",
                      "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                      "    iv: iv,\r",
                      "    mode: CryptoJS.mode.CBC,\r",
                      "    padding: CryptoJS.pad.Pkcs7\r",
                      "});\r",
                      "\r",
                      "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                      "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                      "console.log(\"복호화 결과 : \", result);\r",
                      "\r",
                      "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                      "pm.environment.set(\"decryptedResponse\", result);\r",
                      "\r",
                      "\r",
                      "/********************     Assertion     **********************/\r",
                      "\r",
                      "// Key-Value 파싱 함수\r",
                      "function parseQueryString(str) {\r",
                      "    return str.split(\"&\").reduce((acc, pair) => {\r",
                      "        const [key, value] = pair.split(\"=\");\r",
                      "        acc[key] = value || \"\";\r",
                      "        return acc;\r",
                      "    }, {});\r",
                      "}\r",
                      "\r",
                      "// 안전 디코딩 함수\r",
                      "function safeDecodeURIComponent(str) {\r",
                      "    try {\r",
                      "        return decodeURIComponent(str);\r",
                      "    } catch (e) {\r",
                      "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                      "        return str;\r",
                      "    }\r",
                      "}\r",
                      "\r",
                      "const parsed = parseQueryString(result);\r",
                      "\r",
                      "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                      "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                      "});\r",
                      "\r",
                      "// \"성공\" 검증\r",
                      "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                      "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                      "    pm.expect(parsed.CARDCODE).to.eql(\"0500\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                      "    pm.expect(parsed.USERPHONE).to.eql(\"01085402697\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                      "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                      "});\r",
                      "\r",
                      "// 현재 시간 구하기 (HHmmss)\r",
                      "function getFormattedTime() {\r",
                      "  const now = new Date();\r",
                      "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                      "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                      "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                      "\r",
                      "  return `${hours}${minutes}${seconds}`;\r",
                      "}\r",
                      "\r",
                      "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                      "\r",
                      "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                      "});\r",
                      "\r",
                      "// Environments에 TRANTIME 저장\r",
                      "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                      "\r",
                      "// 현재 날짜 구하기 (yyyyMMdd)\r",
                      "function getYYYYMMDD() {\r",
                      "  const today = new Date();\r",
                      "  const yyyy = today.getFullYear();\r",
                      "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                      "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                      "\r",
                      "  return `${yyyy}${mm}${dd}`;\r",
                      "}\r",
                      "\r",
                      "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                      "\r",
                      "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                      "});\r",
                      "\r",
                      "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                      "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                      "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                      "    pm.expect(parsed.TID).to.not.be.empty;\r",
                      "    pm.expect(parsed.TID).to.not.be.null;\r",
                      "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                      "});\r",
                      "\r",
                      "// Environments에 TID 저장\r",
                      "pm.environment.set(\"TID\", parsed.TID);\r",
                      "\r",
                      "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                      "    pm.expect(parsed.ORDERID).to.eql(\"01234567\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                      "    pm.expect(parsed.CARDNO).to.eql(\"512028******7294\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                      "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                      "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                      "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                      "});\r",
                      "\r",
                      "// \"삼성카드\" 검증\r",
                      "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.CARDNAME).to.eql(\"%BB%EF%BC%BA%C4%AB%B5%E5\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.USERNAME).to.eql(\"%EA%B9%3F%3F%3F%3F%3F\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                      "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                      "});"
                    ],
                    "_lastExecutionId": "5e82bbba-ddfb-4037-a12f-05102d40356a"
                  }
                }
              ]
            },
            {
              "id": "0a7f8ff2-fc90-404a-9ff6-297168eae8fa",
              "name": "카드 승인 취소 (BILLCANCEL)",
              "request": {
                "url": {
                  "host": [
                    "{{tx-credit}}"
                  ],
                  "query": [
                    {
                      "key": "CPID",
                      "value": "A010037544"
                    },
                    {
                      "key": "DATA",
                      "value": "{{encryptedData}}"
                    }
                  ],
                  "variable": []
                },
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "id": "39a163b8-224c-4d3c-859a-955ad389b147",
                    "type": "text/javascript",
                    "packages": {},
                    "exec": [
                      "// Step 1: 응답을 텍스트로 가져옴\r",
                      "let rawText = pm.response.text();\r",
                      "\r",
                      "// Step 2: DATA= 뒤의 암호문만 추출\r",
                      "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                      "\r",
                      "// Step 3: URI 디코딩\r",
                      "let base64Cipher = decodeURIComponent(encryptedData);\r",
                      "\r",
                      "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                      "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                      "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                      "\r",
                      "// Step 5: AES 복호화\r",
                      "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                      "    iv: iv,\r",
                      "    mode: CryptoJS.mode.CBC,\r",
                      "    padding: CryptoJS.pad.Pkcs7\r",
                      "});\r",
                      "\r",
                      "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                      "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                      "console.log(\"복호화 결과 : \", result);\r",
                      "\r",
                      "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                      "pm.environment.set(\"decryptedResponse\", result);\r",
                      "\r",
                      "\r",
                      "/********************     Assertion     **********************/\r",
                      "\r",
                      "// Key-Value 파싱 함수\r",
                      "function parseQueryString(str) {\r",
                      "    return str.split(\"&\").reduce((acc, pair) => {\r",
                      "        const [key, value] = pair.split(\"=\");\r",
                      "        acc[key] = value || \"\";\r",
                      "        return acc;\r",
                      "    }, {});\r",
                      "}\r",
                      "\r",
                      "// 안전 디코딩 함수\r",
                      "function safeDecodeURIComponent(str) {\r",
                      "    try {\r",
                      "        return decodeURIComponent(str);\r",
                      "    } catch (e) {\r",
                      "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                      "        return str;\r",
                      "    }\r",
                      "}\r",
                      "\r",
                      "const parsed = parseQueryString(result);\r",
                      "\r",
                      "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                      "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                      "});\r",
                      "\r",
                      "// \"성공\" 검증\r",
                      "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                      "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                      "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                      "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                      "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                      "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                      "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                      "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                      "});\r",
                      "\r",
                      "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                      "    pm.expect(parsed.TID).to.not.be.empty;\r",
                      "    pm.expect(parsed.TID).to.not.be.null;\r",
                      "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                      "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                      "});\r",
                      "\r",
                      "// 매출 발생시간과 비교 검증\r",
                      "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                      "});\r",
                      "\r",
                      "// 현재 날짜 구하기 (yyyyMMdd)\r",
                      "function getYYYYMMDD() {\r",
                      "  const today = new Date();\r",
                      "  const yyyy = today.getFullYear();\r",
                      "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                      "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                      "\r",
                      "  return `${yyyy}${mm}${dd}`;\r",
                      "}\r",
                      "\r",
                      "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                      "\r",
                      "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                      "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                      "});\r",
                      "\r",
                      "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                      "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                      "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                      "});"
                    ],
                    "_lastExecutionId": "fb736d41-184e-4d53-990e-82044ac3243c"
                  }
                },
                {
                  "listen": "prerequest",
                  "script": {
                    "id": "2d38274c-dea0-43a0-b849-5462e14139e0",
                    "type": "text/javascript",
                    "packages": {},
                    "exec": [
                      "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                      "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                      "\r",
                      "// 암호화 대상 데이터 (CPID 제외)\r",
                      "let params = {\r",
                      "    AMOUNT: '301',\r",
                      "    TID: pm.environment.get(\"TID\"),\r",
                      "    CANCELTYPE: 'C',\r",
                      "    TXTYPE: 'CANCEL',\r",
                      "    SERVICETYPE: 'DANALCARD'\r",
                      "};\r",
                      "\r",
                      "// Step 1: URL 인코딩 (key 제외, value만)\r",
                      "let encodedParams = [];\r",
                      "for (let key in params) {\r",
                      "    let value = encodeURIComponent(params[key]);\r",
                      "    encodedParams.push(`${key}=${value}`);\r",
                      "}\r",
                      "\r",
                      "// Step 2: QueryString 구성\r",
                      "let queryString = encodedParams.join('&');\r",
                      "\r",
                      "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                      "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                      "    iv: iv,\r",
                      "    mode: CryptoJS.mode.CBC,\r",
                      "    padding: CryptoJS.pad.Pkcs7\r",
                      "});\r",
                      "\r",
                      "// Step 4: Base64 → URLEncoded\r",
                      "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                      "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                      "\r",
                      "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                      "pm.environment.set(\"encryptedData\", finalEncoded);"
                    ],
                    "_lastExecutionId": "efa50524-9dea-4f06-99cd-738b5f3a73f2"
                  }
                }
              ]
            }
          ],
          "event": []
        },
        "cursor": {
          "ref": "99aee530-4a5c-478d-86d7-2ebd32c0849d",
          "length": 21,
          "cycles": 1,
          "position": 3,
          "iteration": 0,
          "httpRequestId": "67ea60d2-4575-438f-999e-0aafef438247",
          "scriptId": "d8237e0f-8e74-4201-bb3f-a107e8b7bd95",
          "execution": "5e82bbba-ddfb-4037-a12f-05102d40356a"
        }
      },
      {
        "error": {
          "name": "AssertionError",
          "index": 5,
          "test": "매출 발생시간(TRANTIME) 정상출력",
          "message": "expected '154008' to deeply equal '154007'",
          "stack": "AssertionError: expected '154008' to deeply equal '154007'\n   at Object.eval sandbox-script.js:6:6)",
          "checksum": "176d07cceec3d20d01de250f75595c6b",
          "id": "dab2a2ad-5fc5-4b9d-b890-f7f1e9d3d2a9",
          "timestamp": 1767595207957,
          "stacktrace": [
            {
              "fileName": "sandbox-script.js",
              "lineNumber": 6,
              "functionName": "Object.eval",
              "typeName": "Object",
              "methodName": "eval",
              "columnNumber": 6,
              "native": false
            }
          ]
        },
        "at": "assertion:5 in test-script",
        "source": {
          "id": "a20b5e03-219e-415e-9aa4-bf8682640b2e",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "2e383411-91b1-45c9-b9e3-e8508432547b",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC221222165535557F38'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "3afa0fbb-bda1-4891-b5e8-c23100666286"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "85631852-0f9e-4412-993d-57ecbaaba499",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0400\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "// 현재 시간 구하기 (HHmmss)\r",
                  "function getFormattedTime() {\r",
                  "  const now = new Date();\r",
                  "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                  "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                  "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                  "\r",
                  "  return `${hours}${minutes}${seconds}`;\r",
                  "}\r",
                  "\r",
                  "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                  "console.log(formattedTime)\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"403293******4003\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"현대카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%C7%F6%B4%EB%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "})\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "ba5e99d9-da45-4723-bf7b-0ef1c84c5559"
              }
            }
          ]
        },
        "parent": {
          "id": "81f258f2-9417-41b0-ac24-45718681ad45",
          "name": "현대카드",
          "item": [
            {
              "id": "a20b5e03-219e-415e-9aa4-bf8682640b2e",
              "name": "정기결제 요청 (OTBILL)",
              "request": {
                "url": {
                  "host": [
                    "{{tx-credit}}"
                  ],
                  "query": [
                    {
                      "key": "CPID",
                      "value": "A010037544"
                    },
                    {
                      "key": "DATA",
                      "value": "{{encryptedData}}"
                    }
                  ],
                  "variable": []
                },
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "id": "2e383411-91b1-45c9-b9e3-e8508432547b",
                    "type": "text/javascript",
                    "packages": {},
                    "exec": [
                      "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                      "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                      "\r",
                      "// 암호화 대상 데이터 (CPID 제외)\r",
                      "let params = {\r",
                      "    ITEMNAME: 'apiautotest',\r",
                      "    AMOUNT: '301',\r",
                      "    CURRENCY: '410',\r",
                      "    USERID: 'hnkim',\r",
                      "    USERAGENT: 'ONLINE',\r",
                      "    TXTYPE: 'OTBILL',\r",
                      "    SERVICETYPE: 'BATCH',\r",
                      "    ISREBILL: 'Y',\r",
                      "    BILLINFO: 'DC221222165535557F38'\r",
                      "};\r",
                      "\r",
                      "// Step 1: URL 인코딩 (key 제외, value만)\r",
                      "let encodedParams = [];\r",
                      "for (let key in params) {\r",
                      "    let value = encodeURIComponent(params[key]);\r",
                      "    encodedParams.push(`${key}=${value}`);\r",
                      "}\r",
                      "\r",
                      "// Step 2: QueryString 구성\r",
                      "let queryString = encodedParams.join('&');\r",
                      "\r",
                      "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                      "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                      "    iv: iv,\r",
                      "    mode: CryptoJS.mode.CBC,\r",
                      "    padding: CryptoJS.pad.Pkcs7\r",
                      "});\r",
                      "\r",
                      "// Step 4: Base64 → URLEncoded\r",
                      "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                      "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                      "\r",
                      "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                      "pm.environment.set(\"encryptedData\", finalEncoded);"
                    ],
                    "_lastExecutionId": "3afa0fbb-bda1-4891-b5e8-c23100666286"
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "id": "85631852-0f9e-4412-993d-57ecbaaba499",
                    "type": "text/javascript",
                    "packages": {},
                    "exec": [
                      "// Step 1: 응답을 텍스트로 가져옴\r",
                      "let rawText = pm.response.text();\r",
                      "\r",
                      "// Step 2: DATA= 뒤의 암호문만 추출\r",
                      "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                      "\r",
                      "// Step 3: URI 디코딩\r",
                      "let base64Cipher = decodeURIComponent(encryptedData);\r",
                      "\r",
                      "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                      "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                      "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                      "\r",
                      "// Step 5: AES 복호화\r",
                      "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                      "    iv: iv,\r",
                      "    mode: CryptoJS.mode.CBC,\r",
                      "    padding: CryptoJS.pad.Pkcs7\r",
                      "});\r",
                      "\r",
                      "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                      "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                      "console.log(\"복호화 결과 : \", result);\r",
                      "\r",
                      "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                      "pm.environment.set(\"decryptedResponse\", result);\r",
                      "\r",
                      "\r",
                      "/********************     Assertion     **********************/\r",
                      "\r",
                      "// Key-Value 파싱 함수\r",
                      "function parseQueryString(str) {\r",
                      "    return str.split(\"&\").reduce((acc, pair) => {\r",
                      "        const [key, value] = pair.split(\"=\");\r",
                      "        acc[key] = value || \"\";\r",
                      "        return acc;\r",
                      "    }, {});\r",
                      "}\r",
                      "\r",
                      "// 안전 디코딩 함수\r",
                      "function safeDecodeURIComponent(str) {\r",
                      "    try {\r",
                      "        return decodeURIComponent(str);\r",
                      "    } catch (e) {\r",
                      "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                      "        return str;\r",
                      "    }\r",
                      "}\r",
                      "\r",
                      "const parsed = parseQueryString(result);\r",
                      "\r",
                      "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                      "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                      "});\r",
                      "\r",
                      "// \"성공\" 검증\r",
                      "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                      "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                      "    pm.expect(parsed.CARDCODE).to.eql(\"0400\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                      "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                      "});\r",
                      "\r",
                      "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                      "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                      "});\r",
                      "\r",
                      "// 현재 시간 구하기 (HHmmss)\r",
                      "function getFormattedTime() {\r",
                      "  const now = new Date();\r",
                      "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                      "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                      "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                      "\r",
                      "  return `${hours}${minutes}${seconds}`;\r",
                      "}\r",
                      "\r",
                      "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                      "console.log(formattedTime)\r",
                      "\r",
                      "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                      "});\r",
                      "\r",
                      "// Environments에 TRANTIME 저장\r",
                      "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                      "\r",
                      "// 현재 날짜 구하기 (yyyyMMdd)\r",
                      "function getYYYYMMDD() {\r",
                      "  const today = new Date();\r",
                      "  const yyyy = today.getFullYear();\r",
                      "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                      "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                      "\r",
                      "  return `${yyyy}${mm}${dd}`;\r",
                      "}\r",
                      "\r",
                      "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                      "\r",
                      "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                      "});\r",
                      "\r",
                      "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                      "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                      "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                      "    pm.expect(parsed.TID).to.not.be.empty;\r",
                      "    pm.expect(parsed.TID).to.not.be.null;\r",
                      "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                      "});\r",
                      "\r",
                      "// Environments에 TID 저장\r",
                      "pm.environment.set(\"TID\", parsed.TID);\r",
                      "\r",
                      "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                      "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                      "});\r",
                      "\r",
                      "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                      "    pm.expect(parsed.CARDNO).to.eql(\"403293******4003\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                      "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                      "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                      "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                      "});\r",
                      "\r",
                      "// \"현대카드\" 검증\r",
                      "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.CARDNAME).to.eql(\"%C7%F6%B4%EB%C4%AB%B5%E5\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                      "})\r",
                      "\r",
                      "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                      "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                      "});"
                    ],
                    "_lastExecutionId": "ba5e99d9-da45-4723-bf7b-0ef1c84c5559"
                  }
                }
              ]
            },
            {
              "id": "e105dfbc-79c2-456f-97d0-d86cd6abdd62",
              "name": "카드 승인 취소 (BILLCANCEL)",
              "request": {
                "url": {
                  "host": [
                    "{{tx-credit}}"
                  ],
                  "query": [
                    {
                      "key": "CPID",
                      "value": "A010037544"
                    },
                    {
                      "key": "DATA",
                      "value": "{{encryptedData}}"
                    }
                  ],
                  "variable": []
                },
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "id": "ec82cca0-d47f-4899-a7c6-ff80b993369a",
                    "type": "text/javascript",
                    "packages": {},
                    "exec": [
                      "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                      "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                      "\r",
                      "// 암호화 대상 데이터 (CPID 제외)\r",
                      "let params = {\r",
                      "    AMOUNT: '301',\r",
                      "    TID: pm.environment.get(\"TID\"),\r",
                      "    CANCELTYPE: 'C',\r",
                      "    TXTYPE: 'CANCEL',\r",
                      "    SERVICETYPE: 'DANALCARD'\r",
                      "};\r",
                      "\r",
                      "// Step 1: URL 인코딩 (key 제외, value만)\r",
                      "let encodedParams = [];\r",
                      "for (let key in params) {\r",
                      "    let value = encodeURIComponent(params[key]);\r",
                      "    encodedParams.push(`${key}=${value}`);\r",
                      "}\r",
                      "\r",
                      "// Step 2: QueryString 구성\r",
                      "let queryString = encodedParams.join('&');\r",
                      "\r",
                      "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                      "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                      "    iv: iv,\r",
                      "    mode: CryptoJS.mode.CBC,\r",
                      "    padding: CryptoJS.pad.Pkcs7\r",
                      "});\r",
                      "\r",
                      "// Step 4: Base64 → URLEncoded\r",
                      "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                      "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                      "\r",
                      "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                      "pm.environment.set(\"encryptedData\", finalEncoded);"
                    ],
                    "_lastExecutionId": "2e6ae83d-543b-4d32-880d-b6b2e4cb7903"
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "id": "5a8e6684-862a-4a5f-bff3-1f67753b428f",
                    "type": "text/javascript",
                    "packages": {},
                    "exec": [
                      "// Step 1: 응답을 텍스트로 가져옴\r",
                      "let rawText = pm.response.text();\r",
                      "\r",
                      "// Step 2: DATA= 뒤의 암호문만 추출\r",
                      "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                      "\r",
                      "// Step 3: URI 디코딩\r",
                      "let base64Cipher = decodeURIComponent(encryptedData);\r",
                      "\r",
                      "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                      "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                      "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                      "\r",
                      "// Step 5: AES 복호화\r",
                      "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                      "    iv: iv,\r",
                      "    mode: CryptoJS.mode.CBC,\r",
                      "    padding: CryptoJS.pad.Pkcs7\r",
                      "});\r",
                      "\r",
                      "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                      "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                      "console.log(\"복호화 결과 : \", result);\r",
                      "\r",
                      "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                      "pm.environment.set(\"decryptedResponse\", result);\r",
                      "\r",
                      "\r",
                      "/********************     Assertion     **********************/\r",
                      "\r",
                      "// Key-Value 파싱 함수\r",
                      "function parseQueryString(str) {\r",
                      "    return str.split(\"&\").reduce((acc, pair) => {\r",
                      "        const [key, value] = pair.split(\"=\");\r",
                      "        acc[key] = value || \"\";\r",
                      "        return acc;\r",
                      "    }, {});\r",
                      "}\r",
                      "\r",
                      "// 안전 디코딩 함수\r",
                      "function safeDecodeURIComponent(str) {\r",
                      "    try {\r",
                      "        return decodeURIComponent(str);\r",
                      "    } catch (e) {\r",
                      "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                      "        return str;\r",
                      "    }\r",
                      "}\r",
                      "\r",
                      "const parsed = parseQueryString(result);\r",
                      "\r",
                      "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                      "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                      "});\r",
                      "\r",
                      "// \"성공\" 검증\r",
                      "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                      "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                      "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                      "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                      "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                      "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                      "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                      "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                      "});\r",
                      "\r",
                      "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                      "    pm.expect(parsed.TID).to.not.be.empty;\r",
                      "    pm.expect(parsed.TID).to.not.be.null;\r",
                      "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                      "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                      "});\r",
                      "\r",
                      "// 매출 발생시간과 비교 검증\r",
                      "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                      "});\r",
                      "\r",
                      "// 현재 날짜 구하기 (yyyyMMdd)\r",
                      "function getYYYYMMDD() {\r",
                      "  const today = new Date();\r",
                      "  const yyyy = today.getFullYear();\r",
                      "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                      "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                      "\r",
                      "  return `${yyyy}${mm}${dd}`;\r",
                      "}\r",
                      "\r",
                      "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                      "\r",
                      "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                      "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                      "});\r",
                      "\r",
                      "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                      "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                      "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                      "});"
                    ],
                    "_lastExecutionId": "8430450f-aa4b-4a28-a8b3-0c750b23f7ee"
                  }
                }
              ]
            }
          ],
          "event": []
        },
        "cursor": {
          "ref": "e84036de-be45-49d9-803f-8938ba1ba15f",
          "length": 21,
          "cycles": 1,
          "position": 5,
          "iteration": 0,
          "httpRequestId": "83a038ab-b4a5-4358-b57e-dc780b600c31",
          "scriptId": "85631852-0f9e-4412-993d-57ecbaaba499",
          "execution": "ba5e99d9-da45-4723-bf7b-0ef1c84c5559"
        }
      },
      {
        "error": {
          "name": "AssertionError",
          "index": 12,
          "test": "카드번호(CARDNO) 정상출력",
          "message": "expected '540926******6041' to deeply equal '540926******6041\\''",
          "stack": "AssertionError: expected '540926******6041' to deeply equal '540926******6041\\''\n   at Object.eval sandbox-script.js:13:12)",
          "checksum": "2eaa0a3ac0dd1de042c5db09763e26e6",
          "id": "7461f967-5f55-4628-869a-fb63379cbb34",
          "timestamp": 1767595218241,
          "stacktrace": [
            {
              "fileName": "sandbox-script.js",
              "lineNumber": 13,
              "functionName": "Object.eval",
              "typeName": "Object",
              "methodName": "eval",
              "columnNumber": 12,
              "native": false
            }
          ]
        },
        "at": "assertion:12 in test-script",
        "source": {
          "id": "c2ce4a00-4f3a-4f53-92d8-fb97ebad2513",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "7483840e-1a60-4707-9704-605304851b80",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC250804165745DBD04E'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "9ee855ff-bac6-4183-853a-4d2120ff7b91"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "72572743-cf45-4989-9cfd-29a368220174",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0300\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "// 현재 시간 구하기 (HHmmss)\r",
                  "function getFormattedTime() {\r",
                  "  const now = new Date();\r",
                  "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                  "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                  "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                  "\r",
                  "  return `${hours}${minutes}${seconds}`;\r",
                  "}\r",
                  "\r",
                  "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                  "console.log(formattedTime)\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"540926******6041'\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"삼성카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"KB%B1%B9%B9%CE%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "aac11d75-783d-4462-b3ea-6b4f0bd3354a"
              }
            }
          ]
        },
        "parent": {
          "id": "7368c4d3-7c23-4f94-aab6-7bf53e4142f0",
          "name": "국민카드",
          "item": [
            {
              "id": "c2ce4a00-4f3a-4f53-92d8-fb97ebad2513",
              "name": "정기결제 요청 (OTBILL)",
              "request": {
                "url": {
                  "host": [
                    "{{tx-credit}}"
                  ],
                  "query": [
                    {
                      "key": "CPID",
                      "value": "A010037544"
                    },
                    {
                      "key": "DATA",
                      "value": "{{encryptedData}}"
                    }
                  ],
                  "variable": []
                },
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "id": "7483840e-1a60-4707-9704-605304851b80",
                    "type": "text/javascript",
                    "packages": {},
                    "exec": [
                      "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                      "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                      "\r",
                      "// 암호화 대상 데이터 (CPID 제외)\r",
                      "let params = {\r",
                      "    ITEMNAME: 'apiautotest',\r",
                      "    AMOUNT: '301',\r",
                      "    CURRENCY: '410',\r",
                      "    USERID: 'hnkim',\r",
                      "    USERAGENT: 'ONLINE',\r",
                      "    TXTYPE: 'OTBILL',\r",
                      "    SERVICETYPE: 'BATCH',\r",
                      "    ISREBILL: 'Y',\r",
                      "    BILLINFO: 'DC250804165745DBD04E'\r",
                      "};\r",
                      "\r",
                      "// Step 1: URL 인코딩 (key 제외, value만)\r",
                      "let encodedParams = [];\r",
                      "for (let key in params) {\r",
                      "    let value = encodeURIComponent(params[key]);\r",
                      "    encodedParams.push(`${key}=${value}`);\r",
                      "}\r",
                      "\r",
                      "// Step 2: QueryString 구성\r",
                      "let queryString = encodedParams.join('&');\r",
                      "\r",
                      "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                      "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                      "    iv: iv,\r",
                      "    mode: CryptoJS.mode.CBC,\r",
                      "    padding: CryptoJS.pad.Pkcs7\r",
                      "});\r",
                      "\r",
                      "// Step 4: Base64 → URLEncoded\r",
                      "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                      "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                      "\r",
                      "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                      "pm.environment.set(\"encryptedData\", finalEncoded);"
                    ],
                    "_lastExecutionId": "9ee855ff-bac6-4183-853a-4d2120ff7b91"
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "id": "72572743-cf45-4989-9cfd-29a368220174",
                    "type": "text/javascript",
                    "packages": {},
                    "exec": [
                      "// Step 1: 응답을 텍스트로 가져옴\r",
                      "let rawText = pm.response.text();\r",
                      "\r",
                      "// Step 2: DATA= 뒤의 암호문만 추출\r",
                      "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                      "\r",
                      "// Step 3: URI 디코딩\r",
                      "let base64Cipher = decodeURIComponent(encryptedData);\r",
                      "\r",
                      "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                      "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                      "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                      "\r",
                      "// Step 5: AES 복호화\r",
                      "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                      "    iv: iv,\r",
                      "    mode: CryptoJS.mode.CBC,\r",
                      "    padding: CryptoJS.pad.Pkcs7\r",
                      "});\r",
                      "\r",
                      "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                      "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                      "console.log(\"복호화 결과 : \", result);\r",
                      "\r",
                      "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                      "pm.environment.set(\"decryptedResponse\", result);\r",
                      "\r",
                      "\r",
                      "/********************     Assertion     **********************/\r",
                      "\r",
                      "// Key-Value 파싱 함수\r",
                      "function parseQueryString(str) {\r",
                      "    return str.split(\"&\").reduce((acc, pair) => {\r",
                      "        const [key, value] = pair.split(\"=\");\r",
                      "        acc[key] = value || \"\";\r",
                      "        return acc;\r",
                      "    }, {});\r",
                      "}\r",
                      "\r",
                      "// 안전 디코딩 함수\r",
                      "function safeDecodeURIComponent(str) {\r",
                      "    try {\r",
                      "        return decodeURIComponent(str);\r",
                      "    } catch (e) {\r",
                      "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                      "        return str;\r",
                      "    }\r",
                      "}\r",
                      "\r",
                      "const parsed = parseQueryString(result);\r",
                      "\r",
                      "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                      "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                      "});\r",
                      "\r",
                      "// \"성공\" 검증\r",
                      "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                      "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                      "    pm.expect(parsed.CARDCODE).to.eql(\"0300\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                      "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                      "});\r",
                      "\r",
                      "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                      "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                      "});\r",
                      "\r",
                      "// 현재 시간 구하기 (HHmmss)\r",
                      "function getFormattedTime() {\r",
                      "  const now = new Date();\r",
                      "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                      "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                      "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                      "\r",
                      "  return `${hours}${minutes}${seconds}`;\r",
                      "}\r",
                      "\r",
                      "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                      "console.log(formattedTime)\r",
                      "\r",
                      "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                      "});\r",
                      "\r",
                      "// Environments에 TRANTIME 저장\r",
                      "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                      "\r",
                      "// 현재 날짜 구하기 (yyyyMMdd)\r",
                      "function getYYYYMMDD() {\r",
                      "  const today = new Date();\r",
                      "  const yyyy = today.getFullYear();\r",
                      "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                      "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                      "\r",
                      "  return `${yyyy}${mm}${dd}`;\r",
                      "}\r",
                      "\r",
                      "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                      "\r",
                      "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                      "});\r",
                      "\r",
                      "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                      "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                      "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                      "    pm.expect(parsed.TID).to.not.be.empty;\r",
                      "    pm.expect(parsed.TID).to.not.be.null;\r",
                      "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                      "});\r",
                      "\r",
                      "// Environments에 TID 저장\r",
                      "pm.environment.set(\"TID\", parsed.TID);\r",
                      "\r",
                      "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                      "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                      "});\r",
                      "\r",
                      "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                      "    pm.expect(parsed.CARDNO).to.eql(\"540926******6041'\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                      "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                      "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                      "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                      "});\r",
                      "\r",
                      "// \"삼성카드\" 검증\r",
                      "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.CARDNAME).to.eql(\"KB%B1%B9%B9%CE%C4%AB%B5%E5\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                      "});\r",
                      "\r",
                      "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                      "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                      "});"
                    ],
                    "_lastExecutionId": "aac11d75-783d-4462-b3ea-6b4f0bd3354a"
                  }
                }
              ]
            },
            {
              "id": "757d0b67-7e27-49f0-ac27-f1d2fab57268",
              "name": "카드 승인 취소 (BILLCANCEL)",
              "request": {
                "url": {
                  "host": [
                    "{{tx-credit}}"
                  ],
                  "query": [
                    {
                      "key": "CPID",
                      "value": "A010037544"
                    },
                    {
                      "key": "DATA",
                      "value": "{{encryptedData}}"
                    }
                  ],
                  "variable": []
                },
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "id": "f85b519c-193e-4a8c-9583-d367d1057d4b",
                    "type": "text/javascript",
                    "packages": {},
                    "exec": [
                      "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                      "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                      "\r",
                      "// 암호화 대상 데이터 (CPID 제외)\r",
                      "let params = {\r",
                      "    AMOUNT: '301',\r",
                      "    TID: pm.environment.get(\"TID\"),\r",
                      "    CANCELTYPE: 'C',\r",
                      "    TXTYPE: 'CANCEL',\r",
                      "    SERVICETYPE: 'DANALCARD'\r",
                      "};\r",
                      "\r",
                      "// Step 1: URL 인코딩 (key 제외, value만)\r",
                      "let encodedParams = [];\r",
                      "for (let key in params) {\r",
                      "    let value = encodeURIComponent(params[key]);\r",
                      "    encodedParams.push(`${key}=${value}`);\r",
                      "}\r",
                      "\r",
                      "// Step 2: QueryString 구성\r",
                      "let queryString = encodedParams.join('&');\r",
                      "\r",
                      "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                      "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                      "    iv: iv,\r",
                      "    mode: CryptoJS.mode.CBC,\r",
                      "    padding: CryptoJS.pad.Pkcs7\r",
                      "});\r",
                      "\r",
                      "// Step 4: Base64 → URLEncoded\r",
                      "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                      "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                      "\r",
                      "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                      "pm.environment.set(\"encryptedData\", finalEncoded);"
                    ],
                    "_lastExecutionId": "fe7c1fd1-bcab-4de9-9e51-2ddafdecc3bd"
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "id": "bc677fc4-15ac-4f2d-85f6-3ea65a1a06c6",
                    "type": "text/javascript",
                    "packages": {},
                    "exec": [
                      "// Step 1: 응답을 텍스트로 가져옴\r",
                      "let rawText = pm.response.text();\r",
                      "\r",
                      "// Step 2: DATA= 뒤의 암호문만 추출\r",
                      "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                      "\r",
                      "// Step 3: URI 디코딩\r",
                      "let base64Cipher = decodeURIComponent(encryptedData);\r",
                      "\r",
                      "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                      "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                      "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                      "\r",
                      "// Step 5: AES 복호화\r",
                      "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                      "    iv: iv,\r",
                      "    mode: CryptoJS.mode.CBC,\r",
                      "    padding: CryptoJS.pad.Pkcs7\r",
                      "});\r",
                      "\r",
                      "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                      "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                      "console.log(\"복호화 결과 : \", result);\r",
                      "\r",
                      "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                      "pm.environment.set(\"decryptedResponse\", result);\r",
                      "\r",
                      "\r",
                      "/********************     Assertion     **********************/\r",
                      "\r",
                      "// Key-Value 파싱 함수\r",
                      "function parseQueryString(str) {\r",
                      "    return str.split(\"&\").reduce((acc, pair) => {\r",
                      "        const [key, value] = pair.split(\"=\");\r",
                      "        acc[key] = value || \"\";\r",
                      "        return acc;\r",
                      "    }, {});\r",
                      "}\r",
                      "\r",
                      "// 안전 디코딩 함수\r",
                      "function safeDecodeURIComponent(str) {\r",
                      "    try {\r",
                      "        return decodeURIComponent(str);\r",
                      "    } catch (e) {\r",
                      "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                      "        return str;\r",
                      "    }\r",
                      "}\r",
                      "\r",
                      "const parsed = parseQueryString(result);\r",
                      "\r",
                      "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                      "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                      "});\r",
                      "\r",
                      "// \"성공\" 검증\r",
                      "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                      "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                      "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                      "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                      "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                      "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                      "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                      "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                      "});\r",
                      "\r",
                      "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                      "    pm.expect(parsed.TID).to.not.be.empty;\r",
                      "    pm.expect(parsed.TID).to.not.be.null;\r",
                      "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                      "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                      "});\r",
                      "\r",
                      "// 매출 발생시간과 비교 검증\r",
                      "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                      "});\r",
                      "\r",
                      "// 현재 날짜 구하기 (yyyyMMdd)\r",
                      "function getYYYYMMDD() {\r",
                      "  const today = new Date();\r",
                      "  const yyyy = today.getFullYear();\r",
                      "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                      "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                      "\r",
                      "  return `${yyyy}${mm}${dd}`;\r",
                      "}\r",
                      "\r",
                      "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                      "\r",
                      "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                      "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                      "});\r",
                      "\r",
                      "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                      "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                      "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                      "});"
                    ],
                    "_lastExecutionId": "5a2acc92-8f3b-4b26-8d14-74287aee4ff9"
                  }
                }
              ]
            }
          ],
          "event": []
        },
        "cursor": {
          "ref": "57beae52-3cce-4093-8a20-7505bd631368",
          "length": 21,
          "cycles": 1,
          "position": 11,
          "iteration": 0,
          "httpRequestId": "8d698eb6-5811-47ad-85be-edf287849d6b",
          "scriptId": "72572743-cf45-4989-9cfd-29a368220174",
          "execution": "aac11d75-783d-4462-b3ea-6b4f0bd3354a"
        }
      },
      {
        "error": {
          "name": "AssertionError",
          "index": 5,
          "test": "매출 발생시간(TRANTIME) 정상출력",
          "message": "expected '154029' to deeply equal '154028'",
          "stack": "AssertionError: expected '154029' to deeply equal '154028'\n   at Object.eval sandbox-script.js:6:18)",
          "checksum": "818e23ac706219aafa42783b2c0dc376",
          "id": "8efbae9b-4c4a-4b61-acf1-f27de10ca8a7",
          "timestamp": 1767595228679,
          "stacktrace": [
            {
              "fileName": "sandbox-script.js",
              "lineNumber": 6,
              "functionName": "Object.eval",
              "typeName": "Object",
              "methodName": "eval",
              "columnNumber": 18,
              "native": false
            }
          ]
        },
        "at": "assertion:5 in test-script",
        "source": {
          "id": "dde2888e-464d-4e49-ada8-60888ef09d04",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "e052b64b-b4a5-4d85-a951-e6c4e80c1924",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC25121515231344D775'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "80b49abe-0dfc-4676-9d00-d406132cfc45"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "1f688978-8824-464e-8dff-d1d70660d749",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0921\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "// 현재 시간 구하기 (HHmmss)\r",
                  "function getFormattedTime() {\r",
                  "  const now = new Date();\r",
                  "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                  "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                  "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                  "\r",
                  "  return `${hours}${minutes}${seconds}`;\r",
                  "}\r",
                  "\r",
                  "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                  "console.log(formattedTime)\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"485462******0767\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"삼성카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%C4%C9%C0%CC%B9%F0%C5%A9%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "bc1dcdf1-d158-4b31-abbe-292908859d4c"
              }
            }
          ]
        },
        "parent": {
          "id": "ad0a9298-d44a-4479-bf5e-5dac0027ae42",
          "name": "Kbank카드",
          "item": [
            {
              "id": "dde2888e-464d-4e49-ada8-60888ef09d04",
              "name": "정기결제 요청 (OTBILL)",
              "request": {
                "url": {
                  "host": [
                    "{{tx-credit}}"
                  ],
                  "query": [
                    {
                      "key": "CPID",
                      "value": "A010037544"
                    },
                    {
                      "key": "DATA",
                      "value": "{{encryptedData}}"
                    }
                  ],
                  "variable": []
                },
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "id": "e052b64b-b4a5-4d85-a951-e6c4e80c1924",
                    "type": "text/javascript",
                    "packages": {},
                    "exec": [
                      "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                      "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                      "\r",
                      "// 암호화 대상 데이터 (CPID 제외)\r",
                      "let params = {\r",
                      "    ITEMNAME: 'apiautotest',\r",
                      "    AMOUNT: '301',\r",
                      "    CURRENCY: '410',\r",
                      "    USERID: 'hnkim',\r",
                      "    USERAGENT: 'ONLINE',\r",
                      "    TXTYPE: 'OTBILL',\r",
                      "    SERVICETYPE: 'BATCH',\r",
                      "    ISREBILL: 'Y',\r",
                      "    BILLINFO: 'DC25121515231344D775'\r",
                      "};\r",
                      "\r",
                      "// Step 1: URL 인코딩 (key 제외, value만)\r",
                      "let encodedParams = [];\r",
                      "for (let key in params) {\r",
                      "    let value = encodeURIComponent(params[key]);\r",
                      "    encodedParams.push(`${key}=${value}`);\r",
                      "}\r",
                      "\r",
                      "// Step 2: QueryString 구성\r",
                      "let queryString = encodedParams.join('&');\r",
                      "\r",
                      "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                      "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                      "    iv: iv,\r",
                      "    mode: CryptoJS.mode.CBC,\r",
                      "    padding: CryptoJS.pad.Pkcs7\r",
                      "});\r",
                      "\r",
                      "// Step 4: Base64 → URLEncoded\r",
                      "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                      "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                      "\r",
                      "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                      "pm.environment.set(\"encryptedData\", finalEncoded);"
                    ],
                    "_lastExecutionId": "80b49abe-0dfc-4676-9d00-d406132cfc45"
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "id": "1f688978-8824-464e-8dff-d1d70660d749",
                    "type": "text/javascript",
                    "packages": {},
                    "exec": [
                      "// Step 1: 응답을 텍스트로 가져옴\r",
                      "let rawText = pm.response.text();\r",
                      "\r",
                      "// Step 2: DATA= 뒤의 암호문만 추출\r",
                      "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                      "\r",
                      "// Step 3: URI 디코딩\r",
                      "let base64Cipher = decodeURIComponent(encryptedData);\r",
                      "\r",
                      "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                      "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                      "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                      "\r",
                      "// Step 5: AES 복호화\r",
                      "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                      "    iv: iv,\r",
                      "    mode: CryptoJS.mode.CBC,\r",
                      "    padding: CryptoJS.pad.Pkcs7\r",
                      "});\r",
                      "\r",
                      "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                      "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                      "console.log(\"복호화 결과 : \", result);\r",
                      "\r",
                      "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                      "pm.environment.set(\"decryptedResponse\", result);\r",
                      "\r",
                      "\r",
                      "/********************     Assertion     **********************/\r",
                      "\r",
                      "// Key-Value 파싱 함수\r",
                      "function parseQueryString(str) {\r",
                      "    return str.split(\"&\").reduce((acc, pair) => {\r",
                      "        const [key, value] = pair.split(\"=\");\r",
                      "        acc[key] = value || \"\";\r",
                      "        return acc;\r",
                      "    }, {});\r",
                      "}\r",
                      "\r",
                      "// 안전 디코딩 함수\r",
                      "function safeDecodeURIComponent(str) {\r",
                      "    try {\r",
                      "        return decodeURIComponent(str);\r",
                      "    } catch (e) {\r",
                      "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                      "        return str;\r",
                      "    }\r",
                      "}\r",
                      "\r",
                      "const parsed = parseQueryString(result);\r",
                      "\r",
                      "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                      "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                      "});\r",
                      "\r",
                      "// \"성공\" 검증\r",
                      "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                      "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                      "    pm.expect(parsed.CARDCODE).to.eql(\"0921\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                      "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                      "});\r",
                      "\r",
                      "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                      "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                      "});\r",
                      "\r",
                      "// 현재 시간 구하기 (HHmmss)\r",
                      "function getFormattedTime() {\r",
                      "  const now = new Date();\r",
                      "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                      "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                      "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                      "\r",
                      "  return `${hours}${minutes}${seconds}`;\r",
                      "}\r",
                      "\r",
                      "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                      "console.log(formattedTime)\r",
                      "\r",
                      "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                      "});\r",
                      "\r",
                      "// Environments에 TRANTIME 저장\r",
                      "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                      "\r",
                      "// 현재 날짜 구하기 (yyyyMMdd)\r",
                      "function getYYYYMMDD() {\r",
                      "  const today = new Date();\r",
                      "  const yyyy = today.getFullYear();\r",
                      "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                      "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                      "\r",
                      "  return `${yyyy}${mm}${dd}`;\r",
                      "}\r",
                      "\r",
                      "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                      "\r",
                      "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                      "});\r",
                      "\r",
                      "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                      "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                      "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                      "    pm.expect(parsed.TID).to.not.be.empty;\r",
                      "    pm.expect(parsed.TID).to.not.be.null;\r",
                      "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                      "});\r",
                      "\r",
                      "// Environments에 TID 저장\r",
                      "pm.environment.set(\"TID\", parsed.TID);\r",
                      "\r",
                      "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                      "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                      "});\r",
                      "\r",
                      "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                      "    pm.expect(parsed.CARDNO).to.eql(\"485462******0767\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                      "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                      "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                      "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                      "});\r",
                      "\r",
                      "// \"삼성카드\" 검증\r",
                      "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.CARDNAME).to.eql(\"%C4%C9%C0%CC%B9%F0%C5%A9%C4%AB%B5%E5\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                      "});\r",
                      "\r",
                      "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                      "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                      "});"
                    ],
                    "_lastExecutionId": "bc1dcdf1-d158-4b31-abbe-292908859d4c"
                  }
                }
              ]
            },
            {
              "id": "106a437c-f7ce-4ece-a364-c1bec03bcac1",
              "name": "카드 승인 취소 (BILLCANCEL)",
              "request": {
                "url": {
                  "host": [
                    "{{tx-credit}}"
                  ],
                  "query": [
                    {
                      "key": "CPID",
                      "value": "A010037544"
                    },
                    {
                      "key": "DATA",
                      "value": "{{encryptedData}}"
                    }
                  ],
                  "variable": []
                },
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "id": "73d773ec-5180-4a1a-bacb-ff72e3e1fdcb",
                    "type": "text/javascript",
                    "packages": {},
                    "exec": [
                      "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                      "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                      "\r",
                      "// 암호화 대상 데이터 (CPID 제외)\r",
                      "let params = {\r",
                      "    AMOUNT: '301',\r",
                      "    TID: pm.environment.get(\"TID\"),\r",
                      "    CANCELTYPE: 'C',\r",
                      "    TXTYPE: 'CANCEL',\r",
                      "    SERVICETYPE: 'DANALCARD'\r",
                      "};\r",
                      "\r",
                      "// Step 1: URL 인코딩 (key 제외, value만)\r",
                      "let encodedParams = [];\r",
                      "for (let key in params) {\r",
                      "    let value = encodeURIComponent(params[key]);\r",
                      "    encodedParams.push(`${key}=${value}`);\r",
                      "}\r",
                      "\r",
                      "// Step 2: QueryString 구성\r",
                      "let queryString = encodedParams.join('&');\r",
                      "\r",
                      "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                      "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                      "    iv: iv,\r",
                      "    mode: CryptoJS.mode.CBC,\r",
                      "    padding: CryptoJS.pad.Pkcs7\r",
                      "});\r",
                      "\r",
                      "// Step 4: Base64 → URLEncoded\r",
                      "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                      "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                      "\r",
                      "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                      "pm.environment.set(\"encryptedData\", finalEncoded);"
                    ],
                    "_lastExecutionId": "33ef4cf7-c38b-49e6-b6f6-6303417ec3c4"
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "id": "1492572d-b99e-4f16-b7cd-c101ea82a513",
                    "type": "text/javascript",
                    "packages": {},
                    "exec": [
                      "// Step 1: 응답을 텍스트로 가져옴\r",
                      "let rawText = pm.response.text();\r",
                      "\r",
                      "// Step 2: DATA= 뒤의 암호문만 추출\r",
                      "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                      "\r",
                      "// Step 3: URI 디코딩\r",
                      "let base64Cipher = decodeURIComponent(encryptedData);\r",
                      "\r",
                      "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                      "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                      "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                      "\r",
                      "// Step 5: AES 복호화\r",
                      "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                      "    iv: iv,\r",
                      "    mode: CryptoJS.mode.CBC,\r",
                      "    padding: CryptoJS.pad.Pkcs7\r",
                      "});\r",
                      "\r",
                      "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                      "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                      "console.log(\"복호화 결과 : \", result);\r",
                      "\r",
                      "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                      "pm.environment.set(\"decryptedResponse\", result);\r",
                      "\r",
                      "\r",
                      "/********************     Assertion     **********************/\r",
                      "\r",
                      "// Key-Value 파싱 함수\r",
                      "function parseQueryString(str) {\r",
                      "    return str.split(\"&\").reduce((acc, pair) => {\r",
                      "        const [key, value] = pair.split(\"=\");\r",
                      "        acc[key] = value || \"\";\r",
                      "        return acc;\r",
                      "    }, {});\r",
                      "}\r",
                      "\r",
                      "// 안전 디코딩 함수\r",
                      "function safeDecodeURIComponent(str) {\r",
                      "    try {\r",
                      "        return decodeURIComponent(str);\r",
                      "    } catch (e) {\r",
                      "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                      "        return str;\r",
                      "    }\r",
                      "}\r",
                      "\r",
                      "const parsed = parseQueryString(result);\r",
                      "\r",
                      "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                      "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                      "});\r",
                      "\r",
                      "// \"성공\" 검증\r",
                      "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                      "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                      "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                      "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                      "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                      "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                      "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                      "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                      "});\r",
                      "\r",
                      "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                      "    pm.expect(parsed.TID).to.not.be.empty;\r",
                      "    pm.expect(parsed.TID).to.not.be.null;\r",
                      "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                      "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                      "});\r",
                      "\r",
                      "// 매출 발생시간과 비교 검증\r",
                      "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                      "});\r",
                      "\r",
                      "// 현재 날짜 구하기 (yyyyMMdd)\r",
                      "function getYYYYMMDD() {\r",
                      "  const today = new Date();\r",
                      "  const yyyy = today.getFullYear();\r",
                      "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                      "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                      "\r",
                      "  return `${yyyy}${mm}${dd}`;\r",
                      "}\r",
                      "\r",
                      "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                      "\r",
                      "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                      "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                      "});\r",
                      "\r",
                      "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                      "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                      "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                      "});"
                    ],
                    "_lastExecutionId": "58dfe7ef-f2b4-4a21-b139-004c0bcdf74d"
                  }
                }
              ]
            }
          ],
          "event": []
        },
        "cursor": {
          "ref": "c8572468-84b5-4040-83e1-3b6a7d0a2cff",
          "length": 21,
          "cycles": 1,
          "position": 17,
          "iteration": 0,
          "httpRequestId": "349b10c5-04ba-4286-9a8f-3d47af18977c",
          "scriptId": "1f688978-8824-464e-8dff-d1d70660d749",
          "execution": "bc1dcdf1-d158-4b31-abbe-292908859d4c"
        }
      },
      {
        "error": {
          "name": "AssertionError",
          "index": 5,
          "test": "매출 발생시간(TRANTIME) 정상출력",
          "message": "expected '154032' to deeply equal '154031'",
          "stack": "AssertionError: expected '154032' to deeply equal '154031'\n   at Object.eval sandbox-script.js:6:20)",
          "checksum": "304bbfe1a237d980c90f2e0be2c8c69e",
          "id": "e3566410-4401-4edf-af84-0a44fd602c49",
          "timestamp": 1767595231714,
          "stacktrace": [
            {
              "fileName": "sandbox-script.js",
              "lineNumber": 6,
              "functionName": "Object.eval",
              "typeName": "Object",
              "methodName": "eval",
              "columnNumber": 20,
              "native": false
            }
          ]
        },
        "at": "assertion:5 in test-script",
        "source": {
          "id": "b7ea07af-1788-4a8b-9e7b-0841bf94216b",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "f2b88dfe-6719-4c2f-a0c5-2cadf1a5a43b",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC2512151453119224E3'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "2d80be22-42f1-4fae-82bc-0eec1d6ba42d"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "3a5b6d47-c985-49d2-9505-bcfbbf38ec8d",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0700\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "// 현재 시간 구하기 (HHmmss)\r",
                  "function getFormattedTime() {\r",
                  "  const now = new Date();\r",
                  "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                  "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                  "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                  "\r",
                  "  return `${hours}${minutes}${seconds}`;\r",
                  "}\r",
                  "\r",
                  "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                  "console.log(formattedTime)\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"513792******3380\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"롯데카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%B7%D4%B5%A5%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "f3baaf42-2b93-4d13-99ea-a7538cf726a6"
              }
            }
          ]
        },
        "parent": {
          "id": "21e235ee-21ba-40d8-934b-f24937e236f0",
          "name": "롯데카드",
          "item": [
            {
              "id": "b7ea07af-1788-4a8b-9e7b-0841bf94216b",
              "name": "정기결제 요청 (OTBILL)",
              "request": {
                "url": {
                  "host": [
                    "{{tx-credit}}"
                  ],
                  "query": [
                    {
                      "key": "CPID",
                      "value": "A010037544"
                    },
                    {
                      "key": "DATA",
                      "value": "{{encryptedData}}"
                    }
                  ],
                  "variable": []
                },
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "id": "f2b88dfe-6719-4c2f-a0c5-2cadf1a5a43b",
                    "type": "text/javascript",
                    "packages": {},
                    "exec": [
                      "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                      "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                      "\r",
                      "// 암호화 대상 데이터 (CPID 제외)\r",
                      "let params = {\r",
                      "    ITEMNAME: 'apiautotest',\r",
                      "    AMOUNT: '301',\r",
                      "    CURRENCY: '410',\r",
                      "    USERID: 'hnkim',\r",
                      "    USERAGENT: 'ONLINE',\r",
                      "    TXTYPE: 'OTBILL',\r",
                      "    SERVICETYPE: 'BATCH',\r",
                      "    ISREBILL: 'Y',\r",
                      "    BILLINFO: 'DC2512151453119224E3'\r",
                      "};\r",
                      "\r",
                      "// Step 1: URL 인코딩 (key 제외, value만)\r",
                      "let encodedParams = [];\r",
                      "for (let key in params) {\r",
                      "    let value = encodeURIComponent(params[key]);\r",
                      "    encodedParams.push(`${key}=${value}`);\r",
                      "}\r",
                      "\r",
                      "// Step 2: QueryString 구성\r",
                      "let queryString = encodedParams.join('&');\r",
                      "\r",
                      "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                      "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                      "    iv: iv,\r",
                      "    mode: CryptoJS.mode.CBC,\r",
                      "    padding: CryptoJS.pad.Pkcs7\r",
                      "});\r",
                      "\r",
                      "// Step 4: Base64 → URLEncoded\r",
                      "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                      "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                      "\r",
                      "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                      "pm.environment.set(\"encryptedData\", finalEncoded);"
                    ],
                    "_lastExecutionId": "2d80be22-42f1-4fae-82bc-0eec1d6ba42d"
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "id": "3a5b6d47-c985-49d2-9505-bcfbbf38ec8d",
                    "type": "text/javascript",
                    "packages": {},
                    "exec": [
                      "// Step 1: 응답을 텍스트로 가져옴\r",
                      "let rawText = pm.response.text();\r",
                      "\r",
                      "// Step 2: DATA= 뒤의 암호문만 추출\r",
                      "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                      "\r",
                      "// Step 3: URI 디코딩\r",
                      "let base64Cipher = decodeURIComponent(encryptedData);\r",
                      "\r",
                      "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                      "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                      "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                      "\r",
                      "// Step 5: AES 복호화\r",
                      "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                      "    iv: iv,\r",
                      "    mode: CryptoJS.mode.CBC,\r",
                      "    padding: CryptoJS.pad.Pkcs7\r",
                      "});\r",
                      "\r",
                      "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                      "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                      "console.log(\"복호화 결과 : \", result);\r",
                      "\r",
                      "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                      "pm.environment.set(\"decryptedResponse\", result);\r",
                      "\r",
                      "\r",
                      "/********************     Assertion     **********************/\r",
                      "\r",
                      "// Key-Value 파싱 함수\r",
                      "function parseQueryString(str) {\r",
                      "    return str.split(\"&\").reduce((acc, pair) => {\r",
                      "        const [key, value] = pair.split(\"=\");\r",
                      "        acc[key] = value || \"\";\r",
                      "        return acc;\r",
                      "    }, {});\r",
                      "}\r",
                      "\r",
                      "// 안전 디코딩 함수\r",
                      "function safeDecodeURIComponent(str) {\r",
                      "    try {\r",
                      "        return decodeURIComponent(str);\r",
                      "    } catch (e) {\r",
                      "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                      "        return str;\r",
                      "    }\r",
                      "}\r",
                      "\r",
                      "const parsed = parseQueryString(result);\r",
                      "\r",
                      "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                      "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                      "});\r",
                      "\r",
                      "// \"성공\" 검증\r",
                      "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                      "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                      "    pm.expect(parsed.CARDCODE).to.eql(\"0700\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                      "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                      "});\r",
                      "\r",
                      "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                      "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                      "});\r",
                      "\r",
                      "// 현재 시간 구하기 (HHmmss)\r",
                      "function getFormattedTime() {\r",
                      "  const now = new Date();\r",
                      "  const hours = String(now.getHours()).padStart(2, \"0\");\r",
                      "  const minutes = String(now.getMinutes()).padStart(2, \"0\");\r",
                      "  const seconds = String(now.getSeconds()).padStart(2, \"0\");\r",
                      "\r",
                      "  return `${hours}${minutes}${seconds}`;\r",
                      "}\r",
                      "\r",
                      "const formattedTime = getFormattedTime(); // 출력: 151814 (예시)\r",
                      "console.log(formattedTime)\r",
                      "\r",
                      "pm.test(\"매출 발생시간(TRANTIME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TRANTIME).to.eql(formattedTime)\r",
                      "});\r",
                      "\r",
                      "// Environments에 TRANTIME 저장\r",
                      "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                      "\r",
                      "// 현재 날짜 구하기 (yyyyMMdd)\r",
                      "function getYYYYMMDD() {\r",
                      "  const today = new Date();\r",
                      "  const yyyy = today.getFullYear();\r",
                      "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                      "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                      "\r",
                      "  return `${yyyy}${mm}${dd}`;\r",
                      "}\r",
                      "\r",
                      "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                      "\r",
                      "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                      "});\r",
                      "\r",
                      "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                      "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                      "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                      "    pm.expect(parsed.TID).to.not.be.empty;\r",
                      "    pm.expect(parsed.TID).to.not.be.null;\r",
                      "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                      "});\r",
                      "\r",
                      "// Environments에 TID 저장\r",
                      "pm.environment.set(\"TID\", parsed.TID);\r",
                      "\r",
                      "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                      "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                      "});\r",
                      "\r",
                      "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                      "    pm.expect(parsed.CARDNO).to.eql(\"513792******3380\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                      "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                      "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                      "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                      "});\r",
                      "\r",
                      "// \"롯데카드\" 검증\r",
                      "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.CARDNAME).to.eql(\"%B7%D4%B5%A5%C4%AB%B5%E5\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                      "});\r",
                      "\r",
                      "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                      "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                      "});"
                    ],
                    "_lastExecutionId": "f3baaf42-2b93-4d13-99ea-a7538cf726a6"
                  }
                }
              ]
            },
            {
              "id": "1b301c59-8b53-45a5-808d-505918f9849b",
              "name": "카드 승인 취소 (BILLCANCEL)",
              "request": {
                "url": {
                  "host": [
                    "{{tx-credit}}"
                  ],
                  "query": [
                    {
                      "key": "CPID",
                      "value": "A010037544"
                    },
                    {
                      "key": "DATA",
                      "value": "{{encryptedData}}"
                    }
                  ],
                  "variable": []
                },
                "method": "POST"
              },
              "response": [],
              "event": [
                {
                  "listen": "prerequest",
                  "script": {
                    "id": "161c6bb1-35e9-4e52-bc4e-d14338e93168",
                    "type": "text/javascript",
                    "packages": {},
                    "exec": [
                      "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                      "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                      "\r",
                      "// 암호화 대상 데이터 (CPID 제외)\r",
                      "let params = {\r",
                      "    AMOUNT: '301',\r",
                      "    TID: pm.environment.get(\"TID\"),\r",
                      "    CANCELTYPE: 'C',\r",
                      "    TXTYPE: 'CANCEL',\r",
                      "    SERVICETYPE: 'DANALCARD'\r",
                      "};\r",
                      "\r",
                      "// Step 1: URL 인코딩 (key 제외, value만)\r",
                      "let encodedParams = [];\r",
                      "for (let key in params) {\r",
                      "    let value = encodeURIComponent(params[key]);\r",
                      "    encodedParams.push(`${key}=${value}`);\r",
                      "}\r",
                      "\r",
                      "// Step 2: QueryString 구성\r",
                      "let queryString = encodedParams.join('&');\r",
                      "\r",
                      "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                      "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                      "    iv: iv,\r",
                      "    mode: CryptoJS.mode.CBC,\r",
                      "    padding: CryptoJS.pad.Pkcs7\r",
                      "});\r",
                      "\r",
                      "// Step 4: Base64 → URLEncoded\r",
                      "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                      "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                      "\r",
                      "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                      "pm.environment.set(\"encryptedData\", finalEncoded);"
                    ],
                    "_lastExecutionId": "89a075c5-d227-4cbb-a03d-7ed58e3a79ef"
                  }
                },
                {
                  "listen": "test",
                  "script": {
                    "id": "fd716c69-3d36-4d5b-ae72-a4d9f60d1d9e",
                    "type": "text/javascript",
                    "packages": {},
                    "exec": [
                      "// Step 1: 응답을 텍스트로 가져옴\r",
                      "let rawText = pm.response.text();\r",
                      "\r",
                      "// Step 2: DATA= 뒤의 암호문만 추출\r",
                      "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                      "\r",
                      "// Step 3: URI 디코딩\r",
                      "let base64Cipher = decodeURIComponent(encryptedData);\r",
                      "\r",
                      "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                      "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                      "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                      "\r",
                      "// Step 5: AES 복호화\r",
                      "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                      "    iv: iv,\r",
                      "    mode: CryptoJS.mode.CBC,\r",
                      "    padding: CryptoJS.pad.Pkcs7\r",
                      "});\r",
                      "\r",
                      "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                      "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                      "console.log(\"복호화 결과 : \", result);\r",
                      "\r",
                      "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                      "pm.environment.set(\"decryptedResponse\", result);\r",
                      "\r",
                      "\r",
                      "/********************     Assertion     **********************/\r",
                      "\r",
                      "// Key-Value 파싱 함수\r",
                      "function parseQueryString(str) {\r",
                      "    return str.split(\"&\").reduce((acc, pair) => {\r",
                      "        const [key, value] = pair.split(\"=\");\r",
                      "        acc[key] = value || \"\";\r",
                      "        return acc;\r",
                      "    }, {});\r",
                      "}\r",
                      "\r",
                      "// 안전 디코딩 함수\r",
                      "function safeDecodeURIComponent(str) {\r",
                      "    try {\r",
                      "        return decodeURIComponent(str);\r",
                      "    } catch (e) {\r",
                      "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                      "        return str;\r",
                      "    }\r",
                      "}\r",
                      "\r",
                      "const parsed = parseQueryString(result);\r",
                      "\r",
                      "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                      "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                      "});\r",
                      "\r",
                      "// \"성공\" 검증\r",
                      "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                      "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                      "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                      "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                      "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                      "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                      "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                      "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                      "});\r",
                      "\r",
                      "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                      "    pm.expect(parsed.TID).to.not.be.empty;\r",
                      "    pm.expect(parsed.TID).to.not.be.null;\r",
                      "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                      "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                      "});\r",
                      "\r",
                      "// 매출 발생시간과 비교 검증\r",
                      "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                      "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                      "});\r",
                      "\r",
                      "// 현재 날짜 구하기 (yyyyMMdd)\r",
                      "function getYYYYMMDD() {\r",
                      "  const today = new Date();\r",
                      "  const yyyy = today.getFullYear();\r",
                      "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                      "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                      "\r",
                      "  return `${yyyy}${mm}${dd}`;\r",
                      "}\r",
                      "\r",
                      "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                      "\r",
                      "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                      "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                      "});\r",
                      "\r",
                      "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                      "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                      "});\r",
                      "\r",
                      "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                      "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                      "});"
                    ],
                    "_lastExecutionId": "310b70c0-a5ac-4446-8a65-d217e9107467"
                  }
                }
              ]
            }
          ],
          "event": []
        },
        "cursor": {
          "ref": "b5c96217-9963-4d8f-ba75-5099727fb8db",
          "length": 21,
          "cycles": 1,
          "position": 19,
          "iteration": 0,
          "httpRequestId": "cbf2e9ad-cce8-4624-b293-3e5e704bd38f",
          "scriptId": "3a5b6d47-c985-49d2-9505-bcfbbf38ec8d",
          "execution": "f3baaf42-2b93-4d13-99ea-a7538cf726a6"
        }
      }
    ],
    "error": null
  }
}