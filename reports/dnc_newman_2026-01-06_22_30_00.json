{
  "collection": {
    "_": {
      "postman_id": "ad14dfb9-75d7-4a97-85bf-8665f83ae3c1",
      "exporter_id": "24140936",
      "collection_link": "https://red-escape-704404.postman.co/workspace/Team-Workspace~a1f4d6b2-7a17-4360-8a8d-46313f959e2b/collection/24140936-ad14dfb9-75d7-4a97-85bf-8665f83ae3c1?action=share&source=collection_link&creator=24140936"
    },
    "item": [
      {
        "id": "8cd2ef4d-5bdb-47e2-ac82-e1caf3bc3072",
        "name": "CP 및 정기결제 요청 전송",
        "item": [
          {
            "id": "da6fd2e3-84c4-4380-a670-1db793871bdd",
            "name": "READY - BATCH",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/x-www-form-urlencoded; charset=UTF-8"
                }
              ],
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "test",
                "script": {
                  "id": "1960f09d-e32e-4ebb-9ae1-f92f9a36da51",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "// 파싱 및 개별 디코딩\r",
                    "const parsed = parseQueryString(result);\r",
                    "const startUrlDecoded = safeDecodeURIComponent(parsed.STARTURL);\r",
                    "console.log(\"STARTURL(디코딩):\", startUrlDecoded);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메시지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"정기결제 초기인증 표준페이지 시작 URL(STARTURL) 정상출력\", function () {\r",
                    "    pm.expect(startUrlDecoded).to.eql(\"https://checkout.teledit.com/creditcard_recurring/web\")\r",
                    "})\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"위 표준페이지 시작 URL 전송 파라미터(STARTPARAMS) 정상출력\", function () {\r",
                    "    pm.expect(parsed.STARTPARAMS).to.not.be.undefined;\r",
                    "    pm.expect(parsed.STARTPARAMS).to.not.be.empty;\r",
                    "    pm.expect(parsed.STARTPARAMS).to.not.be.null;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"결제금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "3717e8c0-8d48-4393-87bc-8322617d4ea0"
                }
              },
              {
                "listen": "prerequest",
                "script": {
                  "id": "34b9cfef-9791-4c3e-9026-31d98be45f97",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'PC',\r",
                    "    TXTYPE: 'AUTH',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    CANCELURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                    "    RETURNURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                    "    ISBILL: 'Y',\r",
                    "    ISNOTI: 'N'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "6dc1fcad-648a-4541-8ce9-cdf5981e3068"
                }
              }
            ]
          },
          {
            "id": "bf3954cf-0a78-4482-a1aa-e0298fd36e53",
            "name": "READY - DANALCARD",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/x-www-form-urlencoded; charset=UTF-8"
                }
              ],
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "test",
                "script": {
                  "id": "ce739162-f223-40ee-9ab0-1f17c9c89198",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "// 파싱 및 개별 디코딩\r",
                    "const parsed = parseQueryString(result);\r",
                    "const startUrlDecoded = safeDecodeURIComponent(parsed.STARTURL);\r",
                    "console.log(\"STARTURL(디코딩):\", startUrlDecoded);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메시지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"정기결제 초기인증 표준페이지 시작 URL(STARTURL) 정상출력\", function () {\r",
                    "    pm.expect(startUrlDecoded).to.eql(\"https://checkout.teledit.com/creditcard_std/web\")\r",
                    "})\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"위 표준페이지 시작 URL 전송 파라미터(STARTPARAMS) 정상출력\", function () {\r",
                    "    pm.expect(parsed.STARTPARAMS).to.not.be.undefined;\r",
                    "    pm.expect(parsed.STARTPARAMS).to.not.be.empty;\r",
                    "    pm.expect(parsed.STARTPARAMS).to.not.be.null;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"결제금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "8e090f95-9351-42ac-ab0a-d7cde7d2d19e"
                }
              },
              {
                "listen": "prerequest",
                "script": {
                  "id": "1d9c7052-9f12-41c9-bce8-4db77dc52573",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'PC',\r",
                    "    TXTYPE: 'AUTH',\r",
                    "    SERVICETYPE: 'DANALCARD',\r",
                    "    CANCELURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                    "    RETURNURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                    "    ISBILL: 'Y',\r",
                    "    ISNOTI: 'N'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "c415de21-7731-4cc9-a166-10e364c928cd"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "ed4b41b2-17ca-4d04-b957-79542aabbf74",
        "name": "초기 인증 결제 요청",
        "item": [
          {
            "id": "c0fa5d37-ee95-475f-823b-28bdfbcfb012",
            "name": "ISSUEBILLKEY",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/x-www-form-urlencoded; charset=UTF-8"
                }
              ],
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "cf68f30c-64a4-4ad4-831e-4cd8d4564b5e",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get('TID'),\r",
                    "    TXTYPE: 'ISSUEBILLKEY',\r",
                    "    SERVICETYPE: 'BATCH'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "7f82c105-91a7-4631-a331-c447332826e6"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "0ef11a3c-2a30-4baa-bab3-e74ea2b5a8e5",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "// 파싱 및 개별 디코딩\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) : 1104 출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"1104\")\r",
                    "});\r",
                    "\r",
                    "// \"존재하지 않는 거래 입니다.\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) : 존재하지 않는 거래입니다. 출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%C1%B8%C0%E7%C7%CF%C1%F6+%BE%CA%B4%C2+%B0%C5%B7%A1+%C0%D4%B4%CF%B4%D9.\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "52963ff0-cf8c-49f6-afaa-bf4cae9e5d2f"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "a59cd8ff-1d32-4807-9f16-83ade7b42ef6",
        "name": "삼성카드",
        "item": [
          {
            "id": "59b9e6c4-4ea1-48db-9bad-cf8b37afc341",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/x-www-form-urlencoded; charset=UTF-8"
                }
              ],
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "4753bae3-b3df-4183-b831-dac7a7c9dbdd",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC250730151749FFCAA0',\r",
                    "    USERNAME: '김하늘',\r",
                    "    USERPHONE: '01085402697',\r",
                    "    ORDERID: '01234567'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "842064c3-7463-481c-a503-b80a0ec8d9d7"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "46a46141-6534-4e0e-a16c-8396833e860b",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0500\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.eql(\"01085402697\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                    "  // 현재 시간 선언\r",
                    "  const now = new Date();\r",
                    "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                    "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                    "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                    "  const t = parsed.TRANTIME;\r",
                    "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                    "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                    "\r",
                    "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                    "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.eql(\"01234567\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"512028******7294\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"삼성카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"%BB%EF%BC%BA%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.eql(\"%EA%B9%3F%3F%3F%3F%3F\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "e363098c-db75-4ee0-9ac0-503e04fe6001"
                }
              }
            ]
          },
          {
            "id": "22e4506d-c6df-400e-a501-5af9a29bb61b",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "test",
                "script": {
                  "id": "f1f00b59-6dba-4948-9e52-a8e014323b6e",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "ee65cbf2-cbd7-4c61-a661-91690f5fce4b"
                }
              },
              {
                "listen": "prerequest",
                "script": {
                  "id": "931240b5-d009-47e9-97a6-b11609724109",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "905c812b-ed28-47a5-8505-6fd88a857f50"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "2583774b-d1ec-4e9a-b802-7e0101ce0a3d",
        "name": "현대카드",
        "item": [
          {
            "id": "ef63fd08-4614-477c-ab02-e2c40f9e382d",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "1ce05d53-f53e-449f-aef8-7f8ce673af69",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC221222165535557F38'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "648fd12b-59ec-4957-804d-f4d56dcba78a"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "c0db2010-f0af-41b0-b9b0-1e3580c2f65c",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0400\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                    "  // 현재 시간 선언\r",
                    "  const now = new Date();\r",
                    "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                    "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                    "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                    "  const t = parsed.TRANTIME;\r",
                    "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                    "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                    "\r",
                    "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                    "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"403293******4003\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"현대카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"%C7%F6%B4%EB%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "})\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "2825560b-808c-411c-9bba-7a85a5c1e632"
                }
              }
            ]
          },
          {
            "id": "22d00834-6c58-4ee6-badf-8aa8dc490b03",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "c04a91c3-2325-4972-a382-0b19b0e31786",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "8bc901df-2450-4ddd-a8ff-317c063325b1"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "aa90144e-367f-4de0-b036-f85bdbee4ed6",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "f471913c-7852-4223-8294-ea799d410658"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "6fa7a308-4902-441c-b5aa-77eddd69c9d9",
        "name": "신한카드",
        "item": [
          {
            "id": "e0de504c-bd57-4d66-9bb6-e0dcd521dc35",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "0505c6ba-0a09-4b3f-bf2c-825b2e3e8806",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC2507311547242F2CD0'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "e2a7a888-69c2-4dae-9085-91d065d632ec"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "0c81a4cc-6f3b-43fc-820d-9dbefdd86acb",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0100\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                    "  // 현재 시간 선언\r",
                    "  const now = new Date();\r",
                    "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                    "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                    "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                    "  const t = parsed.TRANTIME;\r",
                    "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                    "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                    "\r",
                    "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                    "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"451842******5446\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"신한카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"%BD%C5%C7%D1%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "a81923b9-0600-4215-ab0f-5d757a80921c"
                }
              }
            ]
          },
          {
            "id": "9a808a8f-17d7-4417-b8a8-64d93841f4a6",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "b35692b0-b2ee-4fcd-bbd5-0456bdf2f700",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "c341e5ef-8fc2-428d-ae9c-404850bc7cab"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "040a518a-d6c9-4771-9d2e-85efbd040c7e",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "1413348b-78ef-4683-a7db-a31545fc45f0"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "aa580b27-e8ba-4b64-8b53-24a02676fadb",
        "name": "농협카드",
        "item": [
          {
            "id": "43a3eeb7-1cb5-414d-8fa6-c2f4af73630a",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "72012695-80a2-493c-9197-d3e5e6f8ef3e",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC2512151528144A426D'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "2a70fa5e-1d2e-481e-825e-29181789e5ce"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "35747dda-7fba-42b7-8178-a64b8c128e88",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0800\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                    "  // 현재 시간 선언\r",
                    "  const now = new Date();\r",
                    "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                    "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                    "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                    "  const t = parsed.TRANTIME;\r",
                    "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                    "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                    "\r",
                    "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                    "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"542586******3820\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "// \"NH농협카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"NH%B3%F3%C7%F9%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "815cda7b-91c5-4115-8f7b-a1147fb7726a"
                }
              }
            ]
          },
          {
            "id": "77289543-5fca-455b-bbb1-ecb3db8f9de0",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "dbba8045-59e0-45cc-af00-4b7e2067088c",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "a2ff7029-d8f2-4ee2-8701-222d3a0f877d"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "4c7acc85-274d-437e-8029-21616bcd3d83",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "3186fa67-6b61-445c-bfae-bb38d8ef0825"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "d8db41af-ef2c-4347-aac8-5ed89eaf93aa",
        "name": "국민카드",
        "item": [
          {
            "id": "250e33f4-29a9-403c-9632-9282c42f788b",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "5dd56be9-b7d8-439b-93a9-b22e39a77125",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC250804165745DBD04E'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "0dd7962e-0b08-46d0-a6fc-566d06104c28"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "a43a1b17-6c89-4874-ae39-dcdb67949085",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0300\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                    "  // 현재 시간 선언\r",
                    "  const now = new Date();\r",
                    "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                    "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                    "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                    "  const t = parsed.TRANTIME;\r",
                    "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                    "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                    "\r",
                    "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                    "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"540926******6041\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"국민카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"KB%B1%B9%B9%CE%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "93f8d5d9-01ef-42f5-b6f1-0efdbbc788ca"
                }
              }
            ]
          },
          {
            "id": "99a69ed7-531a-410d-861f-258203323edc",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "09baea18-a92b-4ac8-9192-fb5878adac13",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "f230d788-e3ac-4148-b934-270229ca78e3"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "dab17057-9a36-4911-ac48-d5cd866842e5",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "41872359-eed1-4b0d-8e1f-567a8fc6b07e"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "4518a879-59d1-40a5-90c7-51f8cda64fac",
        "name": "우리BC카드",
        "item": [
          {
            "id": "e80d987d-085a-471c-98df-5362b668d820",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "512bfdaa-b922-4574-98cb-f0d96ba32c47",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC25080416595836B04B'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "ee9991dd-d8c0-4cfe-bc2b-49185ab079aa"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "e1465812-a883-44b9-81cc-387b4126b3c3",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0202\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                    "  // 현재 시간 선언\r",
                    "  const now = new Date();\r",
                    "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                    "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                    "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                    "  const t = parsed.TRANTIME;\r",
                    "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                    "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                    "\r",
                    "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                    "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"538920******1226\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"삼성카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"%BF%EC%B8%AEBC%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "e3328387-555b-4c9d-8677-557e3d61f53a"
                }
              }
            ]
          },
          {
            "id": "2bfd1e35-e631-4c4f-b69d-7f124ecfdcf7",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "20ee37da-7bf0-47db-809f-08bc9f977586",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "c4bfeb64-ea34-4f55-81a1-bd032e338643"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "d3c8c1b2-9787-4b7e-85d2-73fed0bd7ee4",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "c8bd92a5-dc1f-4806-ba1e-e0e0f288de5b"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "d0141d19-0fb9-4bb5-9523-9cbc43d7da13",
        "name": "우리독자카드",
        "item": [
          {
            "id": "ab53d137-7c46-4dbf-af38-baeb4573c13c",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "f2c3af11-aa02-48fb-aa6a-2180b7eebd0e",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC251215145003CEDD72'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "6b42aac6-3e16-4db2-b7ef-9623a18afe5b"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "52edb961-17cc-4534-aaf9-297f71884269",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0907\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                    "  // 현재 시간 선언\r",
                    "  const now = new Date();\r",
                    "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                    "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                    "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                    "  const t = parsed.TRANTIME;\r",
                    "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                    "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                    "\r",
                    "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                    "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"624404******8380\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"롯데카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"%BF%EC%B8%AE%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "a3e2c600-26a5-4763-92e4-b570be8ac66e"
                }
              }
            ]
          },
          {
            "id": "b93fc38a-4298-41de-aebd-0c1532f16327",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "e4ef27f4-3164-4645-a527-74812f1b2dbc",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "86d21b63-60c9-4533-85c1-f55925ef5439"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "0366cea5-2545-4ac5-875c-b68815f8806f",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "668c7ec6-1004-45aa-9067-4d3c6543d1a3"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "facbfd59-4eea-4708-bb50-db34c250ad14",
        "name": "Kbank카드",
        "item": [
          {
            "id": "774e09b7-7f56-4e14-b8a0-a5b2784ff031",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "18228943-984e-4119-adfe-8427bdf045d5",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC25121515231344D775'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "07feae6f-c949-4f5f-b1a9-d27c3f6546d8"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "89867009-a8c3-4ea0-b02b-eb7988de5559",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0921\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                    "  // 현재 시간 선언\r",
                    "  const now = new Date();\r",
                    "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                    "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                    "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                    "  const t = parsed.TRANTIME;\r",
                    "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                    "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                    "\r",
                    "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                    "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"485462******0767\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"삼성카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"%C4%C9%C0%CC%B9%F0%C5%A9%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "7712d593-476f-4ea6-a84f-8c183ebd6529"
                }
              }
            ]
          },
          {
            "id": "fd7aab42-ab93-4dbf-a34a-767b02c7b9b5",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "e7feacda-897b-4182-9c02-a3200c335f72",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "4397305f-b094-4995-be61-db7b0d309397"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "3892475a-c3ce-4358-950f-1f0e1b46a0e3",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "f718a1eb-f649-4665-bf01-345660894fc6"
                }
              }
            ]
          }
        ],
        "event": []
      },
      {
        "id": "8ca9ff05-78b6-47b4-95b3-70f76e0bc174",
        "name": "롯데카드",
        "item": [
          {
            "id": "5a0fbd38-82ba-493e-a70e-2d3a626cb0d2",
            "name": "정기결제 요청 (OTBILL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "e1374592-5f34-4540-b508-3a76457d61fb",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    ITEMNAME: 'apiautotest',\r",
                    "    AMOUNT: '301',\r",
                    "    CURRENCY: '410',\r",
                    "    USERID: 'hnkim',\r",
                    "    USERAGENT: 'ONLINE',\r",
                    "    TXTYPE: 'OTBILL',\r",
                    "    SERVICETYPE: 'BATCH',\r",
                    "    ISREBILL: 'Y',\r",
                    "    BILLINFO: 'DC2512151453119224E3'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "ffd11ea4-076f-45eb-8e26-910091d513c5"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "53d31792-a38d-4dda-868d-9116c460d1cd",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDCODE).to.eql(\"0700\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                    "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                    "  // 현재 시간 선언\r",
                    "  const now = new Date();\r",
                    "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                    "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                    "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                    "  const t = parsed.TRANTIME;\r",
                    "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                    "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                    "\r",
                    "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                    "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TRANTIME 저장\r",
                    "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "});\r",
                    "\r",
                    "// Environments에 TID 저장\r",
                    "pm.environment.set(\"TID\", parsed.TID);\r",
                    "\r",
                    "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                    "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNO).to.eql(\"513792******3380\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                    "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                    "});\r",
                    "\r",
                    "// \"롯데카드\" 검증\r",
                    "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.CARDNAME).to.eql(\"%B7%D4%B5%A5%C4%AB%B5%E5\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                    "});\r",
                    "\r",
                    "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "bdd453b1-03a3-41f6-84c3-7a92e6c398ab"
                }
              }
            ]
          },
          {
            "id": "de8cd767-96af-4e77-aba2-ca181f381144",
            "name": "카드 승인 취소 (BILLCANCEL)",
            "request": {
              "url": {
                "host": [
                  "{{tx-credit}}"
                ],
                "query": [
                  {
                    "key": "CPID",
                    "value": "A010037544"
                  },
                  {
                    "key": "DATA",
                    "value": "{{encryptedData}}"
                  }
                ],
                "variable": []
              },
              "method": "POST"
            },
            "response": [],
            "event": [
              {
                "listen": "prerequest",
                "script": {
                  "id": "232877cf-4734-49d3-8272-631a5b896522",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// 암호화 대상 데이터 (CPID 제외)\r",
                    "let params = {\r",
                    "    AMOUNT: '301',\r",
                    "    TID: pm.environment.get(\"TID\"),\r",
                    "    CANCELTYPE: 'C',\r",
                    "    TXTYPE: 'CANCEL',\r",
                    "    SERVICETYPE: 'DANALCARD'\r",
                    "};\r",
                    "\r",
                    "// Step 1: URL 인코딩 (key 제외, value만)\r",
                    "let encodedParams = [];\r",
                    "for (let key in params) {\r",
                    "    let value = encodeURIComponent(params[key]);\r",
                    "    encodedParams.push(`${key}=${value}`);\r",
                    "}\r",
                    "\r",
                    "// Step 2: QueryString 구성\r",
                    "let queryString = encodedParams.join('&');\r",
                    "\r",
                    "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                    "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 4: Base64 → URLEncoded\r",
                    "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                    "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                    "\r",
                    "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                    "pm.environment.set(\"encryptedData\", finalEncoded);"
                  ],
                  "_lastExecutionId": "1dc0d927-1565-4cec-a938-f2bc92f4cc0a"
                }
              },
              {
                "listen": "test",
                "script": {
                  "id": "f2d6de81-0acb-4c14-9824-81baffad97e9",
                  "type": "text/javascript",
                  "packages": {},
                  "exec": [
                    "// Step 1: 응답을 텍스트로 가져옴\r",
                    "let rawText = pm.response.text();\r",
                    "\r",
                    "// Step 2: DATA= 뒤의 암호문만 추출\r",
                    "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                    "\r",
                    "// Step 3: URI 디코딩\r",
                    "let base64Cipher = decodeURIComponent(encryptedData);\r",
                    "\r",
                    "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                    "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                    "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                    "\r",
                    "// Step 5: AES 복호화\r",
                    "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                    "    iv: iv,\r",
                    "    mode: CryptoJS.mode.CBC,\r",
                    "    padding: CryptoJS.pad.Pkcs7\r",
                    "});\r",
                    "\r",
                    "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                    "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                    "console.log(\"복호화 결과 : \", result);\r",
                    "\r",
                    "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                    "pm.environment.set(\"decryptedResponse\", result);\r",
                    "\r",
                    "\r",
                    "/********************     Assertion     **********************/\r",
                    "\r",
                    "// Key-Value 파싱 함수\r",
                    "function parseQueryString(str) {\r",
                    "    return str.split(\"&\").reduce((acc, pair) => {\r",
                    "        const [key, value] = pair.split(\"=\");\r",
                    "        acc[key] = value || \"\";\r",
                    "        return acc;\r",
                    "    }, {});\r",
                    "}\r",
                    "\r",
                    "// 안전 디코딩 함수\r",
                    "function safeDecodeURIComponent(str) {\r",
                    "    try {\r",
                    "        return decodeURIComponent(str);\r",
                    "    } catch (e) {\r",
                    "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                    "        return str;\r",
                    "    }\r",
                    "}\r",
                    "\r",
                    "const parsed = parseQueryString(result);\r",
                    "\r",
                    "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                    "});\r",
                    "\r",
                    "// \"성공\" 검증\r",
                    "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                    "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                    "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                    "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                    "    pm.expect(parsed.TID).to.not.be.empty;\r",
                    "    pm.expect(parsed.TID).to.not.be.null;\r",
                    "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                    "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                    "});\r",
                    "\r",
                    "// 매출 발생시간과 비교 검증\r",
                    "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                    "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                    "});\r",
                    "\r",
                    "// 현재 날짜 구하기 (yyyyMMdd)\r",
                    "function getYYYYMMDD() {\r",
                    "  const today = new Date();\r",
                    "  const yyyy = today.getFullYear();\r",
                    "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                    "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                    "\r",
                    "  return `${yyyy}${mm}${dd}`;\r",
                    "}\r",
                    "\r",
                    "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                    "\r",
                    "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                    "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                    "});\r",
                    "\r",
                    "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                    "});\r",
                    "\r",
                    "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                    "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                    "});"
                  ],
                  "_lastExecutionId": "c58fa553-518e-45ca-82c4-f368c06b64d2"
                }
              }
            ]
          }
        ],
        "event": []
      }
    ],
    "event": [],
    "variable": [],
    "info": {
      "_postman_id": "ad14dfb9-75d7-4a97-85bf-8665f83ae3c1",
      "name": "Danal_CreditRebill_v1.0",
      "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    }
  },
  "environment": {
    "_": {
      "postman_variable_scope": "environment",
      "postman_exported_at": "2025-08-18T05:02:37.387Z",
      "postman_exported_using": "Postman/11.58.5"
    },
    "id": "6094ec42-451a-414a-8cd4-1d771ed4e797",
    "name": "Danal_CreditRebill_v1.0",
    "values": [
      {
        "type": "any",
        "value": "https://tx-creditcard.danalpay.com/credit/",
        "key": "tx-credit"
      },
      {
        "type": "any",
        "value": "8kvDIwvdID7NWcBMND4uDdKPh51o%2Brl5JI%2F9s86WSsPjtweyP2gokBbmFyfhLhHCyY7Y1H37NkKgLrRc6IFDMKJcq6ncVEjeA9%2FCGYuT7557X%2F6%2FNeth2ziMPi0h0zGD",
        "key": "encryptedData"
      },
      {
        "type": "any",
        "value": "RETURNCODE=0000&RETURNMSG=%BC%BA%B0%F8&BALANCE=0&O_TID=202601062230307521454400&TID=202601062230321951494400&TRANTIME=223031&TRANDATE=20260106&AMOUNT=301&DEPOSIT_AMT=0",
        "key": "decryptedResponse"
      },
      {
        "type": "any",
        "value": "",
        "key": "startUrlDecoded"
      },
      {
        "type": "any",
        "value": "202601062230307521454400",
        "key": "TID"
      },
      {
        "type": "any",
        "value": "",
        "key": "TRANDATE"
      },
      {
        "type": "any",
        "value": "223031",
        "key": "TRANTIME"
      }
    ]
  },
  "globals": {
    "id": "9da4ccd7-44c1-43d7-bfc0-44a5cf548348",
    "values": []
  },
  "run": {
    "stats": {
      "iterations": {
        "total": 1,
        "pending": 0,
        "failed": 0
      },
      "items": {
        "total": 21,
        "pending": 0,
        "failed": 0
      },
      "scripts": {
        "total": 42,
        "pending": 0,
        "failed": 0
      },
      "prerequests": {
        "total": 21,
        "pending": 0,
        "failed": 0
      },
      "requests": {
        "total": 21,
        "pending": 0,
        "failed": 0
      },
      "tests": {
        "total": 21,
        "pending": 0,
        "failed": 0
      },
      "assertions": {
        "total": 250,
        "pending": 0,
        "failed": 0
      },
      "testScripts": {
        "total": 21,
        "pending": 0,
        "failed": 0
      },
      "prerequestScripts": {
        "total": 21,
        "pending": 0,
        "failed": 0
      }
    },
    "timings": {
      "responseAverage": 1260.7619047619044,
      "responseMin": 37,
      "responseMax": 1761,
      "responseSd": 494.93356021282625,
      "dnsAverage": 122.83830000087619,
      "dnsMin": 122.83830000087619,
      "dnsMax": 122.83830000087619,
      "dnsSd": 0,
      "firstByteAverage": 1252.2953190471799,
      "firstByteMin": 35.392799999564886,
      "firstByteMax": 1760.0572999976575,
      "firstByteSd": 511.5484981203743,
      "started": 1767706202906,
      "completed": 1767706232818
    },
    "executions": [
      {
        "cursor": {
          "position": 0,
          "iteration": 0,
          "length": 21,
          "cycles": 1,
          "empty": false,
          "eof": false,
          "bof": true,
          "cr": false,
          "ref": "6884b802-3ad8-42d8-843a-4e1f800bc569",
          "httpRequestId": "83b3a971-6d25-442d-a635-16e9995160a3"
        },
        "item": {
          "id": "da6fd2e3-84c4-4380-a670-1db793871bdd",
          "name": "READY - BATCH",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded; charset=UTF-8"
              }
            ],
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "1960f09d-e32e-4ebb-9ae1-f92f9a36da51",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "// 파싱 및 개별 디코딩\r",
                  "const parsed = parseQueryString(result);\r",
                  "const startUrlDecoded = safeDecodeURIComponent(parsed.STARTURL);\r",
                  "console.log(\"STARTURL(디코딩):\", startUrlDecoded);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메시지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"정기결제 초기인증 표준페이지 시작 URL(STARTURL) 정상출력\", function () {\r",
                  "    pm.expect(startUrlDecoded).to.eql(\"https://checkout.teledit.com/creditcard_recurring/web\")\r",
                  "})\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"위 표준페이지 시작 URL 전송 파라미터(STARTPARAMS) 정상출력\", function () {\r",
                  "    pm.expect(parsed.STARTPARAMS).to.not.be.undefined;\r",
                  "    pm.expect(parsed.STARTPARAMS).to.not.be.empty;\r",
                  "    pm.expect(parsed.STARTPARAMS).to.not.be.null;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"결제금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});"
                ],
                "_lastExecutionId": "3717e8c0-8d48-4393-87bc-8322617d4ea0"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "34b9cfef-9791-4c3e-9026-31d98be45f97",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'PC',\r",
                  "    TXTYPE: 'AUTH',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    CANCELURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                  "    RETURNURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                  "    ISBILL: 'Y',\r",
                  "    ISNOTI: 'N'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "6dc1fcad-648a-4541-8ce9-cdf5981e3068"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4PJAgyNbIM2hLz3kcfuDNAuCqSPVhBCpg6V8SYW3jJ%2FZIfE36F%2BlYYpMSgxO77gr%2BDwLH0n%2BtJG7ZAyj6rsqbDI3wCKhX4bzlTMTVKd8c%2BGAYmpCZ3i8%2BtXuuBm6g2NRznUDXGC09xQFVhQa4p6tQyOn5eKksesgLSgIMzKa6kDqC5%2BLzMcAl8IF7qCGgIqWAazfqDqnE0a5U%2BZ8p2HIn%2FENLsoKdJRXIlRiPnCOj5yDVfIQWasCSQLbccOu1NheelnZWQGZ5rGm%2FTC5F8i9Vs5%2BjHsIKtlMOIqeb%2BdxblE4thUJb9NDu3NPdadnhpnr9g%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "Content-Type",
              "value": "application/x-www-form-urlencoded; charset=UTF-8"
            },
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "623e2965-20d7-4c6a-9fe4-c6b550cd4083",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "034b09ef-1130-4430-8d94-b91ebb2c13a1",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Set-Cookie",
              "value": "SCOUTER=x7lkeo71ar49kj; Expires=Sun, 24-Jan-2094 16:44:10 GMT; Path=/"
            },
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "783"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 13:30:03 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              80,
              100,
              37,
              50,
              66,
              75,
              48,
              72,
              110,
              79,
              120,
              87,
              84,
              105,
              75,
              82,
              70,
              102,
              111,
              72,
              107,
              98,
              104,
              52,
              52,
              88,
              117,
              70,
              111,
              37,
              50,
              70,
              49,
              89,
              70,
              101,
              52,
              51,
              115,
              114,
              82,
              81,
              52,
              79,
              74,
              79,
              120,
              104,
              76,
              115,
              57,
              53,
              86,
              65,
              114,
              97,
              53,
              115,
              37,
              50,
              70,
              86,
              83,
              76,
              107,
              122,
              50,
              101,
              99,
              73,
              53,
              113,
              81,
              80,
              49,
              74,
              68,
              55,
              70,
              105,
              68,
              56,
              48,
              56,
              115,
              55,
              72,
              105,
              80,
              100,
              52,
              55,
              88,
              107,
              74,
              49,
              78,
              110,
              116,
              73,
              71,
              72,
              71,
              55,
              122,
              115,
              99,
              119,
              57,
              120,
              106,
              37,
              50,
              66,
              86,
              48,
              73,
              56,
              73,
              121,
              70,
              101,
              116,
              114,
              101,
              121,
              87,
              99,
              69,
              53,
              104,
              98,
              75,
              37,
              50,
              66,
              71,
              52,
              116,
              89,
              113,
              81,
              111,
              77,
              74,
              100,
              50,
              49,
              117,
              100,
              55,
              119,
              55,
              79,
              121,
              72,
              89,
              82,
              121,
              90,
              74,
              80,
              113,
              117,
              112,
              71,
              72,
              110,
              53,
              80,
              101,
              101,
              111,
              98,
              98,
              111,
              87,
              89,
              48,
              53,
              49,
              67,
              68,
              48,
              53,
              122,
              70,
              77,
              37,
              50,
              66,
              81,
              86,
              119,
              48,
              37,
              50,
              66,
              77,
              65,
              83,
              120,
              77,
              80,
              89,
              116,
              108,
              104,
              110,
              101,
              118,
              56,
              113,
              115,
              106,
              99,
              106,
              52,
              103,
              65,
              105,
              117,
              85,
              97,
              103,
              70,
              104,
              88,
              73,
              48,
              72,
              112,
              81,
              68,
              48,
              49,
              68,
              80,
              52,
              65,
              121,
              69,
              77,
              113,
              50,
              77,
              88,
              57,
              89,
              114,
              37,
              50,
              70,
              101,
              108,
              73,
              72,
              75,
              104,
              57,
              56,
              111,
              80,
              76,
              106,
              107,
              87,
              97,
              74,
              49,
              103,
              37,
              50,
              70,
              90,
              119,
              78,
              109,
              117,
              65,
              54,
              54,
              77,
              88,
              113,
              37,
              50,
              66,
              51,
              78,
              105,
              50,
              103,
              88,
              104,
              49,
              66,
              56,
              56,
              80,
              105,
              101,
              70,
              71,
              90,
              83,
              108,
              121,
              121,
              98,
              75,
              72,
              117,
              122,
              120,
              66,
              54,
              118,
              105,
              114,
              79,
              107,
              114,
              55,
              76,
              77,
              51,
              72,
              49,
              87,
              83,
              69,
              117,
              48,
              86,
              66,
              48,
              55,
              112,
              49,
              102,
              111,
              66,
              116,
              76,
              89,
              84,
              86,
              89,
              37,
              50,
              66,
              99,
              112,
              55,
              117,
              110,
              73,
              72,
              57,
              121,
              90,
              115,
              56,
              48,
              37,
              50,
              66,
              85,
              84,
              77,
              55,
              49,
              117,
              49,
              102,
              113,
              54,
              74,
              107,
              56,
              83,
              119,
              80,
              37,
              50,
              70,
              106,
              85,
              115,
              108,
              75,
              100,
              110,
              110,
              109,
              88,
              53,
              70,
              109,
              117,
              86,
              108,
              51,
              98,
              116,
              85,
              115,
              66,
              74,
              74,
              109,
              76,
              108,
              103,
              109,
              109,
              53,
              54,
              112,
              110,
              66,
              110,
              115,
              88,
              118,
              113,
              119,
              113,
              112,
              54,
              51,
              79,
              68,
              85,
              106,
              79,
              113,
              37,
              50,
              70,
              82,
              66,
              52,
              48,
              81,
              87,
              54,
              117,
              49,
              70,
              106,
              111,
              109,
              119,
              49,
              48,
              103,
              122,
              73,
              108,
              67,
              65,
              111,
              84,
              86,
              76,
              112,
              103,
              74,
              89,
              122,
              37,
              50,
              70,
              71,
              88,
              114,
              52,
              113,
              115,
              57,
              68,
              100,
              90,
              80,
              69,
              75,
              83,
              66,
              50,
              117,
              88,
              85,
              107,
              89,
              68,
              82,
              83,
              112,
              48,
              84,
              55,
              66,
              37,
              50,
              66,
              79,
              66,
              78,
              37,
              50,
              66,
              119,
              117,
              108,
              84,
              84,
              117,
              57,
              101,
              67,
              74,
              78,
              52,
              107,
              51,
              102,
              78,
              87,
              51,
              118,
              107,
              104,
              122,
              65,
              116,
              69,
              87,
              70,
              81,
              66,
              74,
              122,
              53,
              100,
              49,
              103,
              88,
              115,
              68,
              114,
              108,
              97,
              115,
              71,
              105,
              49,
              87,
              121,
              83,
              53,
              83,
              113,
              100,
              115,
              115,
              76,
              70,
              48,
              66,
              87,
              117,
              76,
              86,
              70,
              37,
              50,
              70,
              112,
              54,
              120,
              100,
              57,
              68,
              81,
              114,
              82,
              108,
              85,
              90,
              81,
              122,
              104,
              56,
              113,
              73,
              108,
              109,
              120,
              118,
              113,
              107,
              81,
              37,
              50,
              70,
              120,
              37,
              50,
              66,
              82,
              81,
              85,
              82,
              74,
              54,
              99,
              103,
              70,
              106,
              105,
              80,
              119,
              49,
              69,
              71,
              111,
              97,
              49,
              117,
              119,
              117,
              66,
              50,
              73,
              90,
              112,
              112,
              122,
              98,
              68,
              57,
              56,
              86,
              54,
              67,
              66,
              109,
              107,
              87,
              51,
              81,
              73,
              118,
              48,
              77,
              85,
              114,
              116,
              75,
              98,
              66,
              109,
              68,
              67,
              105,
              71,
              50,
              121,
              76,
              77,
              107,
              75,
              74,
              84,
              112,
              37,
              50,
              70,
              81,
              104,
              65,
              78,
              111,
              85,
              106,
              87,
              103,
              109,
              115,
              110,
              50,
              55,
              97,
              105,
              120,
              76,
              48,
              56,
              85,
              52,
              73,
              48,
              120,
              73,
              104,
              50,
              88,
              85,
              65,
              107,
              50,
              88,
              90,
              97,
              104,
              67,
              88,
              70,
              82,
              65,
              37,
              50,
              66,
              98,
              103,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 194,
          "responseSize": 783
        },
        "id": "da6fd2e3-84c4-4380-a670-1db793871bdd",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메시지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "정기결제 초기인증 표준페이지 시작 URL(STARTURL) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "위 표준페이지 시작 URL 전송 파라미터(STARTPARAMS) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결제금액(AMOUNT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "6536ad48-b528-4483-8259-814aca8e575b",
          "length": 21,
          "cycles": 1,
          "position": 1,
          "iteration": 0,
          "httpRequestId": "2bf45884-fac1-476b-8e60-0e3633b44850"
        },
        "item": {
          "id": "bf3954cf-0a78-4482-a1aa-e0298fd36e53",
          "name": "READY - DANALCARD",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded; charset=UTF-8"
              }
            ],
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "ce739162-f223-40ee-9ab0-1f17c9c89198",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "// 파싱 및 개별 디코딩\r",
                  "const parsed = parseQueryString(result);\r",
                  "const startUrlDecoded = safeDecodeURIComponent(parsed.STARTURL);\r",
                  "console.log(\"STARTURL(디코딩):\", startUrlDecoded);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메시지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"정기결제 초기인증 표준페이지 시작 URL(STARTURL) 정상출력\", function () {\r",
                  "    pm.expect(startUrlDecoded).to.eql(\"https://checkout.teledit.com/creditcard_std/web\")\r",
                  "})\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"위 표준페이지 시작 URL 전송 파라미터(STARTPARAMS) 정상출력\", function () {\r",
                  "    pm.expect(parsed.STARTPARAMS).to.not.be.undefined;\r",
                  "    pm.expect(parsed.STARTPARAMS).to.not.be.empty;\r",
                  "    pm.expect(parsed.STARTPARAMS).to.not.be.null;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"결제금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});"
                ],
                "_lastExecutionId": "8e090f95-9351-42ac-ab0a-d7cde7d2d19e"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "1d9c7052-9f12-41c9-bce8-4db77dc52573",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'PC',\r",
                  "    TXTYPE: 'AUTH',\r",
                  "    SERVICETYPE: 'DANALCARD',\r",
                  "    CANCELURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                  "    RETURNURL: 'https://paytest.teledit.com:888/clientdemo/oneapi/returnFail.php',\r",
                  "    ISBILL: 'Y',\r",
                  "    ISNOTI: 'N'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "c415de21-7731-4cc9-a166-10e364c928cd"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4PJAgyNbIM2hLz3kcfuDNAsCL18rdUmVCzFjEXB9wjgQ82IteFWZK11Um66aaXg9%2BmJBA%2BzStWEMjr0dSocIEm%2Bbu9cYhIHHrFuuMeAbp0%2FaOn9YPjFswBAcVkFCl4MZNYRXi9%2BMiA7xwR%2FFNE00HJ0pC21O5yf5imQNizmVqk2bD03K20FpT3Fs3h%2FUCOJ0UXofslr6lyNGsyvb6DemiNcWC4LE3zCDhJmfdiJa9ITHGb2ToWrxU2XD3B50so4Ru4EZtRrOIrbszRI9doqcDx5dZKeCsMBh%2Ff1PMU0qTPX5ctV%2BHYz%2F289vKWnUu4B9CA%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "Content-Type",
              "value": "application/x-www-form-urlencoded; charset=UTF-8"
            },
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "949504dd-62fc-4962-ac58-7047bc99db61",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=x7lkeo71ar49kj",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "c7aeccef-e97b-4b9b-8c02-5c5eab8fd469",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "783"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 13:30:03 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              80,
              100,
              37,
              50,
              66,
              75,
              48,
              72,
              110,
              79,
              120,
              87,
              84,
              105,
              75,
              82,
              70,
              102,
              111,
              72,
              107,
              98,
              104,
              52,
              52,
              88,
              117,
              70,
              111,
              37,
              50,
              70,
              49,
              89,
              70,
              101,
              52,
              51,
              115,
              114,
              82,
              81,
              52,
              79,
              74,
              79,
              120,
              104,
              76,
              115,
              57,
              53,
              86,
              65,
              114,
              97,
              53,
              115,
              37,
              50,
              70,
              86,
              83,
              76,
              107,
              122,
              50,
              101,
              99,
              73,
              53,
              113,
              81,
              80,
              49,
              74,
              68,
              55,
              70,
              105,
              68,
              56,
              48,
              56,
              115,
              55,
              72,
              105,
              80,
              100,
              52,
              97,
              105,
              70,
              118,
              66,
              106,
              114,
              51,
              113,
              89,
              111,
              122,
              100,
              72,
              81,
              53,
              88,
              122,
              103,
              106,
              53,
              70,
              109,
              107,
              101,
              66,
              105,
              104,
              82,
              76,
              53,
              111,
              114,
              115,
              51,
              84,
              66,
              69,
              53,
              37,
              50,
              70,
              53,
              121,
              76,
              89,
              57,
              65,
              57,
              70,
              117,
              113,
              79,
              107,
              107,
              115,
              50,
              119,
              72,
              122,
              83,
              74,
              104,
              79,
              66,
              79,
              98,
              117,
              115,
              66,
              54,
              79,
              105,
              65,
              115,
              98,
              51,
              113,
              73,
              122,
              49,
              114,
              121,
              69,
              108,
              83,
              37,
              50,
              70,
              86,
              97,
              115,
              102,
              104,
              53,
              83,
              48,
              74,
              111,
              120,
              113,
              80,
              76,
              103,
              86,
              116,
              121,
              37,
              50,
              66,
              78,
              104,
              108,
              108,
              54,
              98,
              119,
              97,
              120,
              48,
              117,
              98,
              54,
              122,
              112,
              104,
              99,
              50,
              74,
              37,
              50,
              70,
              103,
              107,
              70,
              120,
              118,
              100,
              81,
              52,
              104,
              89,
              105,
              104,
              57,
              82,
              70,
              108,
              52,
              86,
              73,
              121,
              81,
              120,
              56,
              112,
              70,
              105,
              37,
              50,
              66,
              69,
              81,
              54,
              68,
              56,
              79,
              75,
              98,
              106,
              88,
              52,
              65,
              97,
              82,
              108,
              100,
              115,
              50,
              84,
              120,
              103,
              102,
              81,
              51,
              51,
              76,
              105,
              57,
              121,
              106,
              81,
              86,
              72,
              110,
              37,
              50,
              66,
              113,
              57,
              89,
              108,
              115,
              102,
              104,
              97,
              88,
              103,
              97,
              76,
              67,
              50,
              97,
              99,
              109,
              104,
              74,
              78,
              57,
              109,
              70,
              119,
              56,
              84,
              119,
              86,
              85,
              75,
              108,
              121,
              79,
              102,
              97,
              109,
              70,
              69,
              57,
              99,
              98,
              114,
              112,
              57,
              75,
              119,
              121,
              122,
              50,
              90,
              69,
              87,
              48,
              50,
              111,
              53,
              52,
              85,
              56,
              51,
              50,
              121,
              50,
              108,
              51,
              56,
              69,
              103,
              104,
              51,
              103,
              71,
              53,
              118,
              117,
              111,
              83,
              87,
              109,
              89,
              106,
              49,
              113,
              66,
              101,
              112,
              98,
              50,
              81,
              108,
              109,
              109,
              71,
              120,
              52,
              101,
              56,
              83,
              108,
              88,
              102,
              100,
              88,
              117,
              112,
              75,
              56,
              57,
              109,
              105,
              101,
              53,
              81,
              119,
              109,
              109,
              101,
              107,
              37,
              50,
              70,
              116,
              53,
              76,
              79,
              37,
              50,
              66,
              65,
              73,
              75,
              107,
              97,
              116,
              84,
              119,
              68,
              57,
              74,
              54,
              55,
              117,
              108,
              86,
              37,
              50,
              66,
              118,
              122,
              57,
              110,
              115,
              76,
              85,
              53,
              115,
              52,
              66,
              37,
              50,
              70,
              84,
              90,
              48,
              117,
              97,
              101,
              114,
              77,
              69,
              104,
              74,
              54,
              89,
              56,
              56,
              113,
              54,
              51,
              104,
              85,
              51,
              100,
              68,
              102,
              83,
              55,
              37,
              50,
              66,
              87,
              74,
              78,
              112,
              112,
              75,
              117,
              102,
              114,
              116,
              114,
              106,
              107,
              65,
              49,
              57,
              84,
              122,
              52,
              90,
              49,
              74,
              48,
              119,
              109,
              86,
              111,
              76,
              80,
              122,
              117,
              37,
              50,
              70,
              49,
              121,
              74,
              84,
              121,
              57,
              51,
              86,
              103,
              88,
              115,
              72,
              49,
              37,
              50,
              66,
              53,
              115,
              122,
              37,
              50,
              70,
              79,
              86,
              82,
              112,
              76,
              99,
              82,
              120,
              57,
              121,
              49,
              113,
              53,
              52,
              71,
              120,
              115,
              100,
              121,
              121,
              116,
              120,
              105,
              110,
              81,
              121,
              73,
              53,
              83,
              49,
              120,
              73,
              114,
              37,
              50,
              70,
              54,
              55,
              112,
              86,
              82,
              80,
              68,
              54,
              104,
              69,
              112,
              57,
              83,
              49,
              50,
              114,
              65,
              105,
              101,
              83,
              56,
              110,
              37,
              50,
              66,
              101,
              76,
              69,
              56,
              74,
              71,
              100,
              100,
              102,
              90,
              121,
              116,
              87,
              70,
              67,
              100,
              69,
              65,
              120,
              85,
              83,
              114,
              49,
              37,
              50,
              66,
              76,
              55,
              108,
              71,
              114,
              102,
              84,
              122,
              97,
              73,
              57,
              99,
              66,
              48,
              90,
              37,
              50,
              70,
              114,
              55,
              88,
              70,
              103,
              76,
              87,
              65,
              118,
              102,
              98,
              115,
              74,
              120,
              53,
              53,
              81,
              69,
              72,
              76,
              120,
              37,
              50,
              66,
              105,
              55,
              79,
              106,
              78,
              113,
              119,
              88,
              82,
              84,
              98,
              71,
              65,
              54,
              101,
              102,
              114,
              74,
              49,
              66,
              55,
              49,
              110,
              81,
              104,
              105,
              106,
              50,
              79,
              65,
              116,
              119,
              118,
              81,
              118,
              102,
              66,
              114,
              118,
              79,
              49,
              100,
              51,
              97,
              80,
              110,
              90,
              67,
              54,
              113,
              76,
              75,
              68,
              118,
              109,
              122,
              52,
              48,
              101,
              51,
              50,
              99,
              103,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 74,
          "responseSize": 783
        },
        "id": "bf3954cf-0a78-4482-a1aa-e0298fd36e53",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메시지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "정기결제 초기인증 표준페이지 시작 URL(STARTURL) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "위 표준페이지 시작 URL 전송 파라미터(STARTPARAMS) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결제금액(AMOUNT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "3ab6f307-f9e9-4ab8-9ce1-c259e357332d",
          "length": 21,
          "cycles": 1,
          "position": 2,
          "iteration": 0,
          "httpRequestId": "081a1e41-db92-4f9b-a123-d225a3a4de61"
        },
        "item": {
          "id": "c0fa5d37-ee95-475f-823b-28bdfbcfb012",
          "name": "ISSUEBILLKEY",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded; charset=UTF-8"
              }
            ],
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "cf68f30c-64a4-4ad4-831e-4cd8d4564b5e",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get('TID'),\r",
                  "    TXTYPE: 'ISSUEBILLKEY',\r",
                  "    SERVICETYPE: 'BATCH'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "7f82c105-91a7-4631-a331-c447332826e6"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "0ef11a3c-2a30-4baa-bab3-e74ea2b5a8e5",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "// 파싱 및 개별 디코딩\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) : 1104 출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"1104\")\r",
                  "});\r",
                  "\r",
                  "// \"존재하지 않는 거래 입니다.\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) : 존재하지 않는 거래입니다. 출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%C1%B8%C0%E7%C7%CF%C1%F6+%BE%CA%B4%C2+%B0%C5%B7%A1+%C0%D4%B4%CF%B4%D9.\")\r",
                  "});"
                ],
                "_lastExecutionId": "52963ff0-cf8c-49f6-afaa-bf4cae9e5d2f"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDXHvMUqO25iIdKkD6XH4VkTYfgoBPJqjGpr15Fqq4CCxlzQc11Pn06IJSodR9hnt4%2FgbXDCdFcZ2uADRjw%2Fvh8Q%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "Content-Type",
              "value": "application/x-www-form-urlencoded; charset=UTF-8"
            },
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "bc473934-9ab1-41d3-89bb-4fbef272adc6",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=x7lkeo71ar49kj",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "0e08fc35-631d-423a-9033-be7a1d7f9216",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "173"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 13:30:03 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              102,
              117,
              54,
              83,
              50,
              114,
              73,
              76,
              75,
              49,
              37,
              50,
              70,
              69,
              48,
              108,
              103,
              69,
              121,
              75,
              71,
              81,
              51,
              97,
              115,
              54,
              107,
              69,
              107,
              75,
              101,
              114,
              56,
              72,
              66,
              109,
              89,
              119,
              80,
              108,
              76,
              84,
              81,
              80,
              113,
              101,
              87,
              101,
              111,
              48,
              116,
              97,
              76,
              106,
              111,
              73,
              113,
              89,
              51,
              110,
              116,
              53,
              77,
              57,
              65,
              105,
              110,
              57,
              37,
              50,
              70,
              100,
              83,
              114,
              110,
              101,
              121,
              53,
              88,
              107,
              55,
              78,
              56,
              114,
              114,
              88,
              101,
              68,
              97,
              116,
              88,
              109,
              88,
              51,
              99,
              66,
              107,
              87,
              56,
              65,
              75,
              37,
              50,
              70,
              104,
              117,
              114,
              49,
              48,
              51,
              74,
              67,
              80,
              107,
              37,
              50,
              70,
              103,
              110,
              72,
              73,
              102,
              103,
              107,
              78,
              117,
              120,
              115,
              73,
              101,
              81,
              70,
              83,
              118,
              73,
              102,
              73,
              37,
              50,
              70,
              72,
              49,
              74,
              84,
              105,
              55,
              116,
              87,
              79,
              111,
              99,
              37,
              50,
              66,
              109,
              103,
              84,
              51,
              100,
              99,
              88,
              65,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 37,
          "responseSize": 173
        },
        "id": "c0fa5d37-ee95-475f-823b-28bdfbcfb012",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) : 1104 출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) : 존재하지 않는 거래입니다. 출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "9e25f31f-34d4-48e0-8ff6-9f2439eb17b7",
          "length": 21,
          "cycles": 1,
          "position": 3,
          "iteration": 0,
          "httpRequestId": "72885d99-e960-42ec-b289-625b54a52fc1"
        },
        "item": {
          "id": "59b9e6c4-4ea1-48db-9bad-cf8b37afc341",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded; charset=UTF-8"
              }
            ],
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "4753bae3-b3df-4183-b831-dac7a7c9dbdd",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC250730151749FFCAA0',\r",
                  "    USERNAME: '김하늘',\r",
                  "    USERPHONE: '01085402697',\r",
                  "    ORDERID: '01234567'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "842064c3-7463-481c-a503-b80a0ec8d9d7"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "46a46141-6534-4e0e-a16c-8396833e860b",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0500\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.eql(\"01085402697\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                  "  // 현재 시간 선언\r",
                  "  const now = new Date();\r",
                  "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                  "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                  "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                  "  const t = parsed.TRANTIME;\r",
                  "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                  "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                  "\r",
                  "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                  "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.eql(\"01234567\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"512028******7294\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"삼성카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%BB%EF%BC%BA%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.eql(\"%EA%B9%3F%3F%3F%3F%3F\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "e363098c-db75-4ee0-9ac0-503e04fe6001"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzccrERjqayECmibASVLCFcu3mtMwnyeSqsDkh6Ok0RVNhbkzCgrGZvyWLuE0qblstQgkt2NYUzE21ScHAo%2BsYJOcT3xCtYEislZjbacyD1Wou68o56siY3%2FOkdyV%2FLh5ZjM%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "Content-Type",
              "value": "application/x-www-form-urlencoded; charset=UTF-8"
            },
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "fdc8f638-34ba-43c9-ba85-fbe88cd74841",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=x7lkeo71ar49kj",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "64047b02-acbc-4388-b8e0-fa7932342734",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "477"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 13:30:05 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              105,
              110,
              122,
              90,
              79,
              117,
              104,
              37,
              50,
              70,
              73,
              90,
              56,
              73,
              52,
              117,
              100,
              113,
              98,
              71,
              72,
              116,
              66,
              107,
              104,
              103,
              100,
              105,
              37,
              50,
              66,
              77,
              100,
              87,
              117,
              68,
              82,
              87,
              57,
              101,
              107,
              115,
              72,
              103,
              87,
              73,
              65,
              53,
              110,
              68,
              85,
              87,
              116,
              106,
              79,
              74,
              99,
              66,
              86,
              119,
              71,
              71,
              113,
              67,
              109,
              66,
              73,
              108,
              80,
              52,
              102,
              122,
              102,
              66,
              106,
              107,
              112,
              90,
              122,
              79,
              78,
              80,
              66,
              69,
              109,
              111,
              82,
              107,
              97,
              49,
              72,
              119,
              80,
              72,
              111,
              98,
              67,
              103,
              50,
              89,
              86,
              52,
              81,
              72,
              89,
              83,
              90,
              115,
              89,
              56,
              55,
              72,
              86,
              75,
              83,
              76,
              50,
              103,
              37,
              50,
              70,
              49,
              69,
              103,
              87,
              69,
              109,
              52,
              113,
              54,
              87,
              110,
              80,
              57,
              90,
              56,
              108,
              56,
              104,
              106,
              113,
              52,
              80,
              112,
              86,
              97,
              108,
              52,
              74,
              67,
              77,
              53,
              99,
              87,
              65,
              86,
              67,
              99,
              109,
              90,
              56,
              80,
              76,
              108,
              122,
              57,
              114,
              66,
              101,
              49,
              106,
              54,
              110,
              118,
              66,
              68,
              73,
              66,
              49,
              71,
              77,
              77,
              116,
              110,
              51,
              114,
              72,
              112,
              70,
              57,
              108,
              121,
              76,
              55,
              49,
              65,
              117,
              105,
              98,
              103,
              88,
              120,
              52,
              50,
              84,
              73,
              37,
              50,
              66,
              56,
              88,
              81,
              114,
              70,
              107,
              117,
              104,
              84,
              82,
              87,
              97,
              114,
              72,
              72,
              114,
              105,
              118,
              37,
              50,
              66,
              105,
              48,
              89,
              53,
              100,
              99,
              51,
              65,
              48,
              111,
              76,
              81,
              56,
              54,
              107,
              120,
              116,
              70,
              70,
              78,
              37,
              50,
              66,
              113,
              51,
              80,
              70,
              89,
              56,
              65,
              56,
              76,
              52,
              106,
              117,
              103,
              56,
              114,
              74,
              89,
              68,
              100,
              87,
              112,
              102,
              75,
              97,
              100,
              112,
              72,
              90,
              109,
              54,
              68,
              76,
              65,
              71,
              104,
              51,
              85,
              117,
              107,
              67,
              112,
              109,
              87,
              53,
              87,
              37,
              50,
              70,
              86,
              82,
              37,
              50,
              70,
              70,
              78,
              85,
              69,
              75,
              78,
              86,
              74,
              122,
              56,
              37,
              50,
              70,
              118,
              81,
              119,
              87,
              69,
              78,
              99,
              108,
              89,
              115,
              89,
              74,
              89,
              67,
              37,
              50,
              66,
              85,
              107,
              112,
              73,
              54,
              82,
              107,
              55,
              116,
              118,
              104,
              82,
              77,
              71,
              87,
              117,
              116,
              114,
              105,
              111,
              51,
              98,
              115,
              101,
              117,
              75,
              70,
              109,
              108,
              72,
              85,
              103,
              56,
              99,
              121,
              37,
              50,
              66,
              113,
              57,
              53,
              65,
              84,
              105,
              53,
              53,
              82,
              117,
              67,
              50,
              82,
              100,
              90,
              105,
              103,
              102,
              69,
              88,
              81,
              73,
              102,
              88,
              70,
              88,
              77,
              85,
              79,
              70,
              113,
              105
            ]
          },
          "cookie": [],
          "responseTime": 1587,
          "responseSize": 477
        },
        "id": "59b9e6c4-4ea1-48db-9bad-cf8b37afc341",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) ±5초 이내 검증",
            "skipped": false
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "0a7fb1e9-0a25-4ee4-a6d2-74952250da1a",
          "length": 21,
          "cycles": 1,
          "position": 4,
          "iteration": 0,
          "httpRequestId": "52a041bf-9aad-47fb-95d1-daac0235180c"
        },
        "item": {
          "id": "22e4506d-c6df-400e-a501-5af9a29bb61b",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "f1f00b59-6dba-4948-9e52-a8e014323b6e",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "ee65cbf2-cbd7-4c61-a661-91690f5fce4b"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "931240b5-d009-47e9-97a6-b11609724109",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "905c812b-ed28-47a5-8505-6fd88a857f50"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDRHu1eMNz9YMVUnxbaz4TZR8gxMoDJk6TJcAjnlEj9V5deIzxperoPBR0g4tzBHWX3t0jAZ71sgZPQ5yA9uhy%2FDlSidRlCryDcS5Q47hG9P8"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "b04aac26-09d2-4ba9-9c63-54be01781c85",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=x7lkeo71ar49kj",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "5e6bbc06-c70b-4b6e-9656-13a30c5f0c94",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "257"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 13:30:06 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              86,
              51,
              108,
              69,
              37,
              50,
              66,
              76,
              122,
              119,
              121,
              53,
              81,
              118,
              83,
              89,
              77,
              67,
              71,
              108,
              109,
              112,
              73,
              56,
              49,
              70,
              48,
              79,
              121,
              37,
              50,
              66,
              67,
              115,
              37,
              50,
              66,
              102,
              101,
              118,
              79,
              113,
              116,
              107,
              57,
              100,
              89,
              53,
              111,
              74,
              109,
              87,
              77,
              118,
              80,
              106,
              74,
              68,
              52,
              55,
              108,
              119,
              90,
              111,
              54,
              71,
              69,
              53,
              118,
              109,
              100,
              115,
              115,
              118,
              53,
              37,
              50,
              70,
              103,
              111,
              103,
              80,
              114,
              74,
              113,
              104,
              50,
              99,
              56,
              66,
              103,
              104,
              78,
              111,
              70,
              116,
              103,
              66,
              83,
              69,
              88,
              97,
              65,
              116,
              57,
              81,
              75,
              100,
              51,
              69,
              74,
              49,
              97,
              37,
              50,
              70,
              122,
              52,
              111,
              71,
              75,
              80,
              117,
              53,
              102,
              74,
              86,
              122,
              54,
              83,
              70,
              89,
              88,
              68,
              112,
              78,
              83,
              68,
              55,
              113,
              79,
              73,
              108,
              106,
              82,
              122,
              56,
              112,
              83,
              99,
              121,
              57,
              65,
              83,
              106,
              122,
              67,
              115,
              84,
              76,
              98,
              97,
              71,
              83,
              120,
              102,
              67,
              89,
              48,
              76,
              57,
              106,
              72,
              56,
              117,
              78,
              100,
              74,
              115,
              115,
              77,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1397,
          "responseSize": 257
        },
        "id": "22e4506d-c6df-400e-a501-5af9a29bb61b",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "6d2fd07a-d36a-4d2a-9e0f-bc704ff39837",
          "length": 21,
          "cycles": 1,
          "position": 5,
          "iteration": 0,
          "httpRequestId": "f0abb354-6af5-4c85-bee9-714de4593d0c"
        },
        "item": {
          "id": "ef63fd08-4614-477c-ab02-e2c40f9e382d",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "1ce05d53-f53e-449f-aef8-7f8ce673af69",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC221222165535557F38'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "648fd12b-59ec-4957-804d-f4d56dcba78a"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "c0db2010-f0af-41b0-b9b0-1e3580c2f65c",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0400\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                  "  // 현재 시간 선언\r",
                  "  const now = new Date();\r",
                  "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                  "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                  "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                  "  const t = parsed.TRANTIME;\r",
                  "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                  "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                  "\r",
                  "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                  "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"403293******4003\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"현대카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%C7%F6%B4%EB%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "})\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "2825560b-808c-411c-9bba-7a85a5c1e632"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzceacjSE9wkZ8OEcuyhqS4aTCOgYJsVDSvmkj%2FNDn1RD1w%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "12c230e4-90db-49b0-b1a0-a3b43866a035",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=x7lkeo71ar49kj",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "69883ffd-54fd-41c5-96c6-d5435ce0ba13",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "437"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 13:30:08 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              53,
              70,
              88,
              84,
              104,
              82,
              70,
              68,
              71,
              122,
              97,
              100,
              67,
              102,
              82,
              75,
              111,
              97,
              74,
              107,
              107,
              50,
              55,
              78,
              97,
              109,
              97,
              54,
              87,
              111,
              56,
              52,
              81,
              100,
              84,
              108,
              107,
              83,
              116,
              106,
              99,
              99,
              114,
              51,
              76,
              68,
              99,
              56,
              81,
              66,
              89,
              54,
              85,
              83,
              102,
              71,
              37,
              50,
              70,
              84,
              108,
              81,
              120,
              65,
              48,
              97,
              70,
              86,
              116,
              71,
              115,
              111,
              109,
              52,
              117,
              108,
              55,
              76,
              37,
              50,
              66,
              117,
              68,
              78,
              79,
              89,
              53,
              54,
              57,
              49,
              104,
              51,
              102,
              56,
              67,
              50,
              119,
              71,
              73,
              111,
              51,
              108,
              85,
              56,
              57,
              57,
              89,
              77,
              102,
              90,
              65,
              120,
              37,
              50,
              70,
              67,
              120,
              115,
              86,
              65,
              121,
              73,
              121,
              87,
              55,
              67,
              54,
              66,
              122,
              57,
              57,
              102,
              52,
              88,
              118,
              83,
              37,
              50,
              66,
              75,
              76,
              102,
              100,
              57,
              80,
              99,
              54,
              57,
              74,
              102,
              51,
              104,
              87,
              51,
              113,
              99,
              37,
              50,
              66,
              54,
              120,
              50,
              73,
              114,
              74,
              79,
              37,
              50,
              70,
              122,
              90,
              76,
              86,
              108,
              66,
              108,
              98,
              57,
              54,
              90,
              48,
              101,
              66,
              72,
              98,
              117,
              106,
              66,
              86,
              113,
              105,
              117,
              52,
              117,
              109,
              97,
              74,
              97,
              104,
              103,
              106,
              116,
              119,
              54,
              37,
              50,
              66,
              80,
              68,
              120,
              117,
              55,
              114,
              73,
              67,
              57,
              74,
              117,
              72,
              74,
              73,
              77,
              111,
              99,
              86,
              103,
              50,
              78,
              77,
              74,
              106,
              37,
              50,
              70,
              115,
              50,
              37,
              50,
              66,
              107,
              84,
              101,
              66,
              71,
              101,
              55,
              52,
              69,
              111,
              49,
              117,
              77,
              76,
              118,
              119,
              116,
              57,
              99,
              101,
              69,
              112,
              83,
              121,
              105,
              66,
              117,
              78,
              57,
              51,
              79,
              80,
              54,
              85,
              115,
              102,
              50,
              98,
              84,
              55,
              51,
              67,
              66,
              99,
              57,
              105,
              107,
              120,
              57,
              85,
              86,
              107,
              55,
              54,
              82,
              70,
              89,
              53,
              99,
              122,
              106,
              71,
              111,
              121,
              70,
              86,
              69,
              74,
              103,
              68,
              57,
              49,
              82,
              107,
              73,
              120,
              118,
              88,
              87,
              113,
              51,
              66,
              80,
              73,
              70,
              118,
              86,
              71,
              110,
              66,
              106,
              111,
              103,
              79,
              116,
              83,
              79,
              90,
              108,
              78,
              121,
              118,
              49,
              112,
              50,
              74,
              100,
              120,
              110,
              120,
              120,
              82,
              73,
              68,
              113,
              73,
              87,
              72,
              105,
              55,
              119,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1284,
          "responseSize": 437
        },
        "id": "ef63fd08-4614-477c-ab02-e2c40f9e382d",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) ±5초 이내 검증",
            "skipped": false
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "b421ed3e-6172-4381-bc46-f6279d940688",
          "length": 21,
          "cycles": 1,
          "position": 6,
          "iteration": 0,
          "httpRequestId": "76f77b5d-4ca7-422e-932c-0d1104479ed7"
        },
        "item": {
          "id": "22d00834-6c58-4ee6-badf-8aa8dc490b03",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "c04a91c3-2325-4972-a382-0b19b0e31786",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "8bc901df-2450-4ddd-a8ff-317c063325b1"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "aa90144e-367f-4de0-b036-f85bdbee4ed6",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "f471913c-7852-4223-8294-ea799d410658"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDZ%2BwcCmYQZgfRaNDmX3adODZc0SYsQkNi7WToscodyZu%2F%2FRxnnVAuukKgWZMTDUvDFfrGqbk8dJ5886U4QxfbvmtNiqXVE1X8FHTB%2BrT%2Bhlj"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "ee98af54-cf20-4c2a-8145-6adf0822bada",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=x7lkeo71ar49kj",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "d4be07c5-ab54-4d5d-8c26-a560bbc39f58",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "257"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 13:30:10 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              86,
              51,
              108,
              69,
              37,
              50,
              66,
              76,
              122,
              119,
              121,
              53,
              81,
              118,
              83,
              89,
              77,
              67,
              71,
              108,
              109,
              112,
              73,
              53,
              116,
              85,
              52,
              55,
              114,
              69,
              55,
              80,
              53,
              90,
              72,
              103,
              55,
              118,
              103,
              117,
              72,
              53,
              56,
              37,
              50,
              70,
              105,
              66,
              37,
              50,
              70,
              52,
              81,
              53,
              81,
              103,
              120,
              75,
              103,
              81,
              70,
              48,
              70,
              109,
              117,
              65,
              70,
              97,
              69,
              73,
              65,
              37,
              50,
              66,
              68,
              84,
              110,
              115,
              101,
              113,
              109,
              37,
              50,
              66,
              49,
              67,
              84,
              102,
              78,
              116,
              73,
              100,
              100,
              86,
              71,
              103,
              73,
              71,
              75,
              71,
              56,
              116,
              65,
              68,
              67,
              52,
              113,
              114,
              73,
              79,
              76,
              71,
              108,
              114,
              72,
              98,
              115,
              105,
              76,
              101,
              109,
              57,
              51,
              69,
              51,
              101,
              88,
              121,
              84,
              76,
              108,
              79,
              118,
              97,
              110,
              66,
              109,
              51,
              76,
              76,
              69,
              67,
              122,
              85,
              111,
              83,
              98,
              49,
              105,
              77,
              118,
              65,
              112,
              122,
              117,
              111,
              103,
              121,
              55,
              86,
              82,
              53,
              100,
              74,
              77,
              101,
              102,
              100,
              114,
              102,
              87,
              106,
              116,
              103,
              101,
              89,
              78,
              68,
              100,
              108,
              77,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1304,
          "responseSize": 257
        },
        "id": "22d00834-6c58-4ee6-badf-8aa8dc490b03",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "456498ad-70e0-4927-b4b4-4111fde59200",
          "length": 21,
          "cycles": 1,
          "position": 7,
          "iteration": 0,
          "httpRequestId": "f2819669-b83b-491d-bd12-9026db415e98"
        },
        "item": {
          "id": "e0de504c-bd57-4d66-9bb6-e0dcd521dc35",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "0505c6ba-0a09-4b3f-bf2c-825b2e3e8806",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC2507311547242F2CD0'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "e2a7a888-69c2-4dae-9085-91d065d632ec"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "0c81a4cc-6f3b-43fc-820d-9dbefdd86acb",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0100\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                  "  // 현재 시간 선언\r",
                  "  const now = new Date();\r",
                  "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                  "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                  "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                  "  const t = parsed.TRANTIME;\r",
                  "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                  "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                  "\r",
                  "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                  "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"451842******5446\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"신한카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%BD%C5%C7%D1%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "a81923b9-0600-4215-ab0f-5d757a80921c"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzcfXTTxRRh%2BjuC1%2BxTb3aJM2weIs3zf7UG56%2FZflpkMYeg%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "f38a275b-2d04-4470-a49d-2b07ce20f082",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=x7lkeo71ar49kj",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "33eb2bf2-a191-49b4-bcf4-c9f8e3b95699",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "439"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 13:30:11 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              70,
              68,
              83,
              99,
              115,
              89,
              118,
              103,
              52,
              89,
              99,
              121,
              83,
              76,
              37,
              50,
              66,
              53,
              78,
              76,
              86,
              78,
              116,
              103,
              97,
              106,
              73,
              108,
              119,
              105,
              83,
              103,
              73,
              89,
              99,
              82,
              80,
              37,
              50,
              66,
              90,
              51,
              53,
              81,
              53,
              57,
              51,
              77,
              50,
              51,
              112,
              79,
              110,
              100,
              83,
              107,
              65,
              116,
              55,
              118,
              71,
              111,
              69,
              75,
              86,
              71,
              79,
              105,
              57,
              121,
              72,
              113,
              55,
              56,
              106,
              84,
              77,
              121,
              104,
              50,
              56,
              85,
              73,
              113,
              121,
              54,
              111,
              51,
              107,
              72,
              110,
              50,
              81,
              120,
              90,
              122,
              88,
              76,
              116,
              112,
              82,
              106,
              104,
              54,
              79,
              37,
              50,
              66,
              118,
              49,
              72,
              77,
              66,
              87,
              99,
              67,
              111,
              116,
              86,
              122,
              66,
              82,
              85,
              86,
              80,
              49,
              48,
              66,
              98,
              83,
              49,
              68,
              67,
              69,
              114,
              108,
              87,
              49,
              48,
              51,
              68,
              80,
              101,
              86,
              98,
              75,
              99,
              104,
              37,
              50,
              70,
              114,
              55,
              122,
              37,
              50,
              70,
              49,
              56,
              66,
              73,
              119,
              86,
              99,
              103,
              100,
              37,
              50,
              70,
              117,
              68,
              114,
              115,
              54,
              81,
              122,
              81,
              97,
              112,
              119,
              97,
              97,
              76,
              99,
              50,
              98,
              87,
              50,
              79,
              52,
              107,
              120,
              121,
              113,
              70,
              76,
              121,
              97,
              86,
              114,
              75,
              89,
              111,
              86,
              74,
              72,
              99,
              82,
              73,
              83,
              103,
              82,
              109,
              80,
              65,
              73,
              74,
              115,
              88,
              75,
              90,
              102,
              111,
              67,
              73,
              119,
              86,
              120,
              121,
              106,
              103,
              54,
              104,
              56,
              82,
              48,
              97,
              89,
              37,
              50,
              66,
              51,
              81,
              65,
              119,
              82,
              76,
              85,
              100,
              70,
              108,
              67,
              115,
              97,
              70,
              89,
              52,
              80,
              99,
              52,
              108,
              107,
              119,
              77,
              74,
              116,
              109,
              111,
              37,
              50,
              70,
              68,
              56,
              98,
              105,
              70,
              118,
              110,
              49,
              50,
              121,
              48,
              115,
              87,
              83,
              79,
              55,
              81,
              101,
              52,
              122,
              73,
              104,
              85,
              109,
              117,
              99,
              101,
              116,
              79,
              80,
              112,
              51,
              97,
              87,
              115,
              66,
              86,
              105,
              111,
              88,
              79,
              77,
              48,
              84,
              37,
              50,
              66,
              106,
              107,
              90,
              102,
              50,
              100,
              112,
              98,
              88,
              52,
              84,
              51,
              104,
              55,
              102,
              75,
              122,
              65,
              53,
              105,
              37,
              50,
              66,
              81,
              81,
              89,
              65,
              77,
              83,
              76,
              99,
              55,
              89,
              77,
              101,
              57,
              74,
              68,
              101,
              88,
              67,
              54,
              97,
              81,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1449,
          "responseSize": 439
        },
        "id": "e0de504c-bd57-4d66-9bb6-e0dcd521dc35",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) ±5초 이내 검증",
            "skipped": false
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "707dac4a-302c-41de-8086-d6880112e33b",
          "length": 21,
          "cycles": 1,
          "position": 8,
          "iteration": 0,
          "httpRequestId": "799933b8-675d-466c-9025-c6000cfd992f"
        },
        "item": {
          "id": "9a808a8f-17d7-4417-b8a8-64d93841f4a6",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "b35692b0-b2ee-4fcd-bbd5-0456bdf2f700",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "c341e5ef-8fc2-428d-ae9c-404850bc7cab"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "040a518a-d6c9-4771-9d2e-85efbd040c7e",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "1413348b-78ef-4683-a7db-a31545fc45f0"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDU0MwrNPIoytD%2BVLw99pIBq1bQzXuIIVZ0fWUG00UUgKkSe1GRD6jS0Ty6tIpwMgkVdTFPgrXvWt2UD8oX3WGlmOQxRAeNZSl2dvahRo02Oj"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "80cf0d40-6095-454f-916b-2f7df429df6a",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=x7lkeo71ar49kj",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "2ac9879b-3e0a-4c15-b843-660bdd6ff152",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "255"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 13:30:13 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              86,
              51,
              108,
              69,
              37,
              50,
              66,
              76,
              122,
              119,
              121,
              53,
              81,
              118,
              83,
              89,
              77,
              67,
              71,
              108,
              109,
              112,
              73,
              57,
              80,
              49,
              68,
              87,
              52,
              103,
              88,
              69,
              117,
              83,
              114,
              108,
              116,
              80,
              79,
              78,
              89,
              76,
              80,
              53,
              120,
              37,
              50,
              66,
              52,
              76,
              104,
              75,
              76,
              76,
              118,
              75,
              68,
              101,
              117,
              75,
              112,
              53,
              55,
              78,
              115,
              103,
              53,
              51,
              83,
              55,
              104,
              72,
              49,
              73,
              85,
              82,
              114,
              82,
              102,
              49,
              121,
              122,
              117,
              103,
              113,
              98,
              120,
              110,
              71,
              104,
              53,
              52,
              86,
              86,
              66,
              118,
              37,
              50,
              66,
              89,
              99,
              48,
              119,
              89,
              112,
              89,
              116,
              99,
              74,
              53,
              118,
              67,
              55,
              98,
              119,
              71,
              122,
              37,
              50,
              66,
              75,
              70,
              85,
              76,
              118,
              48,
              71,
              84,
              106,
              80,
              103,
              71,
              119,
              98,
              121,
              98,
              52,
              48,
              106,
              56,
              104,
              114,
              88,
              57,
              57,
              117,
              71,
              102,
              67,
              71,
              84,
              72,
              118,
              77,
              54,
              112,
              73,
              51,
              73,
              79,
              113,
              111,
              87,
              98,
              97,
              75,
              102,
              49,
              71,
              82,
              82,
              82,
              86,
              72,
              49,
              75,
              107,
              99,
              81,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1464,
          "responseSize": 255
        },
        "id": "9a808a8f-17d7-4417-b8a8-64d93841f4a6",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "643ab1a6-e007-4437-a0fa-2f624a932120",
          "length": 21,
          "cycles": 1,
          "position": 9,
          "iteration": 0,
          "httpRequestId": "f66377ff-b2b8-4344-bd83-f617b7193686"
        },
        "item": {
          "id": "43a3eeb7-1cb5-414d-8fa6-c2f4af73630a",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "72012695-80a2-493c-9197-d3e5e6f8ef3e",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC2512151528144A426D'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "2a70fa5e-1d2e-481e-825e-29181789e5ce"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "35747dda-7fba-42b7-8178-a64b8c128e88",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0800\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                  "  // 현재 시간 선언\r",
                  "  const now = new Date();\r",
                  "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                  "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                  "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                  "  const t = parsed.TRANTIME;\r",
                  "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                  "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                  "\r",
                  "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                  "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"542586******3820\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "// \"NH농협카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"NH%B3%F3%C7%F9%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "815cda7b-91c5-4115-8f7b-a1147fb7726a"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzcfqMk1YAIjfTKOzEfoXN7bENBxmDICbQksXQP2fAKPCnw%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "fdcf7303-b2c8-4dbe-8138-f5e207441ba0",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=x7lkeo71ar49kj",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "ce6fa026-ca7a-4dcc-bf67-4d0a64662247",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "433"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 13:30:15 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              99,
              76,
              50,
              56,
              105,
              65,
              113,
              66,
              53,
              66,
              111,
              70,
              106,
              117,
              107,
              121,
              103,
              65,
              54,
              55,
              109,
              85,
              67,
              50,
              70,
              48,
              53,
              68,
              66,
              80,
              70,
              70,
              68,
              122,
              82,
              81,
              118,
              69,
              37,
              50,
              70,
              84,
              113,
              106,
              56,
              76,
              85,
              100,
              54,
              66,
              78,
              97,
              68,
              111,
              78,
              88,
              76,
              82,
              106,
              81,
              68,
              106,
              83,
              83,
              102,
              110,
              72,
              79,
              70,
              68,
              90,
              108,
              49,
              99,
              122,
              72,
              52,
              81,
              57,
              101,
              114,
              76,
              82,
              109,
              112,
              104,
              69,
              118,
              83,
              109,
              53,
              103,
              76,
              53,
              66,
              78,
              79,
              55,
              107,
              104,
              119,
              48,
              71,
              99,
              107,
              73,
              115,
              98,
              48,
              111,
              117,
              86,
              109,
              51,
              86,
              115,
              99,
              113,
              87,
              122,
              49,
              111,
              103,
              37,
              50,
              66,
              116,
              69,
              65,
              117,
              112,
              78,
              71,
              71,
              103,
              86,
              75,
              70,
              79,
              107,
              77,
              103,
              73,
              79,
              78,
              99,
              117,
              76,
              52,
              78,
              108,
              49,
              107,
              77,
              90,
              74,
              114,
              55,
              117,
              113,
              117,
              115,
              111,
              106,
              122,
              101,
              116,
              85,
              67,
              111,
              37,
              50,
              66,
              37,
              50,
              70,
              53,
              111,
              100,
              116,
              114,
              84,
              99,
              120,
              89,
              86,
              84,
              98,
              81,
              111,
              111,
              73,
              76,
              65,
              81,
              101,
              106,
              48,
              119,
              102,
              82,
              88,
              55,
              108,
              110,
              65,
              103,
              69,
              114,
              67,
              84,
              79,
              66,
              37,
              50,
              70,
              100,
              69,
              65,
              116,
              52,
              80,
              116,
              100,
              83,
              52,
              122,
              98,
              48,
              101,
              104,
              111,
              78,
              113,
              75,
              48,
              68,
              111,
              99,
              89,
              103,
              122,
              84,
              70,
              71,
              102,
              109,
              111,
              97,
              113,
              56,
              115,
              90,
              102,
              70,
              50,
              48,
              97,
              118,
              118,
              69,
              74,
              76,
              89,
              77,
              53,
              97,
              85,
              68,
              80,
              55,
              37,
              50,
              66,
              116,
              79,
              75,
              111,
              90,
              54,
              111,
              117,
              82,
              71,
              86,
              102,
              84,
              116,
              89,
              37,
              50,
              70,
              50,
              78,
              52,
              74,
              106,
              119,
              119,
              112,
              55,
              49,
              106,
              85,
              114,
              100,
              119,
              115,
              78,
              76,
              80,
              104,
              73,
              57,
              86,
              70,
              79,
              52,
              66,
              70,
              107,
              98,
              98,
              66,
              72,
              110,
              118,
              76,
              55,
              115,
              57,
              55,
              120,
              89,
              115,
              111,
              86,
              65,
              107,
              110,
              56,
              110,
              110,
              106,
              48,
              90,
              106,
              68,
              51,
              85,
              107,
              119,
              73,
              84,
              51,
              119,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1745,
          "responseSize": 433
        },
        "id": "43a3eeb7-1cb5-414d-8fa6-c2f4af73630a",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) ±5초 이내 검증",
            "skipped": false
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "5173eed6-cf5d-449c-90aa-f2e8ba8085b7",
          "length": 21,
          "cycles": 1,
          "position": 10,
          "iteration": 0,
          "httpRequestId": "8cc1ee01-d8fc-4a5f-9894-782430dffd17"
        },
        "item": {
          "id": "77289543-5fca-455b-bbb1-ecb3db8f9de0",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "dbba8045-59e0-45cc-af00-4b7e2067088c",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "a2ff7029-d8f2-4ee2-8701-222d3a0f877d"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "4c7acc85-274d-437e-8029-21616bcd3d83",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "3186fa67-6b61-445c-bfae-bb38d8ef0825"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDcl4XYuPWy41Y2IXrOJU0pcW6ZRH2tIGPKm6HDG5Jt9F05pVa310xh3xLVwhGwdU7H9RCHEs1uzU2qHabNB52ko5E5IZjEGlaXKhxmtez9ln"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "1648c80a-cc25-40c4-8367-69826f2085fe",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=x7lkeo71ar49kj",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "5ad40361-33c7-4de2-a48f-fb0fb8973b5b",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "263"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 13:30:16 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              86,
              51,
              108,
              69,
              37,
              50,
              66,
              76,
              122,
              119,
              121,
              53,
              81,
              118,
              83,
              89,
              77,
              67,
              71,
              108,
              109,
              112,
              73,
              56,
              102,
              85,
              115,
              57,
              90,
              86,
              37,
              50,
              70,
              118,
              87,
              67,
              75,
              76,
              80,
              56,
              78,
              99,
              71,
              88,
              82,
              99,
              52,
              79,
              111,
              87,
              109,
              117,
              66,
              104,
              119,
              106,
              109,
              79,
              72,
              54,
              79,
              65,
              109,
              72,
              48,
              117,
              69,
              54,
              121,
              49,
              120,
              105,
              106,
              77,
              65,
              79,
              79,
              82,
              112,
              118,
              70,
              106,
              83,
              98,
              37,
              50,
              66,
              107,
              86,
              98,
              83,
              73,
              116,
              117,
              110,
              48,
              90,
              50,
              66,
              74,
              37,
              50,
              66,
              108,
              70,
              48,
              49,
              104,
              115,
              102,
              37,
              50,
              70,
              109,
              89,
              122,
              55,
              121,
              102,
              50,
              82,
              82,
              122,
              84,
              81,
              66,
              107,
              74,
              89,
              57,
              57,
              110,
              56,
              49,
              114,
              75,
              105,
              37,
              50,
              66,
              104,
              109,
              68,
              75,
              122,
              116,
              119,
              104,
              109,
              101,
              107,
              89,
              76,
              54,
              81,
              97,
              88,
              37,
              50,
              70,
              112,
              89,
              89,
              118,
              65,
              122,
              111,
              54,
              65,
              120,
              57,
              52,
              70,
              73,
              83,
              111,
              122,
              99,
              66,
              118,
              118,
              90,
              75,
              37,
              50,
              66,
              89,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1514,
          "responseSize": 263
        },
        "id": "77289543-5fca-455b-bbb1-ecb3db8f9de0",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "a765c733-1954-41b1-9076-60df939aafd1",
          "length": 21,
          "cycles": 1,
          "position": 11,
          "iteration": 0,
          "httpRequestId": "1398487c-1984-4251-9798-728da2ec7da3"
        },
        "item": {
          "id": "250e33f4-29a9-403c-9632-9282c42f788b",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "5dd56be9-b7d8-439b-93a9-b22e39a77125",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC250804165745DBD04E'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "0dd7962e-0b08-46d0-a6fc-566d06104c28"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "a43a1b17-6c89-4874-ae39-dcdb67949085",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0300\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                  "  // 현재 시간 선언\r",
                  "  const now = new Date();\r",
                  "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                  "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                  "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                  "  const t = parsed.TRANTIME;\r",
                  "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                  "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                  "\r",
                  "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                  "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"540926******6041\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"국민카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"KB%B1%B9%B9%CE%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "93f8d5d9-01ef-42f5-b6f1-0efdbbc788ca"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzccTXfPyWymzriWFq4iqdmp99Wj2bHxTvGvcdoWGjKzABQ%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "7e18b7ac-c619-412f-890d-26075747efae",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=x7lkeo71ar49kj",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "ec618794-6d4a-4234-b5d2-a8199f8fc79b",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "447"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 13:30:19 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              109,
              37,
              50,
              66,
              54,
              71,
              66,
              89,
              57,
              107,
              74,
              81,
              114,
              116,
              99,
              83,
              88,
              121,
              89,
              70,
              120,
              69,
              57,
              101,
              122,
              67,
              73,
              71,
              78,
              109,
              49,
              55,
              108,
              119,
              119,
              48,
              48,
              122,
              78,
              50,
              77,
              79,
              110,
              112,
              55,
              112,
              100,
              51,
              99,
              112,
              49,
              80,
              120,
              120,
              97,
              109,
              119,
              111,
              37,
              50,
              66,
              116,
              72,
              37,
              50,
              70,
              97,
              117,
              76,
              55,
              81,
              68,
              82,
              68,
              72,
              85,
              118,
              115,
              98,
              106,
              104,
              106,
              37,
              50,
              66,
              82,
              84,
              57,
              117,
              99,
              82,
              69,
              76,
              78,
              100,
              117,
              119,
              109,
              90,
              69,
              98,
              37,
              50,
              70,
              84,
              101,
              71,
              114,
              97,
              98,
              103,
              48,
              97,
              118,
              69,
              110,
              51,
              54,
              72,
              110,
              90,
              70,
              116,
              86,
              102,
              78,
              81,
              81,
              86,
              121,
              79,
              106,
              74,
              87,
              84,
              83,
              74,
              90,
              101,
              84,
              48,
              78,
              82,
              114,
              113,
              53,
              109,
              78,
              66,
              98,
              77,
              82,
              90,
              68,
              67,
              116,
              106,
              50,
              77,
              122,
              78,
              79,
              102,
              109,
              102,
              76,
              120,
              102,
              87,
              106,
              81,
              71,
              116,
              113,
              51,
              70,
              106,
              70,
              113,
              51,
              78,
              66,
              112,
              98,
              49,
              49,
              109,
              116,
              50,
              75,
              73,
              52,
              105,
              109,
              122,
              72,
              49,
              86,
              120,
              115,
              65,
              78,
              99,
              100,
              101,
              37,
              50,
              66,
              105,
              54,
              88,
              98,
              109,
              101,
              114,
              122,
              68,
              83,
              78,
              121,
              70,
              88,
              75,
              65,
              86,
              81,
              87,
              117,
              103,
              49,
              71,
              107,
              66,
              70,
              106,
              37,
              50,
              66,
              48,
              68,
              69,
              118,
              101,
              108,
              69,
              108,
              75,
              114,
              114,
              68,
              86,
              71,
              90,
              113,
              111,
              79,
              68,
              98,
              100,
              75,
              83,
              83,
              37,
              50,
              66,
              122,
              100,
              97,
              121,
              98,
              98,
              122,
              71,
              85,
              121,
              48,
              83,
              90,
              118,
              121,
              56,
              111,
              85,
              82,
              51,
              99,
              54,
              109,
              37,
              50,
              66,
              90,
              74,
              90,
              102,
              107,
              89,
              67,
              68,
              109,
              75,
              37,
              50,
              66,
              37,
              50,
              66,
              79,
              82,
              80,
              56,
              110,
              74,
              54,
              79,
              118,
              89,
              113,
              80,
              99,
              98,
              112,
              73,
              37,
              50,
              70,
              81,
              90,
              115,
              68,
              67,
              37,
              50,
              66,
              103,
              119,
              88,
              80,
              79,
              82,
              109,
              118,
              77,
              37,
              50,
              66,
              113,
              98,
              90,
              115,
              103,
              50,
              52,
              100,
              55,
              107,
              110,
              120,
              103,
              79,
              99,
              88,
              113,
              115,
              109,
              103,
              71,
              104,
              53,
              119,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1396,
          "responseSize": 447
        },
        "id": "250e33f4-29a9-403c-9632-9282c42f788b",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) ±5초 이내 검증",
            "skipped": false
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "보증금 금액(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "bd0fef78-3463-4298-b27c-10f25694f798",
          "length": 21,
          "cycles": 1,
          "position": 12,
          "iteration": 0,
          "httpRequestId": "ca9a0320-2f19-4fcb-ac2a-932778b19b09"
        },
        "item": {
          "id": "99a69ed7-531a-410d-861f-258203323edc",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "09baea18-a92b-4ac8-9192-fb5878adac13",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "f230d788-e3ac-4148-b934-270229ca78e3"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "dab17057-9a36-4911-ac48-d5cd866842e5",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "41872359-eed1-4b0d-8e1f-567a8fc6b07e"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDUAtbv87ny1oj%2B3Smxt%2FO%2FT0tK3Zr3mNJ%2B91lzOEzMFk1rys9LrG6aTyawktttZs3VpFDgd3Qdr5adCy8P8B02J2gNK7BuAqhEPrGZDAd6lm"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "5090d4a6-1221-4f00-8511-3cc9d4d2588e",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=x7lkeo71ar49kj",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "3b4e77ee-1dbd-48c7-b95d-8038896a30d9",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "261"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 13:30:20 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              86,
              51,
              108,
              69,
              37,
              50,
              66,
              76,
              122,
              119,
              121,
              53,
              81,
              118,
              83,
              89,
              77,
              67,
              71,
              108,
              109,
              112,
              73,
              56,
              48,
              53,
              80,
              37,
              50,
              66,
              69,
              54,
              114,
              37,
              50,
              66,
              116,
              98,
              37,
              50,
              70,
              99,
              70,
              70,
              117,
              116,
              75,
              51,
              48,
              67,
              117,
              102,
              88,
              98,
              55,
              54,
              110,
              52,
              89,
              106,
              75,
              84,
              109,
              120,
              52,
              37,
              50,
              66,
              107,
              50,
              108,
              50,
              70,
              82,
              37,
              50,
              66,
              76,
              79,
              84,
              112,
              83,
              103,
              57,
              71,
              86,
              112,
              100,
              48,
              52,
              83,
              78,
              87,
              57,
              103,
              99,
              122,
              105,
              67,
              82,
              67,
              65,
              73,
              66,
              66,
              53,
              113,
              85,
              115,
              55,
              100,
              90,
              51,
              121,
              37,
              50,
              66,
              81,
              115,
              106,
              119,
              86,
              85,
              101,
              83,
              100,
              83,
              68,
              121,
              52,
              52,
              57,
              70,
              84,
              109,
              80,
              106,
              109,
              114,
              70,
              97,
              80,
              80,
              106,
              89,
              105,
              108,
              83,
              84,
              121,
              100,
              110,
              78,
              89,
              106,
              78,
              106,
              106,
              49,
              79,
              113,
              79,
              53,
              111,
              107,
              98,
              111,
              68,
              116,
              105,
              77,
              77,
              103,
              77,
              53,
              113,
              108,
              72,
              78,
              51,
              69,
              51,
              85,
              104,
              73,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1394,
          "responseSize": 261
        },
        "id": "99a69ed7-531a-410d-861f-258203323edc",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "c2717cea-2d33-493d-8d90-52a0f0175f0c",
          "length": 21,
          "cycles": 1,
          "position": 13,
          "iteration": 0,
          "httpRequestId": "59791d68-1fba-4204-9efc-44570eb70012"
        },
        "item": {
          "id": "e80d987d-085a-471c-98df-5362b668d820",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "512bfdaa-b922-4574-98cb-f0d96ba32c47",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC25080416595836B04B'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "ee9991dd-d8c0-4cfe-bc2b-49185ab079aa"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "e1465812-a883-44b9-81cc-387b4126b3c3",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0202\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                  "  // 현재 시간 선언\r",
                  "  const now = new Date();\r",
                  "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                  "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                  "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                  "  const t = parsed.TRANTIME;\r",
                  "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                  "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                  "\r",
                  "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                  "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"538920******1226\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"삼성카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%BF%EC%B8%AEBC%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "e3328387-555b-4c9d-8677-557e3d61f53a"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzccVRR%2FtepSx6ESumfhyCleVEPVKGpunFtzDUwUlJoNVsg%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "b61d4cf1-ab65-4cda-87bf-bd54a637076e",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=x7lkeo71ar49kj",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "73a0a169-fd5b-4975-828a-74dd0191a696",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "445"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 13:30:22 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              78,
              114,
              70,
              88,
              55,
              77,
              67,
              119,
              78,
              65,
              115,
              52,
              121,
              105,
              104,
              76,
              107,
              51,
              90,
              57,
              118,
              50,
              49,
              37,
              50,
              66,
              121,
              98,
              68,
              99,
              88,
              122,
              119,
              120,
              80,
              105,
              55,
              104,
              74,
              83,
              84,
              49,
              51,
              117,
              72,
              66,
              37,
              50,
              70,
              73,
              79,
              107,
              68,
              79,
              37,
              50,
              70,
              54,
              37,
              50,
              66,
              83,
              117,
              97,
              70,
              66,
              88,
              88,
              69,
              54,
              85,
              122,
              85,
              74,
              57,
              105,
              70,
              49,
              74,
              72,
              80,
              118,
              101,
              71,
              37,
              50,
              70,
              86,
              57,
              84,
              54,
              116,
              89,
              67,
              67,
              81,
              71,
              77,
              98,
              73,
              82,
              65,
              66,
              79,
              89,
              118,
              105,
              85,
              106,
              74,
              74,
              119,
              51,
              107,
              37,
              50,
              70,
              107,
              56,
              53,
              122,
              121,
              100,
              103,
              74,
              114,
              106,
              80,
              83,
              87,
              52,
              101,
              85,
              84,
              111,
              98,
              117,
              50,
              104,
              103,
              55,
              52,
              84,
              112,
              116,
              106,
              74,
              78,
              74,
              49,
              116,
              97,
              37,
              50,
              66,
              74,
              70,
              120,
              74,
              89,
              66,
              105,
              78,
              113,
              67,
              103,
              74,
              110,
              90,
              109,
              111,
              109,
              76,
              73,
              114,
              97,
              86,
              106,
              87,
              81,
              57,
              48,
              49,
              105,
              76,
              101,
              76,
              66,
              53,
              77,
              54,
              84,
              66,
              82,
              86,
              54,
              86,
              85,
              110,
              118,
              109,
              71,
              65,
              79,
              52,
              109,
              57,
              78,
              86,
              109,
              113,
              82,
              108,
              54,
              105,
              97,
              98,
              76,
              54,
              80,
              119,
              53,
              97,
              79,
              81,
              72,
              117,
              77,
              54,
              48,
              101,
              75,
              71,
              119,
              84,
              50,
              78,
              76,
              110,
              103,
              55,
              56,
              51,
              121,
              76,
              97,
              57,
              74,
              99,
              100,
              75,
              103,
              76,
              88,
              111,
              54,
              115,
              118,
              69,
              111,
              79,
              106,
              97,
              79,
              106,
              108,
              37,
              50,
              70,
              53,
              68,
              104,
              87,
              37,
              50,
              66,
              67,
              109,
              117,
              81,
              89,
              102,
              52,
              108,
              73,
              104,
              52,
              56,
              37,
              50,
              70,
              37,
              50,
              70,
              110,
              107,
              103,
              67,
              99,
              104,
              78,
              83,
              116,
              37,
              50,
              66,
              106,
              86,
              99,
              111,
              90,
              48,
              67,
              71,
              56,
              70,
              66,
              84,
              103,
              122,
              112,
              49,
              48,
              56,
              56,
              48,
              57,
              78,
              86,
              117,
              83,
              75,
              67,
              82,
              116,
              53,
              115,
              115,
              99,
              98,
              98,
              67,
              73,
              51,
              81,
              76,
              73,
              114,
              87,
              67,
              110,
              121,
              89,
              85,
              108,
              49,
              76,
              100,
              101,
              37,
              50,
              70,
              81,
              68,
              79,
              48,
              103,
              119,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1761,
          "responseSize": 445
        },
        "id": "e80d987d-085a-471c-98df-5362b668d820",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) ±5초 이내 검증",
            "skipped": false
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "보증금 금액(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "39d16251-2395-4dba-82be-a8008b43cbce",
          "length": 21,
          "cycles": 1,
          "position": 14,
          "iteration": 0,
          "httpRequestId": "8ff01871-a930-4269-ac68-a6f58248c598"
        },
        "item": {
          "id": "2bfd1e35-e631-4c4f-b69d-7f124ecfdcf7",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "20ee37da-7bf0-47db-809f-08bc9f977586",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "c4bfeb64-ea34-4f55-81a1-bd032e338643"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "d3c8c1b2-9787-4b7e-85d2-73fed0bd7ee4",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "c8bd92a5-dc1f-4806-ba1e-e0e0f288de5b"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDXlBj%2BRyd3yRGsDn9qPZZHOF6bCChcclgdfUj4qzxutkqU%2B1E66xWZBs%2F4ggPJYfKAZM9GmbudjKgiyPAoq9mI5W7TosRnVfbp%2Fj7GyZrvT4"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "ca85f2a6-96c5-48fd-99b2-e8b00b656142",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=x7lkeo71ar49kj",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "14e3981a-c756-417d-9770-7b6ee6ce3690",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "263"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 13:30:23 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              86,
              51,
              108,
              69,
              37,
              50,
              66,
              76,
              122,
              119,
              121,
              53,
              81,
              118,
              83,
              89,
              77,
              67,
              71,
              108,
              109,
              112,
              73,
              120,
              86,
              119,
              74,
              90,
              66,
              115,
              88,
              115,
              88,
              115,
              100,
              74,
              121,
              118,
              52,
              74,
              79,
              52,
              65,
              118,
              105,
              71,
              54,
              98,
              76,
              51,
              112,
              37,
              50,
              70,
              90,
              97,
              99,
              104,
              75,
              65,
              88,
              86,
              118,
              75,
              109,
              52,
              67,
              97,
              122,
              88,
              122,
              37,
              50,
              70,
              105,
              74,
              98,
              52,
              114,
              75,
              50,
              86,
              101,
              73,
              108,
              81,
              111,
              90,
              37,
              50,
              70,
              73,
              90,
              37,
              50,
              66,
              76,
              114,
              37,
              50,
              66,
              37,
              50,
              70,
              81,
              73,
              79,
              69,
              88,
              50,
              110,
              83,
              109,
              65,
              86,
              89,
              117,
              120,
              50,
              121,
              76,
              115,
              77,
              48,
              104,
              108,
              102,
              72,
              56,
              87,
              77,
              117,
              102,
              112,
              121,
              102,
              80,
              78,
              120,
              103,
              103,
              106,
              113,
              56,
              89,
              117,
              119,
              119,
              54,
              105,
              98,
              87,
              69,
              87,
              107,
              37,
              50,
              70,
              116,
              87,
              72,
              83,
              122,
              79,
              76,
              65,
              66,
              90,
              79,
              79,
              80,
              67,
              68,
              86,
              98,
              51,
              83,
              111,
              87,
              83,
              89,
              54,
              66,
              89,
              120,
              87,
              111,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1371,
          "responseSize": 263
        },
        "id": "2bfd1e35-e631-4c4f-b69d-7f124ecfdcf7",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "72331ebf-392d-499b-8619-43ea6cb02964",
          "length": 21,
          "cycles": 1,
          "position": 15,
          "iteration": 0,
          "httpRequestId": "9a0a7c51-16e7-4ce1-b5b2-9dd2cee4336e"
        },
        "item": {
          "id": "ab53d137-7c46-4dbf-af38-baeb4573c13c",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "f2c3af11-aa02-48fb-aa6a-2180b7eebd0e",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC251215145003CEDD72'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "6b42aac6-3e16-4db2-b7ef-9623a18afe5b"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "52edb961-17cc-4534-aaf9-297f71884269",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0907\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                  "  // 현재 시간 선언\r",
                  "  const now = new Date();\r",
                  "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                  "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                  "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                  "  const t = parsed.TRANTIME;\r",
                  "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                  "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                  "\r",
                  "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                  "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"624404******8380\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"롯데카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%BF%EC%B8%AE%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "a3e2c600-26a5-4763-92e4-b570be8ac66e"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzcextrJriQhf%2FIUYtULhB8bH62Qdp0SGru%2BMd63vyNOLHA%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "e623f008-3525-4f7d-991c-fc36f8c989ef",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=x7lkeo71ar49kj",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "01abff0d-8810-4569-951f-c4d12a9960f1",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "439"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 13:30:24 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              67,
              69,
              86,
              56,
              88,
              48,
              116,
              51,
              118,
              77,
              102,
              108,
              57,
              65,
              84,
              99,
              48,
              69,
              103,
              77,
              86,
              103,
              115,
              37,
              50,
              66,
              83,
              101,
              50,
              37,
              50,
              66,
              77,
              83,
              68,
              103,
              54,
              37,
              50,
              70,
              71,
              37,
              50,
              70,
              104,
              97,
              117,
              48,
              73,
              72,
              66,
              78,
              55,
              55,
              113,
              107,
              37,
              50,
              70,
              77,
              70,
              100,
              80,
              117,
              48,
              74,
              56,
              49,
              48,
              116,
              66,
              76,
              98,
              72,
              87,
              80,
              107,
              75,
              48,
              122,
              48,
              83,
              102,
              109,
              54,
              75,
              83,
              50,
              74,
              82,
              88,
              76,
              80,
              54,
              74,
              102,
              51,
              66,
              120,
              55,
              76,
              107,
              51,
              117,
              67,
              84,
              57,
              65,
              85,
              86,
              55,
              100,
              50,
              77,
              68,
              80,
              89,
              75,
              76,
              117,
              98,
              51,
              54,
              50,
              118,
              111,
              103,
              71,
              99,
              113,
              97,
              54,
              37,
              50,
              70,
              117,
              54,
              107,
              107,
              120,
              37,
              50,
              70,
              118,
              113,
              65,
              105,
              122,
              67,
              55,
              82,
              99,
              99,
              119,
              119,
              66,
              50,
              100,
              97,
              86,
              88,
              49,
              88,
              80,
              112,
              110,
              109,
              66,
              79,
              52,
              56,
              50,
              100,
              65,
              48,
              49,
              122,
              118,
              79,
              50,
              119,
              73,
              75,
              90,
              81,
              78,
              121,
              98,
              87,
              104,
              88,
              89,
              111,
              87,
              48,
              54,
              90,
              69,
              83,
              100,
              106,
              67,
              54,
              104,
              108,
              82,
              88,
              77,
              86,
              113,
              77,
              101,
              54,
              76,
              73,
              65,
              121,
              103,
              81,
              49,
              69,
              107,
              103,
              108,
              50,
              79,
              106,
              53,
              111,
              68,
              110,
              104,
              120,
              109,
              110,
              77,
              112,
              65,
              37,
              50,
              70,
              98,
              81,
              79,
              82,
              90,
              122,
              97,
              51,
              107,
              101,
              85,
              107,
              100,
              90,
              107,
              57,
              49,
              101,
              74,
              106,
              120,
              109,
              121,
              65,
              52,
              107,
              73,
              50,
              103,
              121,
              48,
              49,
              119,
              73,
              76,
              100,
              112,
              107,
              65,
              53,
              103,
              75,
              74,
              79,
              115,
              71,
              107,
              109,
              113,
              85,
              114,
              121,
              115,
              37,
              50,
              70,
              74,
              54,
              120,
              116,
              67,
              72,
              70,
              108,
              57,
              76,
              100,
              53,
              89,
              106,
              87,
              83,
              56,
              108,
              109,
              108,
              81,
              75,
              103,
              66,
              101,
              79,
              66,
              105,
              82,
              67,
              37,
              50,
              66,
              55,
              85,
              109,
              116,
              73,
              51,
              97,
              118,
              77,
              67,
              98,
              66,
              51,
              119,
              84,
              69,
              84,
              115,
              109,
              74,
              70,
              85,
              117,
              48,
              75,
              85,
              106,
              76,
              118,
              114,
              67,
              103,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1332,
          "responseSize": 439
        },
        "id": "ab53d137-7c46-4dbf-af38-baeb4573c13c",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) ±5초 이내 검증",
            "skipped": false
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "보증금 금액(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "31fce665-ca2c-4482-bc76-81953509fbf5",
          "length": 21,
          "cycles": 1,
          "position": 16,
          "iteration": 0,
          "httpRequestId": "84e50094-7439-4083-bcb0-6ffd7fc33bcd"
        },
        "item": {
          "id": "b93fc38a-4298-41de-aebd-0c1532f16327",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "e4ef27f4-3164-4645-a527-74812f1b2dbc",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "86d21b63-60c9-4533-85c1-f55925ef5439"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "0366cea5-2545-4ac5-875c-b68815f8806f",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "668c7ec6-1004-45aa-9067-4d3c6543d1a3"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDWxgxSrVIs%2FC%2BQ0XARBdtV7X8o%2ByNtqhTSFkbwgYEAEkd%2BFipzNeycBzgLqOZ7iWiEiMokJjMrO9BvtdqoUWas9CgW34qxPCLMzZzZOm8IA9"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "069db188-e691-4841-9dde-0db96bd694b4",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=x7lkeo71ar49kj",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "945b8868-9741-40dd-a61b-adf79a739a88",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "261"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 13:30:27 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              86,
              51,
              108,
              69,
              37,
              50,
              66,
              76,
              122,
              119,
              121,
              53,
              81,
              118,
              83,
              89,
              77,
              67,
              71,
              108,
              109,
              112,
              73,
              37,
              50,
              66,
              119,
              107,
              50,
              100,
              120,
              97,
              86,
              65,
              121,
              81,
              51,
              72,
              83,
              88,
              108,
              71,
              77,
              80,
              118,
              117,
              79,
              79,
              48,
              116,
              97,
              98,
              52,
              37,
              50,
              66,
              87,
              116,
              108,
              110,
              76,
              114,
              88,
              79,
              107,
              114,
              51,
              110,
              66,
              84,
              113,
              79,
              117,
              88,
              108,
              105,
              83,
              106,
              97,
              120,
              74,
              118,
              104,
              84,
              97,
              109,
              69,
              37,
              50,
              70,
              81,
              67,
              56,
              111,
              77,
              105,
              57,
              88,
              122,
              104,
              83,
              66,
              108,
              54,
              107,
              97,
              77,
              113,
              120,
              37,
              50,
              70,
              114,
              48,
              117,
              108,
              70,
              115,
              80,
              120,
              56,
              80,
              122,
              116,
              70,
              90,
              83,
              115,
              76,
              106,
              48,
              55,
              89,
              77,
              56,
              119,
              111,
              118,
              110,
              66,
              56,
              90,
              81,
              88,
              80,
              113,
              37,
              50,
              70,
              56,
              84,
              69,
              106,
              67,
              112,
              118,
              120,
              52,
              116,
              106,
              83,
              37,
              50,
              70,
              85,
              101,
              105,
              86,
              78,
              105,
              104,
              74,
              83,
              79,
              105,
              49,
              78,
              54,
              90,
              88,
              116,
              65,
              101,
              83,
              115,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1383,
          "responseSize": 261
        },
        "id": "b93fc38a-4298-41de-aebd-0c1532f16327",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "cc56a911-65c3-4dbd-879c-789a208a2a4e",
          "length": 21,
          "cycles": 1,
          "position": 17,
          "iteration": 0,
          "httpRequestId": "4c4709b1-440b-446b-adac-42e054083ac6"
        },
        "item": {
          "id": "774e09b7-7f56-4e14-b8a0-a5b2784ff031",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "18228943-984e-4119-adfe-8427bdf045d5",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC25121515231344D775'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "07feae6f-c949-4f5f-b1a9-d27c3f6546d8"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "89867009-a8c3-4ea0-b02b-eb7988de5559",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0921\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                  "  // 현재 시간 선언\r",
                  "  const now = new Date();\r",
                  "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                  "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                  "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                  "  const t = parsed.TRANTIME;\r",
                  "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                  "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                  "\r",
                  "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                  "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"485462******0767\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"삼성카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%C4%C9%C0%CC%B9%F0%C5%A9%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "7712d593-476f-4ea6-a84f-8c183ebd6529"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzccQmxP3XnXAnB6A1V7j6yFer%2BQE%2Ba1pl7pMnq93f1iTpw%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "232e4f2c-6de1-4b73-ba1e-7691c2dccf07",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=x7lkeo71ar49kj",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "13cd18d3-d336-4b75-b61f-1e7dbe3360cc",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "435"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 13:30:28 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              105,
              110,
              68,
              107,
              89,
              110,
              57,
              105,
              111,
              74,
              115,
              68,
              56,
              111,
              102,
              101,
              113,
              105,
              120,
              97,
              90,
              104,
              97,
              102,
              103,
              86,
              122,
              82,
              84,
              70,
              80,
              37,
              50,
              70,
              103,
              67,
              67,
              70,
              120,
              86,
              83,
              37,
              50,
              70,
              109,
              71,
              98,
              79,
              67,
              90,
              74,
              56,
              102,
              76,
              112,
              79,
              121,
              113,
              118,
              97,
              85,
              74,
              50,
              115,
              114,
              51,
              122,
              56,
              118,
              49,
              76,
              104,
              48,
              98,
              90,
              68,
              106,
              89,
              113,
              97,
              116,
              73,
              53,
              88,
              101,
              53,
              67,
              67,
              37,
              50,
              66,
              55,
              105,
              68,
              117,
              54,
              118,
              86,
              55,
              97,
              99,
              107,
              37,
              50,
              70,
              119,
              48,
              50,
              121,
              50,
              72,
              122,
              115,
              51,
              101,
              68,
              109,
              108,
              121,
              103,
              109,
              75,
              114,
              82,
              114,
              80,
              49,
              87,
              73,
              103,
              78,
              87,
              111,
              69,
              119,
              101,
              122,
              97,
              68,
              119,
              51,
              76,
              112,
              75,
              65,
              104,
              56,
              52,
              37,
              50,
              70,
              85,
              116,
              112,
              75,
              112,
              85,
              56,
              68,
              85,
              87,
              97,
              77,
              66,
              98,
              113,
              112,
              88,
              99,
              115,
              114,
              88,
              79,
              82,
              74,
              77,
              68,
              65,
              114,
              109,
              112,
              56,
              119,
              97,
              70,
              106,
              110,
              118,
              54,
              49,
              117,
              57,
              90,
              99,
              78,
              113,
              117,
              121,
              76,
              106,
              69,
              57,
              55,
              57,
              55,
              121,
              115,
              122,
              100,
              89,
              117,
              115,
              77,
              68,
              110,
              109,
              90,
              110,
              67,
              111,
              76,
              106,
              56,
              70,
              107,
              72,
              97,
              106,
              74,
              114,
              103,
              70,
              81,
              82,
              52,
              53,
              37,
              50,
              70,
              54,
              112,
              73,
              118,
              104,
              73,
              97,
              37,
              50,
              66,
              77,
              54,
              84,
              118,
              74,
              49,
              65,
              97,
              104,
              122,
              74,
              110,
              50,
              56,
              70,
              69,
              100,
              49,
              112,
              69,
              90,
              54,
              99,
              87,
              120,
              84,
              114,
              72,
              100,
              68,
              54,
              118,
              79,
              110,
              78,
              116,
              70,
              89,
              111,
              104,
              65,
              51,
              87,
              110,
              65,
              115,
              69,
              77,
              113,
              72,
              70,
              121,
              65,
              37,
              50,
              66,
              111,
              106,
              115,
              82,
              57,
              107,
              97,
              104,
              121,
              67,
              107,
              72,
              52,
              97,
              103,
              71,
              85,
              52,
              82,
              79,
              48,
              101,
              68,
              48,
              87,
              70,
              79,
              57,
              55,
              72,
              55,
              51,
              77,
              111,
              70,
              50,
              121,
              83,
              97,
              49,
              83,
              69,
              89,
              103,
              90,
              79,
              74,
              66,
              80,
              106,
              102,
              78,
              65,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1740,
          "responseSize": 435
        },
        "id": "774e09b7-7f56-4e14-b8a0-a5b2784ff031",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) ±5초 이내 검증",
            "skipped": false
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "보증금 금액(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "5532fa25-801e-4d96-bb47-ac41505809c3",
          "length": 21,
          "cycles": 1,
          "position": 18,
          "iteration": 0,
          "httpRequestId": "6b75af86-3f9f-4aa5-af3d-005c1a6a7bd2"
        },
        "item": {
          "id": "fd7aab42-ab93-4dbf-a34a-767b02c7b9b5",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "e7feacda-897b-4182-9c02-a3200c335f72",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "4397305f-b094-4995-be61-db7b0d309397"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "3892475a-c3ce-4358-950f-1f0e1b46a0e3",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "f718a1eb-f649-4665-bf01-345660894fc6"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDd61aqzVXb4Os0%2Bhn%2Bch2%2Fc%2Bgry3f8KIJ9HPKB1Jr2ync%2FZwzpPDCZNznapZysKmQzY6YVQbrMhybcNdfah1BNiBRJfvS50ge4lsTNJRBqcz"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "67f9fe90-ed9e-49e7-b37b-9eef1e8ffb6c",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=x7lkeo71ar49kj",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "a01e16bf-9d1d-40cd-a758-6954276299d0",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "261"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 13:30:30 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              86,
              51,
              108,
              69,
              37,
              50,
              66,
              76,
              122,
              119,
              121,
              53,
              81,
              118,
              83,
              89,
              77,
              67,
              71,
              108,
              109,
              112,
              73,
              121,
              37,
              50,
              70,
              115,
              76,
              52,
              99,
              108,
              75,
              87,
              51,
              37,
              50,
              66,
              121,
              74,
              69,
              54,
              79,
              109,
              102,
              83,
              89,
              65,
              53,
              37,
              50,
              66,
              87,
              84,
              106,
              122,
              72,
              98,
              73,
              53,
              80,
              72,
              107,
              108,
              118,
              111,
              71,
              99,
              53,
              79,
              84,
              97,
              117,
              54,
              87,
              100,
              107,
              112,
              76,
              111,
              71,
              69,
              122,
              114,
              71,
              116,
              52,
              68,
              68,
              77,
              48,
              57,
              54,
              79,
              80,
              37,
              50,
              66,
              54,
              90,
              53,
              52,
              77,
              78,
              53,
              82,
              87,
              68,
              119,
              88,
              70,
              120,
              88,
              118,
              90,
              71,
              77,
              50,
              108,
              89,
              80,
              55,
              72,
              121,
              66,
              89,
              37,
              50,
              66,
              101,
              76,
              70,
              78,
              49,
              77,
              106,
              97,
              99,
              112,
              88,
              81,
              65,
              117,
              99,
              108,
              122,
              120,
              87,
              109,
              69,
              52,
              116,
              85,
              120,
              75,
              110,
              111,
              81,
              120,
              80,
              67,
              49,
              114,
              98,
              99,
              105,
              86,
              81,
              80,
              116,
              117,
              53,
              52,
              84,
              51,
              67,
              37,
              50,
              66,
              112,
              82,
              66,
              80,
              104,
              111,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1480,
          "responseSize": 261
        },
        "id": "fd7aab42-ab93-4dbf-a34a-767b02c7b9b5",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "9508f97d-2c2a-44a1-98c6-f860c005540c",
          "length": 21,
          "cycles": 1,
          "position": 19,
          "iteration": 0,
          "httpRequestId": "4ade72cb-c565-4d99-8ea2-e61c7b2df5f9"
        },
        "item": {
          "id": "5a0fbd38-82ba-493e-a70e-2d3a626cb0d2",
          "name": "정기결제 요청 (OTBILL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "e1374592-5f34-4540-b508-3a76457d61fb",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    ITEMNAME: 'apiautotest',\r",
                  "    AMOUNT: '301',\r",
                  "    CURRENCY: '410',\r",
                  "    USERID: 'hnkim',\r",
                  "    USERAGENT: 'ONLINE',\r",
                  "    TXTYPE: 'OTBILL',\r",
                  "    SERVICETYPE: 'BATCH',\r",
                  "    ISREBILL: 'Y',\r",
                  "    BILLINFO: 'DC2512151453119224E3'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "ffd11ea4-076f-45eb-8e26-910091d513c5"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "53d31792-a38d-4dda-868d-9116c460d1cd",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드사 코드(CARDCODE 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDCODE).to.eql(\"0700\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 전화번호(USERPHONE) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.USERPHONE).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"할부 개월 수(QUOTA) 정상출력\", function () {\r",
                  "    pm.expect(parsed.QUOTA).to.eql(\"00\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"매출 발생시간(TRANTIME) ±5초 이내 검증\", function () {\r",
                  "  // 현재 시간 선언\r",
                  "  const now = new Date();\r",
                  "  // 현재 시각을 초(second) 단위로 변환 (HH*3600 + MM*60 + SS)\r",
                  "  const nowSec = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();\r",
                  "  // 응답으로 받은 거래 시간 (형식: HHmmss)\r",
                  "  const t = parsed.TRANTIME;\r",
                  "  // TRANTIME(HHmmss)을 초(second) 단위로 변환\r",
                  "  const tranSec = (+t.slice(0,2)) * 3600 + (+t.slice(2,4)) * 60 + (+t.slice(4,6));\r",
                  "\r",
                  "  // 현재 시각과 거래 시각의 차이가 5초 이내인지 검증\r",
                  "  pm.expect(Math.abs(nowSec - tranSec)).to.be.at.most(5);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TRANTIME 저장\r",
                  "pm.environment.set(\"TRANTIME\", parsed.TRANTIME);\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"매출 발생일자(TRANDATE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"상품명(ITEMNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.ITEMNAME).to.eql(\"apiautotest\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"보증금 금액(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "});\r",
                  "\r",
                  "// Environments에 TID 저장\r",
                  "pm.environment.set(\"TID\", parsed.TID);\r",
                  "\r",
                  "pm.test(\"가맹점 주문번호(ORDERID) 빈값 확인\", function () {\r",
                  "    pm.expect(parsed.ORDERID).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"카드번호(CARDNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNO).to.eql(\"513792******3380\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"거래 승인 번호(CARDAUTHNO) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.exist;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.not.be.empty;\r",
                  "    pm.expect(parsed.CARDAUTHNO).to.match(/^\\d{8}$/);\r",
                  "});\r",
                  "\r",
                  "// \"롯데카드\" 검증\r",
                  "pm.test(\"카드사 명(CARDNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.CARDNAME).to.eql(\"%B7%D4%B5%A5%C4%AB%B5%E5\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 이름(USERNAME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERNAME).to.be.empty;\r",
                  "});\r",
                  "\r",
                  "pm.test(\"구매자 ID(USERID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.USERID).to.eql(\"hnkim\")\r",
                  "});"
                ],
                "_lastExecutionId": "bdd453b1-03a3-41f6-84c3-7a92e6c398ab"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "wcpoTy27mkzR%2FoCmuhu%2BEL1VevUN6wQgs96fAg0NJdKChw9Ccm7hXXJcj%2FUGj%2Bb8z5dq8TvydwIj3RXPjUXi4KzQHH0ZG0DZA03Udge2eI0IsrkEsoTSxKLbYyq5iCvbykTt6GhW9hCDbp8fHC1zGJEYvBJNsjEqz2X9zw2JzcfDPdPuA9czR8Lb0T%2Ba0ODlNEPIdgayTwp7V1JVXixp1g%3D%3D"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "b0114ee3-e13f-4b3b-8b05-3bb51a81513b",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=x7lkeo71ar49kj",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "fe61a653-2586-4e97-bd74-4ddf36384497",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "431"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 13:30:31 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              85,
              79,
              114,
              84,
              50,
              122,
              98,
              84,
              116,
              90,
              116,
              65,
              104,
              54,
              52,
              50,
              115,
              86,
              101,
              74,
              54,
              83,
              116,
              115,
              67,
              83,
              76,
              81,
              114,
              72,
              89,
              56,
              55,
              101,
              99,
              98,
              52,
              66,
              83,
              55,
              77,
              57,
              87,
              79,
              55,
              51,
              68,
              55,
              111,
              100,
              37,
              50,
              66,
              74,
              83,
              119,
              107,
              70,
              110,
              106,
              115,
              76,
              82,
              115,
              110,
              73,
              97,
              97,
              115,
              68,
              115,
              66,
              101,
              121,
              75,
              108,
              56,
              75,
              74,
              53,
              72,
              78,
              73,
              122,
              113,
              89,
              65,
              84,
              88,
              55,
              49,
              57,
              77,
              48,
              120,
              88,
              121,
              112,
              122,
              87,
              66,
              86,
              100,
              77,
              87,
              57,
              67,
              84,
              116,
              86,
              105,
              80,
              73,
              119,
              117,
              83,
              101,
              120,
              85,
              67,
              81,
              107,
              70,
              67,
              53,
              102,
              65,
              84,
              82,
              104,
              99,
              103,
              49,
              114,
              77,
              77,
              100,
              99,
              106,
              119,
              90,
              55,
              37,
              50,
              70,
              49,
              107,
              84,
              76,
              104,
              79,
              82,
              71,
              109,
              88,
              83,
              110,
              87,
              76,
              69,
              69,
              51,
              86,
              90,
              108,
              105,
              102,
              74,
              106,
              81,
              85,
              111,
              87,
              78,
              121,
              49,
              81,
              51,
              70,
              54,
              100,
              70,
              99,
              69,
              55,
              100,
              89,
              80,
              100,
              117,
              56,
              55,
              87,
              51,
              117,
              114,
              97,
              54,
              83,
              37,
              50,
              70,
              77,
              83,
              72,
              75,
              119,
              49,
              75,
              49,
              68,
              106,
              114,
              112,
              88,
              70,
              68,
              101,
              99,
              54,
              83,
              69,
              107,
              112,
              103,
              116,
              106,
              48,
              66,
              55,
              82,
              79,
              107,
              54,
              69,
              80,
              102,
              76,
              65,
              105,
              56,
              83,
              68,
              85,
              80,
              86,
              121,
              107,
              52,
              57,
              97,
              81,
              104,
              54,
              71,
              112,
              76,
              49,
              120,
              77,
              52,
              67,
              111,
              82,
              65,
              116,
              55,
              70,
              74,
              89,
              85,
              74,
              113,
              117,
              48,
              69,
              77,
              78,
              86,
              76,
              77,
              57,
              104,
              103,
              57,
              80,
              74,
              52,
              56,
              111,
              109,
              57,
              73,
              66,
              37,
              50,
              70,
              76,
              71,
              37,
              50,
              66,
              112,
              57,
              37,
              50,
              70,
              74,
              100,
              67,
              79,
              111,
              52,
              75,
              48,
              80,
              72,
              109,
              78,
              77,
              66,
              114,
              88,
              75,
              119,
              69,
              51,
              102,
              115,
              48,
              67,
              73,
              51,
              88,
              104,
              82,
              55,
              57,
              103,
              69,
              79,
              110,
              109,
              86,
              79,
              79,
              118,
              115,
              101,
              68,
              106,
              113,
              81,
              107,
              119,
              121,
              102,
              115,
              65,
              65,
              115,
              100,
              99,
              49,
              100,
              108,
              72,
              101,
              67,
              66,
              75,
              109,
              49,
              66,
              57,
              81,
              37,
              51,
              68,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1280,
          "responseSize": 431
        },
        "id": "5a0fbd38-82ba-493e-a70e-2d3a626cb0d2",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 코드(CARDCODE 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 전화번호(USERPHONE) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "할부 개월 수(QUOTA) 정상출력",
            "skipped": false
          },
          {
            "assertion": "매출 발생시간(TRANTIME) ±5초 이내 검증",
            "skipped": false
          },
          {
            "assertion": "매출 발생일자(TRANDATE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "상품명(ITEMNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "보증금 금액(DEPOSIT_AMT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "가맹점 주문번호(ORDERID) 빈값 확인",
            "skipped": false
          },
          {
            "assertion": "카드번호(CARDNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "거래 승인 번호(CARDAUTHNO) 정상출력",
            "skipped": false
          },
          {
            "assertion": "카드사 명(CARDNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 이름(USERNAME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "구매자 ID(USERID) 정상출력",
            "skipped": false
          }
        ]
      },
      {
        "cursor": {
          "ref": "90c90a70-742e-4175-a8da-a40670d8e293",
          "length": 21,
          "cycles": 1,
          "position": 20,
          "iteration": 0,
          "httpRequestId": "acb5e213-dd89-4b64-af9e-20cfe4aa0fa7"
        },
        "item": {
          "id": "de8cd767-96af-4e77-aba2-ca181f381144",
          "name": "카드 승인 취소 (BILLCANCEL)",
          "request": {
            "url": {
              "host": [
                "{{tx-credit}}"
              ],
              "query": [
                {
                  "key": "CPID",
                  "value": "A010037544"
                },
                {
                  "key": "DATA",
                  "value": "{{encryptedData}}"
                }
              ],
              "variable": []
            },
            "method": "POST"
          },
          "response": [],
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "232877cf-4734-49d3-8272-631a5b896522",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// 암호화 대상 데이터 (CPID 제외)\r",
                  "let params = {\r",
                  "    AMOUNT: '301',\r",
                  "    TID: pm.environment.get(\"TID\"),\r",
                  "    CANCELTYPE: 'C',\r",
                  "    TXTYPE: 'CANCEL',\r",
                  "    SERVICETYPE: 'DANALCARD'\r",
                  "};\r",
                  "\r",
                  "// Step 1: URL 인코딩 (key 제외, value만)\r",
                  "let encodedParams = [];\r",
                  "for (let key in params) {\r",
                  "    let value = encodeURIComponent(params[key]);\r",
                  "    encodedParams.push(`${key}=${value}`);\r",
                  "}\r",
                  "\r",
                  "// Step 2: QueryString 구성\r",
                  "let queryString = encodedParams.join('&');\r",
                  "\r",
                  "// Step 3: AES256 암호화 (CBC + PKCS7)\r",
                  "let encrypted = CryptoJS.AES.encrypt(queryString, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 4: Base64 → URLEncoded\r",
                  "const base64Cipher = encrypted.ciphertext.toString(CryptoJS.enc.Base64);\r",
                  "const finalEncoded = encodeURIComponent(base64Cipher);\r",
                  "\r",
                  "// Step 5: 암호화된 데이터 환경 변수 저장\r",
                  "pm.environment.set(\"encryptedData\", finalEncoded);"
                ],
                "_lastExecutionId": "1dc0d927-1565-4cec-a938-f2bc92f4cc0a"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "f2d6de81-0acb-4c14-9824-81baffad97e9",
                "type": "text/javascript",
                "packages": {},
                "exec": [
                  "// Step 1: 응답을 텍스트로 가져옴\r",
                  "let rawText = pm.response.text();\r",
                  "\r",
                  "// Step 2: DATA= 뒤의 암호문만 추출\r",
                  "let encryptedData = rawText.split(\"DATA=\")[1];\r",
                  "\r",
                  "// Step 3: URI 디코딩\r",
                  "let base64Cipher = decodeURIComponent(encryptedData);\r",
                  "\r",
                  "// Step 4: 복호화 Key / IV 설정 (Hex 형태 사용!)\r",
                  "const key = CryptoJS.enc.Hex.parse(\"20ad459ab1ad2f6e541929d50d24765abb05850094a9629041bebb726814625d\");\r",
                  "const iv = CryptoJS.enc.Hex.parse(\"d7d02c92cb930b661f107cb92690fc83\");\r",
                  "\r",
                  "// Step 5: AES 복호화\r",
                  "let decrypted = CryptoJS.AES.decrypt(base64Cipher, key, {\r",
                  "    iv: iv,\r",
                  "    mode: CryptoJS.mode.CBC,\r",
                  "    padding: CryptoJS.pad.Pkcs7\r",
                  "});\r",
                  "\r",
                  "// Step 6: 결과를 UTF-8 문자열로 변환\r",
                  "let result = decrypted.toString(CryptoJS.enc.Utf8);\r",
                  "console.log(\"복호화 결과 : \", result);\r",
                  "\r",
                  "// Step 7: 복호화된 데이터 환경 변수에 저장\r",
                  "pm.environment.set(\"decryptedResponse\", result);\r",
                  "\r",
                  "\r",
                  "/********************     Assertion     **********************/\r",
                  "\r",
                  "// Key-Value 파싱 함수\r",
                  "function parseQueryString(str) {\r",
                  "    return str.split(\"&\").reduce((acc, pair) => {\r",
                  "        const [key, value] = pair.split(\"=\");\r",
                  "        acc[key] = value || \"\";\r",
                  "        return acc;\r",
                  "    }, {});\r",
                  "}\r",
                  "\r",
                  "// 안전 디코딩 함수\r",
                  "function safeDecodeURIComponent(str) {\r",
                  "    try {\r",
                  "        return decodeURIComponent(str);\r",
                  "    } catch (e) {\r",
                  "        console.warn(\"decodeURIComponent 실패:\", e.message);\r",
                  "        return str;\r",
                  "    }\r",
                  "}\r",
                  "\r",
                  "const parsed = parseQueryString(result);\r",
                  "\r",
                  "pm.test(\"결과코드(RETURNCODE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNCODE).to.eql(\"0000\")\r",
                  "});\r",
                  "\r",
                  "// \"성공\" 검증\r",
                  "pm.test(\"결과메세지(RETURNMSG) 정상출력\", function () {\r",
                  "    pm.expect(parsed.RETURNMSG).to.eql(\"%BC%BA%B0%F8\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"취소 후 잔액(BALANCE) 정상출력\", function () {\r",
                  "    pm.expect(parsed.BALANCE).to.eql(\"0\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 원 거래 키(O_TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.O_TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.O_TID).to.not.be.null;\r",
                  "    pm.expect(parsed.O_TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.O_TID).to.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "pm.test(\"다날 거래 키(TID) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TID).to.not.be.undefined;\r",
                  "    pm.expect(parsed.TID).to.not.be.empty;\r",
                  "    pm.expect(parsed.TID).to.not.be.null;\r",
                  "    pm.expect(parsed.TID).to.have.lengthOf(24);\r",
                  "    pm.expect(parsed.TID).to.not.eql(pm.environment.get(\"TID\"))\r",
                  "});\r",
                  "\r",
                  "// 매출 발생시간과 비교 검증\r",
                  "pm.test(\"승인 발생시간(TRANTIME) 정상출력\", function () {\r",
                  "    pm.expect(parsed.TRANTIME).to.eql(pm.environment.get(\"TRANTIME\"))\r",
                  "});\r",
                  "\r",
                  "// 현재 날짜 구하기 (yyyyMMdd)\r",
                  "function getYYYYMMDD() {\r",
                  "  const today = new Date();\r",
                  "  const yyyy = today.getFullYear();\r",
                  "  const mm = String(today.getMonth() + 1).padStart(2, \"0\"); // 월은 0부터 시작하므로 1을 더하고 2자리로 만듦\r",
                  "  const dd = String(today.getDate()).padStart(2, \"0\");   // 2자리로 만듦\r",
                  "\r",
                  "  return `${yyyy}${mm}${dd}`;\r",
                  "}\r",
                  "\r",
                  "const formattedDate = getYYYYMMDD(); // 출력: 20230730 (예시) \r",
                  "\r",
                  "pm.test(\"승인 발생일자(TRANDATE)\", function () {\r",
                  "    pm.expect(parsed.TRANDATE).to.eql(formattedDate)\r",
                  "});\r",
                  "\r",
                  "pm.test(\"승인 취소 금액(AMOUNT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.AMOUNT).to.eql(\"301\")\r",
                  "});\r",
                  "\r",
                  "pm.test(\"컵 보증금(DEPOSIT_AMT) 정상출력\", function () {\r",
                  "    pm.expect(parsed.DEPOSIT_AMT).to.eql(\"0\")\r",
                  "});"
                ],
                "_lastExecutionId": "c58fa553-518e-45ca-82c4-f368c06b64d2"
              }
            }
          ]
        },
        "request": {
          "url": {
            "protocol": "https",
            "path": [
              "credit",
              ""
            ],
            "host": [
              "tx-creditcard",
              "danalpay",
              "com"
            ],
            "query": [
              {
                "key": "CPID",
                "value": "A010037544"
              },
              {
                "key": "DATA",
                "value": "8kvDIwvdID7NWcBMND4uDdKPh51o%2Brl5JI%2F9s86WSsPjtweyP2gokBbmFyfhLhHCyY7Y1H37NkKgLrRc6IFDMKJcq6ncVEjeA9%2FCGYuT7557X%2F6%2FNeth2ziMPi0h0zGD"
              }
            ],
            "variable": []
          },
          "header": [
            {
              "key": "User-Agent",
              "value": "PostmanRuntime/7.39.1",
              "system": true
            },
            {
              "key": "Accept",
              "value": "*/*",
              "system": true
            },
            {
              "key": "Cache-Control",
              "value": "no-cache",
              "system": true
            },
            {
              "key": "Postman-Token",
              "value": "24afc6ea-feb6-47b3-9d85-f8c039f2ddfa",
              "system": true
            },
            {
              "key": "Host",
              "value": "tx-creditcard.danalpay.com",
              "system": true
            },
            {
              "key": "Accept-Encoding",
              "value": "gzip, deflate, br",
              "system": true
            },
            {
              "key": "Connection",
              "value": "keep-alive",
              "system": true
            },
            {
              "key": "Cookie",
              "value": "SCOUTER=x7lkeo71ar49kj",
              "system": true
            },
            {
              "key": "Content-Length",
              "value": "0",
              "system": true
            }
          ],
          "method": "POST"
        },
        "response": {
          "id": "f66df3c8-d174-4f46-93b9-4175edf24843",
          "status": "OK",
          "code": 200,
          "header": [
            {
              "key": "Content-Type",
              "value": "text/plain;charset=EUC-KR"
            },
            {
              "key": "Content-Length",
              "value": "255"
            },
            {
              "key": "Date",
              "value": "Tue, 06 Jan 2026 13:30:32 GMT"
            },
            {
              "key": "Server",
              "value": "blank"
            }
          ],
          "stream": {
            "type": "Buffer",
            "data": [
              68,
              65,
              84,
              65,
              61,
              98,
              72,
              54,
              69,
              108,
              53,
              101,
              108,
              79,
              78,
              53,
              56,
              56,
              51,
              76,
              66,
              51,
              82,
              108,
              102,
              70,
              49,
              79,
              70,
              49,
              72,
              56,
              101,
              90,
              84,
              88,
              118,
              52,
              57,
              119,
              88,
              76,
              56,
              37,
              50,
              70,
              65,
              86,
              101,
              86,
              122,
              104,
              72,
              85,
              53,
              115,
              100,
              101,
              115,
              52,
              48,
              103,
              114,
              118,
              75,
              109,
              122,
              105,
              37,
              50,
              66,
              114,
              88,
              86,
              51,
              108,
              69,
              37,
              50,
              66,
              76,
              122,
              119,
              121,
              53,
              81,
              118,
              83,
              89,
              77,
              67,
              71,
              108,
              109,
              112,
              73,
              37,
              50,
              70,
              49,
              115,
              81,
              97,
              53,
              83,
              84,
              57,
              90,
              55,
              89,
              73,
              52,
              54,
              77,
              112,
              50,
              101,
              104,
              77,
              89,
              108,
              110,
              113,
              88,
              70,
              53,
              120,
              122,
              55,
              70,
              107,
              110,
              89,
              73,
              55,
              113,
              103,
              100,
              99,
              50,
              80,
              72,
              69,
              101,
              68,
              48,
              74,
              115,
              115,
              114,
              115,
              55,
              50,
              112,
              83,
              68,
              112,
              56,
              114,
              84,
              48,
              77,
              56,
              106,
              104,
              85,
              53,
              78,
              104,
              80,
              100,
              115,
              113,
              37,
              50,
              66,
              114,
              120,
              103,
              72,
              114,
              97,
              51,
              109,
              109,
              104,
              90,
              53,
              105,
              120,
              56,
              78,
              112,
              52,
              80,
              84,
              97,
              68,
              69,
              56,
              71,
              107,
              113,
              51,
              81,
              110,
              108,
              37,
              50,
              70,
              74,
              101,
              79,
              50,
              118,
              50,
              71,
              85,
              107,
              105,
              113,
              105,
              78,
              101,
              74,
              99,
              72,
              73,
              70,
              80,
              71,
              87,
              119,
              48,
              113,
              100,
              74,
              80,
              118,
              116,
              113,
              89,
              112,
              80,
              83,
              102,
              54,
              107,
              120,
              72,
              83,
              52,
              37,
              51,
              68
            ]
          },
          "cookie": [],
          "responseTime": 1290,
          "responseSize": 255
        },
        "id": "de8cd767-96af-4e77-aba2-ca181f381144",
        "assertions": [
          {
            "assertion": "결과코드(RETURNCODE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "결과메세지(RETURNMSG) 정상출력",
            "skipped": false
          },
          {
            "assertion": "취소 후 잔액(BALANCE) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 원 거래 키(O_TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "다날 거래 키(TID) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생시간(TRANTIME) 정상출력",
            "skipped": false
          },
          {
            "assertion": "승인 발생일자(TRANDATE)",
            "skipped": false
          },
          {
            "assertion": "승인 취소 금액(AMOUNT) 정상출력",
            "skipped": false
          },
          {
            "assertion": "컵 보증금(DEPOSIT_AMT) 정상출력",
            "skipped": false
          }
        ]
      }
    ],
    "transfers": {
      "responseTotal": 8055
    },
    "failures": [],
    "error": null
  }
}