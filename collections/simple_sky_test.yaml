# 🎯 이제 플래그 없이 완전 자동! 
name: "SKT SMS 테스트 (완전 자동)"
description: "common.yaml 설정이 자동으로 적용되는 깔끔한 테스트"
version: "1.0.0"

# 공통 설정 포함 - 이것만 하면 모든 변수 자동 로드!
include: common.yaml

# 시나리오 단계  
steps:
  - name: "{{SERVICE_NAME}} 결제 요청"
    
    args:
      Command: "ITEMSEND2"
      Configure: "FAILURE" 
      SERVICE: "{{SERVICE_NAME}}"        # common.yaml에서 자동
      ID: "{{MERCHANT_ID}}"             # common.yaml에서 자동
      PWD: "{{MERCHANT_PWD}}"           # common.yaml에서 자동
      USERID: "{{USER_ID}}"             # common.yaml에서 자동
      EMAIL: "{{EMAIL}}"                # common.yaml에서 자동
      ORDERID: "{{ORDER_ID}}"           # common.yaml에서 자동
      ItemInfo: "2|{{TEST_AMOUNT}}|1|22S0HZ0100|상품명"
      SUBCP: "DETEST"
      ItemType: "Amount"
      ItemCount: "1"
      OUTPUTOPTION: "DEFAULT"
      IsPreOtbill: "N"
      IsOpenMarket: "N"

  - name: "{{SERVICE_NAME}} 인증 처리"
    
    args:
      ServerInfo: "{{SERVER_INFO}}"      # 이전 단계에서 추출 (자동)
      Command: "IDELIVER"
      IDEN: "{{SKT_IDEN}}"                  # 통신사별 자동 (SKT 기본값)
      DSTADDR: "{{SKT_DST_ADDR}}"           # 통신사별 자동 (SKT 기본값) 
      CARRIER: "{{CARRIER}}"            # 통신사별 자동 (SKT 기본값)
      AMOUNT: "{{TEST_AMOUNT}}"         # common.yaml에서 자동
      WPAGE: "WEB"
      PRCODE: ""
      ISPREOTBILL: "N"
      TERMSAGREE3: "N"
      IFVERSION: "V1.1.7"
      TERMSAGREE2: "N|N"
      OUTPUTOPTION: "1"
      TERMSAGREE1: "Y"
      IPADDR: "{{IPADDR}}"              # common.yaml에서 자동
      SMTOTP: "N"
      ISCPIN: "Y"
      CPIN: "663466"

# 모든 공통 추출과 테스트는 자동으로 적용됨!
# 플래그나 복잡한 설정 불필요!