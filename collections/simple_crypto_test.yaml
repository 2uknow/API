# 간단한 암호화/복호화 테스트
name: "암호화 복호화 기본 테스트"
description: "dncrypt를 사용한 기본적인 암호화/복호화 테스트"
version: "1.0.0"

variables:
  TEST_DATA: "Hello World Test 2024"
  CRYPTO_KEY: "TEST_KEY_123"

steps:
  # 1단계: 암호화
  - name: "데이터 암호화 테스트"
    description: "테스트 데이터를 암호화"
    type: "crypto"

    args:
      operation: "encrypt"
      data: "{{TEST_DATA}}"
      key: "{{CRYPTO_KEY}}"

    extract:
      - name: "result"
        pattern: "result"
        variable: "ENCRYPTED_DATA"

    test:
      - name: "암호화 성공 확인"
        assertion: "ENCRYPTED_DATA exists"

  # 2단계: 복호화
  - name: "데이터 복호화 테스트"
    description: "암호화된 데이터를 복호화"
    type: "crypto"

    args:
      operation: "decrypt"
      data: "{{ENCRYPTED_DATA}}"
      key: "{{CRYPTO_KEY}}"

    extract:
      - name: "result"
        pattern: "result"
        variable: "DECRYPTED_DATA"

    test:
      - name: "복호화 성공 확인"
        assertion: "DECRYPTED_DATA exists"
      - name: "원본 데이터 일치 확인"
        assertion: "js: DECRYPTED_DATA === TEST_DATA"

options:
  stopOnError: true
  timeout: 15000